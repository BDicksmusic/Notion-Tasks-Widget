@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap');

:root {
  color-scheme: dark;
  
  /* Two-tone background system */
  --notion-bg: hsl(0, 0%, 10%);           /* Dark - main content areas */
  --notion-bg-secondary: hsl(0, 0%, 13%); /* Gray - chrome (sidebar, header, bars) */
  --notion-bg-tertiary: hsl(0, 0%, 16%);  /* Lifted elements within chrome */
  --notion-bg-elevated: hsl(0, 0%, 15%);  /* Floating elements (dropdowns, modals) */
  
  --notion-bg-hover: rgba(255, 255, 255, 0.055);
  --notion-bg-active: rgba(255, 255, 255, 0.08);
  --notion-border: rgba(255, 255, 255, 0.08);
  
  /* Notion-style text opacities */
  --notion-text: rgba(255, 255, 255, 0.81);
  --notion-text-secondary: rgba(255, 255, 255, 0.6);
  --notion-text-muted: rgba(255, 255, 255, 0.44);
  --notion-text-faint: rgba(255, 255, 255, 0.282);
  
  /* Accent colors */
  --notion-blue: #2383e2;
  --notion-blue-hover: #0077d4;
  --notion-red: #eb5757;
  --notion-green: #4dab9a;
  --notion-orange: #d9730d;
  --notion-yellow: #cb912f;
  --notion-purple: #9065b0;
  --notion-pink: #c14c8a;
  
  --notion-font: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, 'Apple Color Emoji', Arial, sans-serif, 'Segoe UI Emoji', 'Segoe UI Symbol';
  
  /* Notion uses subtle radii */
  --radius-xs: 3px;
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  
  /* Faster transitions like Notion */
  --transition-fast: 50ms ease-out;
  --transition-normal: 80ms ease-out;
  --transition-slow: 200ms ease;
  
  /* Matrix colors - using Notion's palette */
  --matrix-green: rgb(68, 131, 97);
  --matrix-blue: rgb(51, 126, 169);
  --matrix-yellow: rgb(203, 145, 47);
  --matrix-orange: rgb(217, 115, 13);
  --matrix-gray: rgb(155, 154, 151);
  
  /* Notion's actual color palette */
  --notion-color-gray: rgb(155, 154, 151);
  --notion-color-brown: rgb(100, 71, 58);
  --notion-color-orange: rgb(217, 115, 13);
  --notion-color-yellow: rgb(203, 145, 47);
  --notion-color-green: rgb(68, 131, 97);
  --notion-color-blue: rgb(51, 126, 169);
  --notion-color-purple: rgb(144, 101, 176);
  --notion-color-pink: rgb(193, 76, 138);
  --notion-color-red: rgb(212, 76, 71);
  
  /* Tag backgrounds using Notion colors */
  --tag-gray-bg: rgba(155, 154, 151, 0.2);
  --tag-brown-bg: rgba(100, 71, 58, 0.3);
  --tag-orange-bg: rgba(217, 115, 13, 0.2);
  --tag-yellow-bg: rgba(203, 145, 47, 0.2);
  --tag-green-bg: rgba(68, 131, 97, 0.25);
  --tag-blue-bg: rgba(51, 126, 169, 0.25);
  --tag-purple-bg: rgba(144, 101, 176, 0.2);
  --tag-pink-bg: rgba(193, 76, 138, 0.2);
  --tag-red-bg: rgba(212, 76, 71, 0.2);
}

/* ========================================
   LIGHT MODE - System Preference Based
   ======================================== */
@media (prefers-color-scheme: light) {
  :root {
    color-scheme: light;
    
    /* Two-tone background system - Light mode */
    --notion-bg: hsl(0, 0%, 100%);              /* White - main content areas */
    --notion-bg-secondary: hsl(30, 14%, 97%);   /* Warm off-white - chrome (sidebar, header, bars) */
    --notion-bg-tertiary: hsl(40, 12%, 94%);    /* Slightly darker for lifted elements */
    --notion-bg-elevated: hsl(0, 0%, 100%);     /* White for floating elements */
    
    --notion-bg-hover: rgba(55, 53, 47, 0.08);
    --notion-bg-active: rgba(55, 53, 47, 0.16);
    --notion-border: rgba(55, 53, 47, 0.09);
    
    /* Notion-style text opacities - Light mode uses dark text */
    --notion-text: rgba(55, 53, 47, 0.9);
    --notion-text-secondary: rgba(55, 53, 47, 0.65);
    --notion-text-muted: rgba(55, 53, 47, 0.45);
    --notion-text-faint: rgba(55, 53, 47, 0.3);
    
    /* Accent colors - Adjusted for light backgrounds */
    --notion-blue: #2383e2;
    --notion-blue-hover: #0b6e99;
    --notion-red: #e03e3e;
    --notion-green: #0f7b6c;
    --notion-orange: #d9730d;
    --notion-yellow: #dfab01;
    --notion-purple: #6940a5;
    --notion-pink: #ad1a72;
    
    /* Matrix colors - Light mode variants */
    --matrix-green: rgb(15, 123, 108);
    --matrix-blue: rgb(11, 110, 153);
    --matrix-yellow: rgb(223, 171, 1);
    --matrix-orange: rgb(217, 115, 13);
    --matrix-gray: rgb(155, 154, 151);
    
    /* Notion's light mode color palette */
    --notion-color-gray: rgb(155, 154, 151);
    --notion-color-brown: rgb(100, 71, 58);
    --notion-color-orange: rgb(217, 115, 13);
    --notion-color-yellow: rgb(223, 171, 1);
    --notion-color-green: rgb(15, 123, 108);
    --notion-color-blue: rgb(11, 110, 153);
    --notion-color-purple: rgb(105, 64, 165);
    --notion-color-pink: rgb(173, 26, 114);
    --notion-color-red: rgb(224, 62, 62);
    
    /* Tag backgrounds - Notion's light mode pastel backgrounds */
    --tag-gray-bg: #ebeced;
    --tag-brown-bg: #e9e5e3;
    --tag-orange-bg: #faebdd;
    --tag-yellow-bg: #fbf3db;
    --tag-green-bg: #ddedea;
    --tag-blue-bg: #ddebf1;
    --tag-purple-bg: #eae4f2;
    --tag-pink-bg: #f4dfeb;
    --tag-red-bg: #fbe4e4;
  }
  
  /* Light mode component overrides for hardcoded rgba values */
  
  /* Widget surface shadows - lighter for light mode */
  .widget-surface {
    box-shadow: 
      rgba(15, 15, 15, 0.04) 0px 0px 0px 1px,
      rgba(15, 15, 15, 0.06) 0px 3px 6px,
      rgba(15, 15, 15, 0.1) 0px 9px 24px;
  }
  
  /* Filter switch buttons */
  .task-filter-switch button:hover {
    background: rgba(55, 53, 47, 0.08);
  }
  
  .task-filter-switch button.active,
  .task-filter-switch button[aria-pressed='true'] {
    background: rgba(55, 53, 47, 0.1);
  }
  
  .task-filter-switch button[data-day="all"],
  .task-filter-switch button[data-deadline="all"],
  .task-filter-switch button[data-matrix="all"],
  .task-filter-switch button[data-status="all"] {
    border-color: rgba(55, 53, 47, 0.15);
  }
  
  .task-filter-switch button[data-day="all"].active,
  .task-filter-switch button[data-deadline="all"].active,
  .task-filter-switch button[data-matrix="all"].active,
  .task-filter-switch button[data-status="all"].active {
    background: rgba(55, 53, 47, 0.12);
    border-color: rgba(55, 53, 47, 0.25);
  }
  
  /* Matrix switch buttons */
  .matrix-switch button:hover:not(.active) {
    background: rgba(55, 53, 47, 0.08);
  }
  
  /* Checkbox styles */
  .widget-checkbox {
    border-color: rgba(55, 53, 47, 0.4);
    background: transparent;
  }
  
  .widget-checkbox:hover {
    border-color: rgba(55, 53, 47, 0.6);
    background: rgba(55, 53, 47, 0.04);
  }
  
  /* Task row dividers */
  .task-row-divider {
    border-color: rgba(55, 53, 47, 0.09);
  }
  
  /* Input fields */
  input[type="text"],
  input[type="number"],
  input[type="search"],
  textarea,
  select {
    background: hsl(0, 0%, 100%);
    border-color: rgba(55, 53, 47, 0.16);
    color: rgba(55, 53, 47, 0.9);
  }
  
  input[type="text"]:focus,
  input[type="number"]:focus,
  input[type="search"]:focus,
  textarea:focus,
  select:focus {
    border-color: rgba(55, 53, 47, 0.4);
    box-shadow: 0 0 0 2px rgba(55, 53, 47, 0.08);
  }
  
  input::placeholder,
  textarea::placeholder {
    color: rgba(55, 53, 47, 0.4);
  }
  
  /* Dropdown menus */
  .dropdown-menu,
  .context-menu,
  .popover {
    background: hsl(0, 0%, 100%);
    border-color: rgba(55, 53, 47, 0.09);
    box-shadow: 
      0 0 0 1px rgba(55, 53, 47, 0.06),
      0 4px 12px rgba(55, 53, 47, 0.1),
      0 8px 24px rgba(55, 53, 47, 0.15);
  }
  
  /* Task items hover states */
  .task-item:hover,
  .list-item:hover {
    background: rgba(55, 53, 47, 0.04);
  }
  
  /* Scrollbar styling for light mode */
  ::-webkit-scrollbar-track {
    background: rgba(55, 53, 47, 0.04);
  }
  
  ::-webkit-scrollbar-thumb {
    background: rgba(55, 53, 47, 0.2);
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: rgba(55, 53, 47, 0.35);
  }
  
  /* Quick add input */
  .quick-add input,
  .quick-add-input {
    background: hsl(0, 0%, 100%);
    border-color: rgba(55, 53, 47, 0.12);
  }
  
  .quick-add input:focus,
  .quick-add-input:focus {
    border-color: rgba(55, 53, 47, 0.3);
    background: hsl(0, 0%, 100%);
  }
  
  /* Search panel */
  .widget-search-panel {
    background: hsl(0, 0%, 100%);
    border-color: rgba(55, 53, 47, 0.12);
  }
  
  .widget-search-panel input {
    background: hsl(0, 0%, 100%);
    color: rgba(55, 53, 47, 0.9);
  }
  
  /* Icon buttons */
  .icon-button:hover,
  .toolbar-button:hover,
  .dynamic-button:hover {
    background: rgba(55, 53, 47, 0.08);
  }
  
  .icon-button:active,
  .toolbar-button:active,
  .dynamic-button:active {
    background: rgba(55, 53, 47, 0.12);
  }
  
  /* Modals and dialogs */
  .modal-overlay,
  .dialog-overlay {
    background: rgba(255, 255, 255, 0.7);
  }
  
  .modal-content,
  .dialog-content {
    background: hsl(0, 0%, 100%);
    border-color: rgba(55, 53, 47, 0.09);
    box-shadow: 
      0 0 0 1px rgba(55, 53, 47, 0.04),
      0 8px 32px rgba(55, 53, 47, 0.15);
  }
  
  /* View tabs */
  .view-tab:hover {
    background: rgba(55, 53, 47, 0.06);
  }
  
  .view-tab.active {
    background: rgba(55, 53, 47, 0.08);
  }
  
  /* Settings panel */
  .settings-panel,
  .settings-content {
    background: hsl(0, 0%, 100%);
  }
  
  .settings-section {
    border-color: rgba(55, 53, 47, 0.09);
  }
  
  /* Tooltip styles */
  .tooltip,
  [data-tooltip]:hover::after {
    background: rgba(55, 53, 47, 0.9);
    color: white;
  }
  
  /* Tags in light mode need darker text for contrast */
  .tag,
  .notion-tag,
  .task-tag {
    color: rgba(55, 53, 47, 0.8);
  }
  
  /* Priority indicators */
  .priority-indicator {
    opacity: 0.9;
  }
  
  /* Calendar/date related */
  .date-badge,
  .calendar-day {
    color: rgba(55, 53, 47, 0.7);
  }
  
  .date-badge.overdue {
    color: #e03e3e;
  }
  
  /* Bottom controls bar */
  .bottom-controls {
    background: var(--notion-bg-secondary);
    border-color: rgba(55, 53, 47, 0.09);
  }
  
  /* Task window */
  .task-window-surface {
    background: hsl(0, 0%, 100%);
    border-color: rgba(55, 53, 47, 0.09);
  }
  
  /* Log surface */
  .log-surface {
    background: hsl(0, 0%, 100%);
    border-color: rgba(55, 53, 47, 0.09);
  }
  
  /* Writing widget */
  .writing-widget {
    background: hsl(0, 0%, 100%);
  }
  
  /* Time tracking */
  .time-entry,
  .session-item {
    border-color: rgba(55, 53, 47, 0.06);
  }
  
  .time-entry:hover,
  .session-item:hover {
    background: rgba(55, 53, 47, 0.04);
  }
  
  /* Resize handles */
  .resize-handle:hover {
    background: rgba(55, 53, 47, 0.15);
  }
  
  /* Empty states */
  .empty-state {
    color: rgba(55, 53, 47, 0.45);
  }
  
  /* Code/mono text */
  code,
  .mono {
    background: rgba(55, 53, 47, 0.06);
  }
  
  /* Selection states */
  ::selection {
    background: rgba(35, 131, 226, 0.3);
  }
}

* {
  box-sizing: border-box;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

body {
  background: transparent;
  color: var(--notion-text);
  font-family: var(--notion-font);
  user-select: none;
  -webkit-font-smoothing: antialiased;
}

#root {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
}

/* Fullscreen view body styling */
body:has(.fullscreen-app),
html:has(.fullscreen-app) {
  background: var(--notion-bg);
}

/* Fallback for browsers that don't support :has() */
.fullscreen-app {
  background: var(--notion-bg);
}

.widget-shell {
  position: relative;
  width: 100vw;
  height: 100vh;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.widget-surface {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 0;
  padding: 12px;
  /* Two-tone: outer shell uses secondary (gray) */
  background: var(--notion-bg-secondary);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-lg);
  box-shadow: rgba(15, 15, 15, 0.1) 0px 0px 0px 1px, rgba(15, 15, 15, 0.2) 0px 3px 6px, rgba(15, 15, 15, 0.4) 0px 9px 24px;
  -webkit-app-region: drag;
  transition:
    transform 400ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
    opacity 400ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
    border 400ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
  overflow: hidden;
}

/* Remove border in capture mode */
.widget-surface.is-capture-mode {
  border: none;
}

/* Purple background when session is active */
.widget-surface.has-active-session {
  background: var(--notion-bg-secondary);
}

.widget-surface button,
.task-window-surface button,
.widget-surface input,
.task-window-surface input,
.widget-surface select,
.task-window-surface select,
.widget-surface textarea,
.task-window-surface textarea,
.widget-surface a,
.task-window-surface a,
.widget-surface label,
.task-window-surface label,
.log-surface,
.writing-widget,
.task-list,
.quick-add,
.settings,
.resize-handle,
.task-window-body,
.bottom-controls,
.bottom-controls button,
.bottom-controls-left,
.bottom-controls-left button {
  -webkit-app-region: no-drag;
}

.widget-surface input,
.widget-surface select,
.widget-surface textarea,
.task-window-surface input,
.task-window-surface select,
.task-window-surface textarea {
  -webkit-user-select: text;
  user-select: text;
}

.task-window-shell {
  width: 100vw;
  height: 100vh;
  padding: 0;
  background: transparent;
  position: relative;
}

.task-window-shell.is-receiving-drag {
  cursor: pointer;
}

.task-window-shell.is-drop-target .task-window-surface {
  outline: 2px solid rgba(168, 85, 247, 0.6);
  outline-offset: -2px;
}

/* Drop overlay for floating task window */
.task-window-drop-overlay {
  position: absolute;
  inset: 0;
  background: rgba(168, 85, 247, 0.15);
  backdrop-filter: blur(2px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  cursor: pointer;
  border-radius: var(--radius-lg);
  margin: 1px;
}

.task-window-drop-overlay .drop-overlay-content {
  background: linear-gradient(135deg, rgba(168, 85, 247, 0.95), rgba(139, 92, 246, 0.95));
  color: white;
  padding: 16px 24px;
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 20px rgba(168, 85, 247, 0.4);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  text-align: center;
  max-width: 80%;
}

.task-window-drop-overlay .drop-icon {
  font-size: 24px;
}

.task-window-drop-overlay .drop-text {
  font-size: 14px;
  font-weight: 500;
}

.task-window-surface {
  width: calc(100% - 2px);
  height: calc(100% - 2px);
  margin: 1px;
  display: flex;
  flex-direction: column;
  /* Two-tone: outer shell uses secondary (gray) */
  background: var(--notion-bg-secondary);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-lg);
  box-shadow: rgba(15, 15, 15, 0.1) 0px 0px 0px 1px,
    rgba(15, 15, 15, 0.2) 0px 3px 6px, rgba(15, 15, 15, 0.4) 0px 9px 24px;
  -webkit-app-region: no-drag;
  overflow: hidden;
}


.task-window-body {
  flex: 1;
  padding: 12px;
  overflow: auto;
  /* Two-tone: content area is darker/recessed */
  background: var(--notion-bg);
  margin: 0 6px;
  border-radius: var(--radius-md);
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.15);
}

.task-window-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  border-top: 1px solid var(--notion-border);
  gap: 12px;
  -webkit-app-region: drag;
}

.task-window-footer button,
.task-window-footer-actions {
  -webkit-app-region: no-drag;
}

.task-window-footer-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.task-window-close {
  border: none;
  background: transparent;
  color: var(--notion-text);
  font-size: 18px;
  line-height: 1;
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background 120ms ease, color 120ms ease;
}

.task-window-close:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-red);
}

/* Handles */
.widget-handle {
  position: absolute;
  width: 24px;
  height: 48px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity 150ms ease;
  cursor: pointer;
  z-index: 10;
  pointer-events: auto;
}

.widget-handle span {
  width: 4px;
  height: 24px;
  border-radius: 2px;
  background: var(--notion-text-muted);
}

.handle-left {
  left: 0;
  top: 0;
  width: 12px;
  height: 100%;
  transform: none;
  justify-content: center;
}

.handle-right {
  right: 0;
  top: 0;
  width: 12px;
  height: 100%;
  transform: none;
  justify-content: center;
}

.handle-top {
  top: 0;
  left: 0;
  width: 100%;
  height: 12px;
  transform: none;
  align-items: center;
}

.handle-top span {
    width: 24px;
    height: 4px;
}

.collapsed-cue {
  position: absolute;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 999px;
  background: linear-gradient(135deg, rgba(35, 131, 226, 0.95), rgba(103, 172, 255, 0.95));
  color: #ffffff;
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  box-shadow: 0 10px 24px rgba(35, 131, 226, 0.4);
  animation: collapsedCuePulse 2.6s ease-in-out infinite;
  pointer-events: none;
  white-space: nowrap;
}

.collapsed-cue-icon {
  font-size: 16px;
  line-height: 1;
}

.collapsed-cue-label {
  font-size: 10px;
}

.handle-left .collapsed-cue,
.handle-right .collapsed-cue {
  top: 50%;
  transform: translateY(-50%);
  position: absolute;
}

.handle-left .collapsed-cue {
  left: calc(100% + 10px);
}

.handle-right .collapsed-cue {
  right: calc(100% + 10px);
}

.handle-top .collapsed-cue {
  /* Hide collapsed cue for top edge - widget surface is already visible */
  display: none;
}


@keyframes collapsedCuePulse {
  0%,
  100% {
    opacity: 0.75;
    box-shadow: 0 10px 24px rgba(35, 131, 226, 0.4);
  }
  50% {
    opacity: 1;
    box-shadow: 0 12px 30px rgba(35, 131, 226, 0.55);
  }
}

/* Base collapsed state - hide most of the surface */
.widget-shell.is-collapsed .widget-surface {
  pointer-events: none;
}

/* For left/right edges, hide the surface completely with opacity */
.widget-shell.edge-left.is-collapsed .widget-surface {
  opacity: 0;
  transform: translateX(-20px);
}

.widget-shell.edge-right.is-collapsed .widget-surface {
  opacity: 0;
  transform: translateX(20px);
}

/* For top edge, keep it visible - window positioning handles the visibility */
/* The window is positioned so only the top 8% is visible, so we don't need opacity: 0 */
.widget-shell.edge-top.is-collapsed .widget-surface {
  opacity: 1;
  /* No transform needed - window positioning handles it */
  transform: none;
  /* Allow clicking on the visible portion to expand */
  pointer-events: auto;
}

.widget-shell.is-collapsed .widget-handle {
  opacity: 1;
  pointer-events: auto;
  cursor: pointer;
}

.widget-shell.is-collapsed .widget-handle span {
  opacity: 1;
}

/* Prevent handle from interfering with widget surface when expanded */
.widget-shell:not(.is-collapsed) .widget-handle {
  pointer-events: none;
}

.widget-shell:not(.is-collapsed) .widget-handle span {
  opacity: 0;
}

/* In button mode, handle is still clickable when collapsed */
.widget-handle.button-mode {
  pointer-events: auto;
}

.widget-handle.button-mode span {
  opacity: 0;
}

/* But when expanded in button mode, disable handle */
.widget-shell:not(.is-collapsed) .widget-handle.button-mode {
  pointer-events: none;
}

/* Header */
.widget-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px 8px;
  margin-bottom: 0;
  /* Inherits from widget surface - no separate background */
}

/* Expandable search panel below header */
.widget-search-panel {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 0 10px 10px;
  animation: slideDown 150ms ease-out;
}

.widget-search-panel .search-input-wrapper {
  flex: 1;
}

.widget-search-panel .search-results-count.inline {
  font-size: 12px;
  font-weight: 500;
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  white-space: nowrap;
}

.widget-search-panel .search-results-count.has-results {
  background: rgba(34, 197, 94, 0.15);
  color: #4ade80;
}

.widget-search-panel .search-results-count.no-results {
  background: rgba(239, 68, 68, 0.15);
  color: #f87171;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* View selector island - separate from toolbar cluster */
.view-selector-island {
  display: flex;
  align-items: center;
  margin-right: 8px;
}

.widget-toolbar-cluster {
  display: flex;
  align-items: center;
  gap: 4px;
  min-height: 34px;
  flex: 1;
}

/* Notion-style ghost button */
.dynamic-button {
  border: none;
  background: transparent;
  color: var(--notion-text-secondary);
  font-size: 13px;
  font-weight: 500;
  padding: 5px 10px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-normal);
}

.dynamic-button:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

.dynamic-button:active {
  background: var(--notion-bg-active);
}

.widget-toolbar {
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 3px 4px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.04);
}

.filter-summary-text {
  font-size: 11px;
  color: var(--notion-text-muted);
  padding: 4px 8px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 300px;
}

.header-actions {
  display: flex;
  align-items: center;
  margin-left: auto;
  gap: 16px;
}

.header-actions-right {
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 3px 4px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.04);
}

.header-actions-right .icon-button {
  width: 28px;
  height: 28px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
}

.header-actions-right .gear-button {
  width: 28px;
  height: 28px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  background: transparent;
  border: none;
  cursor: pointer;
  color: var(--notion-text-muted);
  transition: all 150ms ease;
}

.header-actions-right .gear-button:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--notion-text);
}

.header-actions-right .gear-button svg {
  opacity: 0.6;
  transition: opacity 150ms ease;
}

.header-actions-right .gear-button:hover svg {
  opacity: 1;
}

/* Notion-style toggle button - minimal, no borders */
.widget-toggle-button {
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 13px;
  font-weight: 500;
  padding: 6px 10px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-normal);
  white-space: nowrap;
  flex-shrink: 0;
}

.widget-toggle-button:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

.widget-toggle-button:active {
  background: var(--notion-bg-active);
}

.widget-toggle-text {
  display: inline-block;
}

.drag-handle {
  -webkit-app-region: drag;
  cursor: move;
}

.widget-header h1 {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  color: var(--notion-text);
  line-height: 1.2;
}

.eyebrow {
  font-size: 11px;
  text-transform: uppercase;
  color: var(--notion-text-muted);
  margin: 0 0 2px;
  letter-spacing: 0.03em;
}

/* Notion-style icon buttons - subtle and minimal */
.gear-button,
.icon-button {
  font-size: 16px;
  border: none;
  background: transparent;
  color: var(--notion-text-faint);
  cursor: pointer;
  padding: 4px;
  border-radius: var(--radius-sm);
  transition: all var(--transition-fast);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 24px;
}

.gear-button:hover,
.icon-button:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

.icon-button.active {
  background: var(--tag-blue-bg);
  color: var(--notion-blue);
}

.icon-button.active:hover {
  background: rgba(0, 120, 223, 0.2);
}

/* Undo Toast */
.undo-toast {
  position: fixed;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 12px 8px 16px;
  background: rgba(30, 30, 30, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  z-index: 9999;
  animation: undo-toast-in 200ms ease;
}

@keyframes undo-toast-in {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

.undo-toast-text {
  font-size: 12px;
  color: var(--notion-text);
  max-width: 200px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.undo-toast-btn {
  background: rgba(59, 130, 246, 0.2);
  border: 1px solid rgba(59, 130, 246, 0.4);
  border-radius: 4px;
  padding: 4px 10px;
  font-size: 11px;
  font-weight: 600;
  color: #60a5fa;
  cursor: pointer;
  transition: all 150ms ease;
}

.undo-toast-btn:hover {
  background: rgba(59, 130, 246, 0.3);
  border-color: rgba(59, 130, 246, 0.5);
}

.undo-toast-shortcut {
  font-size: 10px;
  color: var(--notion-text-muted);
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 4px;
}

/* Sync Button */
.sync-button {
  position: relative;
}

.sync-button .sync-button-icon {
  display: inline-block;
  transition: transform 0.2s ease;
}

.sync-button.is-syncing .sync-button-icon {
  animation: sync-spin 1s linear infinite;
}

.sync-button.has-error {
  color: #ff8a65;
}

.sync-button.has-error:hover {
  color: #ffab91;
  background: rgba(255, 138, 101, 0.15);
}

.sync-button.has-error .sync-button-icon {
  font-weight: 700;
  font-size: 14px;
}

@keyframes sync-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}


/* Switcher */
.widget-switch {
  display: flex;
  gap: 2px;
  padding: 2px;
  background: var(--notion-bg-secondary);
  border-radius: var(--radius-sm);
}

/* Widget tabs in header - grouped pill style */
.widget-switch.widget-tabs {
  padding: 3px 4px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.04);
  gap: 2px;
}

.widget-switch button {
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 12px;
  font-weight: 500;
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: color 100ms ease, background 100ms ease;
}

.widget-switch button:hover {
  color: var(--notion-text);
  background: var(--notion-bg-hover);
}


.widget-switch button.active {
  background: var(--notion-bg-active);
  color: var(--notion-text);
}


/* Widget tabs with SVG icons */
.widget-tabs button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 6px 8px;
  border-radius: 6px;
  background: transparent;
  border: none;
  cursor: pointer;
  transition: all 150ms ease;
}

.widget-tabs button:hover {
  background: rgba(255, 255, 255, 0.08);
}

.widget-tabs button.active {
  background: rgba(255, 255, 255, 0.1);
}

.widget-tabs .tab-icon {
  display: flex;
  align-items: center;
  justify-content: center;
}

.widget-tabs .tab-icon svg {
  opacity: 0.5;
  transition: opacity 150ms ease;
}

.widget-tabs button:hover .tab-icon svg,
.widget-tabs button.active .tab-icon svg {
  opacity: 1;
}

.widget-tabs .tab-count {
  opacity: 0.5;
  font-size: 11px;
  color: var(--notion-text-muted);
}

.widget-tabs button.active .tab-count {
  opacity: 0.7;
}

/* View Selector */
.view-selector {
  position: relative;
}

/* Notion-style view selector */
.view-selector-trigger {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 13px;
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
  transition: color 100ms ease, background 100ms ease;
}

.view-selector-trigger:hover {
  color: var(--notion-text);
  background: var(--notion-bg-hover);
}

.view-selector-icon {
  font-size: 14px;
}

.view-selector-chevron {
  font-size: 10px;
  opacity: 0.6;
}

.view-selector-dropdown {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  min-width: 220px;
  background: var(--notion-bg-elevated);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  z-index: 1000;
  overflow: hidden;
}

.view-selector-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  font-size: 11px;
  font-weight: 600;
  color: var(--notion-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-bottom: 1px solid var(--notion-border);
}

.view-selector-new-window {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  border: none;
  background: var(--notion-bg-active);
  color: var(--notion-text);
  font-size: 16px;
  font-weight: 500;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background 100ms ease;
}

.view-selector-new-window:hover {
  background: var(--notion-accent);
}

.view-selector-list {
  max-height: 300px;
  overflow-y: auto;
}

.view-selector-empty {
  padding: 16px 12px;
  text-align: center;
  font-size: 12px;
  color: var(--notion-text-muted);
}

.view-selector-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  cursor: pointer;
  transition: background 100ms ease;
}

.view-selector-item:hover {
  background: var(--notion-bg-hover);
}

.view-selector-item-name {
  font-size: 13px;
  color: var(--notion-text);
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.view-selector-item-actions {
  display: flex;
  gap: 4px;
  opacity: 0;
  transition: opacity 100ms ease;
}

.view-selector-item:hover .view-selector-item-actions {
  opacity: 1;
}

.view-selector-item-action {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 14px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background 100ms ease, color 100ms ease;
}

.view-selector-item-action:hover {
  background: var(--notion-bg-active);
  color: var(--notion-text);
}

.view-selector-item-delete:hover {
  color: var(--notion-red);
}

.view-selector-naming {
  display: flex;
  gap: 6px;
  padding: 8px 12px;
  border-top: 1px solid var(--notion-border);
}

.view-selector-name-input {
  flex: 1;
  padding: 6px 8px;
  border: 1px solid var(--notion-border);
  background: var(--notion-bg);
  color: var(--notion-text);
  font-size: 12px;
  border-radius: var(--radius-sm);
  outline: none;
}

.view-selector-name-input:focus {
  border-color: var(--notion-accent);
}

.view-selector-save-btn {
  padding: 6px 12px;
  border: none;
  background: var(--notion-accent);
  color: white;
  font-size: 12px;
  font-weight: 500;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: opacity 100ms ease;
}

.view-selector-save-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.view-selector-capture {
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
  padding: 10px 12px;
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 12px;
  text-align: left;
  cursor: pointer;
  border-top: 1px solid var(--notion-border);
  transition: background 100ms ease, color 100ms ease;
}

.view-selector-capture:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

/* ============================================================================
   VIEW TABS - Notion-style horizontal tab bar for saved views
   ============================================================================ */

.view-tabs-container {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0 12px;
  min-height: 38px;
  background: var(--notion-bg);
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  overflow: hidden;
}

.view-tabs {
  display: flex;
  align-items: center;
  gap: 0;
  flex: 1;
  overflow-x: auto;
  scrollbar-width: none;
}

.view-tabs::-webkit-scrollbar {
  display: none;
}

/* Individual view tab - Notion style */
.view-tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  border: none;
  background: transparent;
  color: rgba(255, 255, 255, 0.5);
  font-size: 14px;
  font-weight: 400;
  border-radius: 0;
  cursor: pointer;
  transition: color 100ms ease;
  white-space: nowrap;
  position: relative;
}

.view-tab:hover {
  background: transparent;
  color: rgba(255, 255, 255, 0.8);
}

.view-tab.is-active {
  color: rgba(255, 255, 255, 0.9);
  background: transparent;
}

.view-tab.is-active::after {
  content: '';
  position: absolute;
  left: 12px;
  right: 12px;
  bottom: 0;
  height: 2px;
  background: rgb(35, 131, 226);
  border-radius: 0;
}

.view-tab-icon {
  font-size: 14px;
  line-height: 1;
}

.view-tab-name {
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Add button */
.view-tab-add {
  padding: 6px 10px;
  color: var(--notion-text-muted);
  opacity: 0.7;
}

.view-tab-add:hover {
  opacity: 1;
  background: var(--notion-bg-hover);
}

.view-tab-add-icon {
  font-size: 16px;
  font-weight: 400;
  line-height: 1;
}

/* Naming form inline */
.view-tab-naming {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 0;
}

.view-tab-icon-picker-trigger {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: 1px solid var(--notion-border);
  background: var(--notion-bg-elevated);
  border-radius: var(--radius-sm);
  font-size: 14px;
  cursor: pointer;
  transition: all 100ms ease;
}

.view-tab-icon-picker-trigger:hover {
  border-color: var(--notion-accent);
  background: var(--notion-bg-hover);
}

.view-tab-icon-picker {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 4px;
  padding: 8px;
  background: var(--notion-bg-elevated);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-md);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 4px;
  z-index: 1000;
}

.icon-option {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  border-radius: var(--radius-sm);
  font-size: 18px;
  cursor: pointer;
  transition: all 100ms ease;
}

.icon-option:hover {
  background: var(--notion-bg-hover);
}

.icon-option.is-selected {
  background: var(--notion-accent);
}

.view-tab-name-input {
  width: 120px;
  padding: 6px 8px;
  border: 1px solid var(--notion-border);
  background: var(--notion-bg);
  color: var(--notion-text);
  font-size: 12px;
  border-radius: var(--radius-sm);
  outline: none;
}

.view-tab-name-input:focus {
  border-color: var(--notion-accent);
}

.view-tab-save-btn,
.view-tab-cancel-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 26px;
  height: 26px;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 13px;
  cursor: pointer;
  transition: all 100ms ease;
}

.view-tab-save-btn {
  background: var(--notion-accent);
  color: white;
}

.view-tab-save-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.view-tab-save-btn:not(:disabled):hover {
  filter: brightness(1.1);
}

.view-tab-cancel-btn {
  background: transparent;
  color: var(--notion-text-muted);
}

.view-tab-cancel-btn:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

/* Save view button - Notion style orange */
.view-tabs-save-changes {
  padding: 4px 10px;
  border: none;
  background: rgb(180, 95, 52);
  color: white;
  font-size: 12px;
  font-weight: 500;
  border-radius: 4px;
  cursor: pointer;
  transition: background 100ms ease;
  white-space: nowrap;
  flex-shrink: 0;
}

.view-tabs-save-changes:hover {
  background: rgb(200, 105, 58);
}

/* Reset button next to save */
.view-tabs-reset {
  padding: 4px 10px;
  border: none;
  background: transparent;
  color: rgba(255, 255, 255, 0.6);
  font-size: 12px;
  font-weight: 400;
  border-radius: 4px;
  cursor: pointer;
  transition: background 100ms ease, color 100ms ease;
  white-space: nowrap;
}

.view-tabs-reset:hover {
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.8);
}

/* Context menu */
.view-tab-context-menu {
  position: fixed;
  min-width: 160px;
  padding: 4px 0;
  background: var(--notion-bg-elevated);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-md);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
  z-index: 1001;
}

.context-menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: transparent;
  color: var(--notion-text);
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: background 100ms ease;
}

.context-menu-item:hover {
  background: var(--notion-bg-hover);
}

.context-menu-item-danger:hover {
  background: rgba(235, 87, 87, 0.15);
  color: var(--notion-red);
}

.context-menu-icon {
  font-size: 14px;
  line-height: 1;
}

/* Icon picker overlay modal */
.view-tab-icon-picker-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1002;
}

.view-tab-icon-picker-modal {
  background: var(--notion-bg-elevated);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-lg);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  padding: 16px;
  min-width: 280px;
}

.icon-picker-header {
  font-size: 13px;
  font-weight: 600;
  color: var(--notion-text-muted);
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.icon-picker-grid {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 6px;
  margin-bottom: 12px;
}

.icon-picker-close {
  width: 100%;
  padding: 8px;
  border: none;
  background: var(--notion-bg-hover);
  color: var(--notion-text-muted);
  font-size: 12px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 100ms ease;
}

.icon-picker-close:hover {
  background: var(--notion-bg-active);
  color: var(--notion-text);
}

.pin-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 0.85rem;
  cursor: pointer;
  padding: 4px 6px;
  border-radius: var(--radius-sm);
  transition: color 0.2s ease, background 0.2s ease;
}

.pin-toggle .pin-icon {
  font-size: 13px;
  opacity: 0.4;
  transition: all 0.2s ease;
  filter: grayscale(1);
}

.pin-toggle:hover {
  color: var(--notion-text);
  background: rgba(255, 255, 255, 0.06);
}

.pin-toggle:hover .pin-icon {
  opacity: 0.7;
  filter: grayscale(0.3);
}

.pin-toggle.is-active {
  color: var(--notion-text);
  background: rgba(251, 191, 36, 0.1);
}

.pin-toggle.is-active .pin-icon {
  opacity: 1;
  filter: grayscale(0);
}

/* AI Assistant button */
.ai-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.ai-button svg {
  opacity: 0.5;
  transition: all 0.2s ease;
}

.ai-button:hover svg {
  opacity: 0.8;
}

.ai-button.active {
  background: rgba(139, 92, 246, 0.15);
}

.ai-button.active svg {
  opacity: 1;
  color: #a78bfa;
}

/* Main Content Area */
.log-surface {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0;
  background: transparent;
  padding: 0;
  min-height: 0;
  overflow: hidden;
}

.log-surface.writing-widget {
  overflow-y: auto;
  padding: 12px 8px 16px;
}

.log-surface header {
    padding: 12px 4px 8px;
    display: flex;
    justify-content: space-between;
    align-items: baseline;
}

.log-surface h2 {
    font-size: 14px;
    margin: 0;
    font-weight: 600;
}

.subtitle {
    display: none; /* Cleaner look */
}

.task-log-meta {
    font-size: 12px;
    color: var(--notion-text-muted);
}

.task-log-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden;
}

.task-log-body > .task-list {
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
}

.task-log-body > .quick-add-wrapper {
  flex: 0 0 auto;
  margin-top: auto;
}

.task-log-body > .bottom-controls {
  flex: 0 0 auto;
}

.task-filter-bar {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 0;
  margin: 0;
  max-height: 360px;
  opacity: 1;
  background: transparent;
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 0;
  box-shadow: none;
  transition:
    max-height 240ms ease,
    opacity 180ms ease,
    margin 180ms ease,
    padding 180ms ease;
}

.task-filter-bar.is-collapsed {
  max-height: 0;
  opacity: 0;
  margin-top: 0;
  padding-top: 0;
  padding-bottom: 0;
  pointer-events: none;
}

.task-filter-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px 24px;
    align-items: start;
    transition: opacity 180ms ease;
}

.task-filter-bar.is-collapsed .task-filter-grid {
    opacity: 0;
}

.task-organizer-panel {
  position: relative;
  z-index: 1000;
}

.task-organizer-pane {
  position: relative;
  z-index: 1001;
}

.filter-cell {
    display: flex;
    justify-content: flex-start;
}

.filter-row {
    display: flex;
    gap: 24px;
    align-items: flex-start;

}

.filter-row .filter-cell {
    flex: 1;
    min-width: 220px;
}

.filter-cell.align-end {
    justify-content: flex-end;
}

.filter-cell:has(.deadline-filter-switch) {
    flex: 0 0 auto;
}

.filter-cell:has(.matrix-switch) {
    flex: 1.5 1 320px;
    justify-content: flex-start;
}

/* Notion-style filter switch */
.task-filter-switch {
    display: inline-flex;
    align-items: center;
    gap: 2px;
    flex-wrap: wrap;
    padding: 2px;
    background: transparent;
    border-radius: var(--radius-sm);
}

/* Notion-style filter buttons */
.task-filter-switch button {
    border: none;
    background: transparent;
    color: var(--notion-text-muted);
    font-size: 13px;
    font-weight: 400;
    padding: 4px 8px;
    min-width: 0;
    height: 26px;
    line-height: 1;
    border-radius: 4px;
    text-align: center;
    transition: all 80ms ease;
    cursor: pointer;
    white-space: nowrap;
}

.task-filter-switch button:hover {
    color: var(--notion-text);
    background: rgba(255, 255, 255, 0.06);
}

/* Active filter button - Notion style with subtle fill */
.task-filter-switch button.active,
.task-filter-switch button[aria-pressed='true'] {
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
    font-weight: 500;
}

/* Special "All" button style - bordered like Notion */
.task-filter-switch button[data-day="all"],
.task-filter-switch button[data-deadline="all"],
.task-filter-switch button[data-matrix="all"],
.task-filter-switch button[data-status="all"] {
    border: 1px solid rgba(255, 255, 255, 0.15);
    padding: 3px 10px;
    border-radius: 4px;
}

.task-filter-switch button[data-day="all"].active,
.task-filter-switch button[data-deadline="all"].active,
.task-filter-switch button[data-matrix="all"].active,
.task-filter-switch button[data-status="all"].active {
    background: rgba(255, 255, 255, 0.12);
    border-color: rgba(255, 255, 255, 0.25);
}

.task-filter-switch button:focus-visible {
    outline: 2px solid var(--notion-blue);
    outline-offset: 1px;
}

/* Status filter - icon buttons */
.status-switch button {
    min-width: 28px;
    padding: 4px 6px;
}

/* Matrix filter buttons */
.matrix-switch button {
    font-size: 12px;
    padding: 4px 10px;
}

/* Simple hover without transform */
.matrix-switch button:hover {
    background: rgba(255, 255, 255, 0.08);
}

/* Day filter "Today" and "Week" text styling */
.day-filter-switch button[data-day='today'],
.day-filter-switch button[data-day='week'] {
    font-weight: 400;
}

.day-filter-switch button[data-day='week'] {
    --filter-accent-bg: rgba(34, 197, 94, 0.28);
    --filter-accent-border: rgba(34, 197, 94, 0.6);
    --filter-accent-color: #ecfdf5;
}

/* Status icon colors when active - subtle tint backgrounds */
.status-switch button[data-status='inbox'].active {
    background: rgba(59, 130, 246, 0.2);
    color: hsl(214, 70%, 70%);
}

.status-switch button[data-status='to-do'].active {
    background: rgba(250, 180, 21, 0.2);
    color: hsl(40, 90%, 65%);
}

.status-switch button[data-status='active'].active {
    background: rgba(34, 197, 94, 0.2);
    color: hsl(145, 60%, 55%);
}

.status-switch button[data-status='waiting'].active {
    background: rgba(249, 115, 22, 0.2);
    color: hsl(25, 90%, 60%);
}

.status-switch button[data-status='done'].active,
.status-switch button[data-status='all'].active {
    background: rgba(148, 163, 184, 0.2);
    color: var(--notion-text);
}

/* Deadline "Hard only" active state */
.deadline-filter-switch button[data-deadline='hard'].active {
    background: rgba(224, 62, 62, 0.2);
    color: hsl(0, 65%, 65%);
}

/* Matrix button active states */
.matrix-switch button[data-matrix='do-now'].active {
    background: rgba(34, 197, 94, 0.2);
    color: hsl(145, 60%, 55%);
}

.matrix-switch button[data-matrix='deep-work'].active {
    background: rgba(37, 99, 235, 0.2);
    color: hsl(214, 70%, 65%);
}

.matrix-switch button[data-matrix='delegate'].active {
    background: rgba(250, 204, 21, 0.2);
    color: hsl(45, 90%, 55%);
}

.matrix-switch button[data-matrix='trash'].active {
    background: rgba(251, 146, 60, 0.2);
    color: hsl(25, 90%, 60%);
}

/* Hide Done Toggle - inline style matching other filter buttons */
.hide-done-toggle-row {
    display: inline-flex;
    margin-left: 8px;
}

.hide-done-toggle {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 5px 10px;
    background: transparent;
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-sm);
    color: var(--notion-text-muted);
    font-size: 11px;
    cursor: pointer;
    transition: all 150ms ease;
}

.hide-done-toggle:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
    border-color: rgba(255, 255, 255, 0.15);
}

.hide-done-toggle.active {
    background: rgba(34, 197, 94, 0.2);
    border-color: rgba(34, 197, 94, 0.5);
    color: #4ade80;
}

.hide-done-check {
    width: 14px;
    height: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid currentColor;
    border-radius: 3px;
    font-size: 10px;
    font-weight: 600;
    line-height: 1;
}

.hide-done-toggle.active .hide-done-check {
    background: #22c55e;
    border-color: #22c55e;
    color: white;
}

.hide-done-label {
    font-weight: 500;
}

.status-inline-select {
    border-radius: 999px;
    padding: 4px 16px;
    font-weight: 500;
}

/* Task List */
.task-list {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 1px; /* Notion list style */
  padding: 6px;
  touch-action: pan-y;
  -webkit-overflow-scrolling: touch;
  /* GPU acceleration for smoother scrolling */
  transform: translateZ(0);
  will-change: scroll-position;
  /* Two-tone: content area is darker/recessed */
  background: var(--notion-bg);
  border-radius: var(--radius-md);
  /* Subtle inset effect */
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
}

/* Virtualization spacers for lazy loading */
.task-list-spacer {
  flex-shrink: 0;
  pointer-events: none;
  /* Performance: skip painting for offscreen spacers */
  contain: strict;
  content-visibility: auto;
}

.task-row.has-active-session {
  background: rgba(107, 33, 168, 0.15) !important;
  border-left: 3px solid #6b21a8;
}

.task-row.has-active-session:hover {
  background: rgba(107, 33, 168, 0.25) !important;
}

.task-row {
  padding: 8px 6px;
  border-radius: var(--radius-sm);
  background: transparent;
  border: none;
  border-top: 1px solid rgba(255, 255, 255, 0.04);
  display: flex;
  flex-direction: column;
  gap: 4px;
  z-index: 1;
  cursor: default;
  position: relative;
  /* Performance: contain layout/paint to prevent full-page recalculation */
  contain: layout style;
  /* Transition only on interaction, not during scroll */
}

.task-row:hover,
.task-row:focus-within {
  transition: background 100ms ease;
}

/* Suppress hover during scroll/click until mouse moves */
.task-list.suppress-hover .task-row:hover {
  background: transparent;
}
.task-list.suppress-hover .task-row.has-active-session:hover {
  background: rgba(107, 33, 168, 0.15) !important;
}
.task-list.suppress-hover .task-row.is-selected:hover {
  background: rgba(35, 131, 226, 0.08);
}
.task-list.suppress-hover .task-row.is-multi-selected:hover {
  background: rgba(59, 130, 246, 0.15);
}
.task-list.suppress-hover .task-row:hover .task-drag-handle {
  opacity: 0;
}

.task-row:first-child {
  border-top-color: transparent;
}

.task-row:last-child {
  border-bottom-color: transparent;

}

.task-row.is-focused-task {
  border: 1px solid rgba(107, 33, 168, 0.5);
  box-shadow: 0 6px 20px rgba(107, 33, 168, 0.25);
}

.task-row.is-selected {
  background: rgba(35, 131, 226, 0.08);
  border: 1px solid rgba(35, 131, 226, 0.2);
}

.task-row.is-selected.has-active-session {
  border-color: rgba(107, 33, 168, 0.65);
}

/* Multi-select styles */
.task-row.is-multi-selected {
  background: rgba(59, 130, 246, 0.15);
  border: 1px solid rgba(59, 130, 246, 0.5);
}

.task-row.is-multi-selected:hover {
  background: rgba(59, 130, 246, 0.2);
}

.task-row.is-keyboard-focused {
  outline: 2px solid rgba(59, 130, 246, 0.8);
  outline-offset: -2px;
}

.task-multi-checkbox {
  width: 16px;
  height: 16px;
  margin-right: 8px;
  cursor: pointer;
  flex-shrink: 0;
  accent-color: var(--notion-blue);
}

.task-multi-checkbox.is-visible {
  opacity: 1;
}

/* Drag handle in multi-select mode */
.task-drag-handle.in-multi-select {
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.3);
}

.task-row.is-draggable {
  cursor: grab;
}

.task-row.is-draggable:active {
  cursor: grabbing;
}

.task-row.drag-over-above::before,
.task-row.drag-over-below::after {
  content: '';
  position: absolute;
  left: 8px;
  right: 8px;
  height: 2px;
  background: rgba(168, 85, 247, 0.8);
  border-radius: 999px;
}

.task-row.drag-over-above::before {
  top: 0;
}

.task-row.drag-over-below::after {
  bottom: 0;
}

.task-drop-zone {
  position: relative;
  height: 14px;
  margin: 6px 2px;
}

.task-drop-zone::before {
  content: '';
  position: absolute;
  left: 12px;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  height: 2px;
  border-radius: 999px;
  background: rgba(148, 163, 184, 0.3);
  transition: background 120ms ease, box-shadow 120ms ease;
}

.task-drop-zone.is-active::before {
  background: rgba(168, 85, 247, 0.9);
  box-shadow: 0 0 12px rgba(168, 85, 247, 0.5);
}

.task-drop-zone .drop-zone-label {
  position: absolute;
  left: 50%;
  top: 0;
  transform: translate(-50%, -130%);
  background: rgba(15, 23, 42, 0.85);
  border: 1px solid rgba(148, 163, 184, 0.35);
  color: rgba(248, 250, 252, 0.85);
  font-size: 0.65rem;
  padding: 2px 12px;
  border-radius: 999px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  pointer-events: none;
  opacity: 0;
  transition: opacity 120ms ease, transform 120ms ease;
}

.task-drop-zone.is-active .drop-zone-label {
  opacity: 1;
  transform: translate(-50%, -160%);
}

.task-inspector-layer {
  position: fixed;
  inset: 0;
  z-index: 999;
  pointer-events: none;
}

.task-inspector-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(2, 6, 23, 0.6);
  border: none;
  cursor: pointer;
  pointer-events: auto;
}

.task-inspector-panel {
  position: absolute;
  top: 0;
  right: 0;
  width: min(420px, 100%);
  height: 100%;
  background: rgba(7, 7, 10, 0.98);
  border-left: 1px solid rgba(148, 163, 184, 0.2);
  box-shadow: -20px 0 40px rgba(0, 0, 0, 0.5);
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  pointer-events: auto;
}

.task-inspector-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.task-inspector-eyebrow {
  font-size: 0.75rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: rgba(148, 163, 184, 0.7);
  margin: 0 0 4px;
}

.task-inspector-header h3 {
  margin: 0;
}

.task-inspector-close {
  border: none;
  background: transparent;
  color: rgba(226, 232, 240, 0.85);
  font-size: 1.5rem;
  cursor: pointer;
  padding: 4px;
}

.task-inspector-body {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.inspector-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 0.85rem;
  color: rgba(226, 232, 240, 0.8);
}

.inspector-field input,
.inspector-field select {
  background: rgba(15, 23, 42, 0.6);
  border: 1px solid rgba(148, 163, 184, 0.3);
  border-radius: var(--radius-sm);
  padding: 8px 10px;
  color: #f8fafc;
  font-size: 0.95rem;
}

.task-inspector-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.task-inspector-actions button {
  flex: 1;
  min-width: 140px;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(248, 250, 252, 0.2);
  background: rgba(79, 70, 229, 0.2);
  color: #f8fafc;
  font-weight: 600;
  padding: 8px 12px;
  cursor: pointer;
}

.task-inspector-actions button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.task-inspector-error {
  color: #fecdd3;
  margin: 0;
  font-size: 0.85rem;
}

.task-inspector-section {
  border-top: 1px solid rgba(148, 163, 184, 0.2);
  padding-top: 12px;
  font-size: 0.9rem;
  color: rgba(226, 232, 240, 0.9);
}

.task-inspector-section h4 {
  margin: 0 0 6px;
}

.subactions-hint {
  font-size: 0.8rem;
  color: rgba(148, 163, 184, 0.9);
  margin: 8px 0 0;
}

.task-order-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 0.75rem;
  font-weight: 600;
  margin-right: 8px;
}

/* Notion-style drag handle - subtle, faint until hover */
.task-drag-handle {
  border: none;
  background: transparent;
  color: var(--notion-text-faint);
  cursor: pointer;
  padding: 0 4px;
  font-size: 12px;
  border-radius: var(--radius-xs);
  transition: all var(--transition-fast);
  opacity: 0.5;
}

.task-row:hover .task-drag-handle {
  opacity: 1;
}

.task-drag-handle:hover,
.task-drag-handle:focus-visible {
  color: var(--notion-text-muted);
  background: var(--notion-bg-hover);
}

.task-active-stack {
  position: sticky;
  top: 0;
  z-index: 4;
  background: linear-gradient(
    rgba(23, 23, 23, 0.98),
    rgba(23, 23, 23, 0.7),
    transparent
  );
  padding-bottom: 8px;
  /* GPU acceleration for smooth sticky behavior */
  transform: translateZ(0);
  will-change: transform;
}

.task-active-stack .task-row {
  margin-bottom: 8px;
}

.task-secondary-row {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
  margin: 6px 5px 0 5px;
  padding-top: 6px;
  position: relative;
}

/* Divider line with inset from edges */
.task-secondary-row::before {
  content: '';
  position: absolute;
  top: 0;
  left: 15px;
  right: 15px;
  height: 1px;
  background: rgba(255, 255, 255, 0.06);
}

/* Collapsible columns - collapsed height by default, content always visible */
.task-secondary-row.collapsible-column {
  max-height: 0;
  min-height: 0;
  height: 0;
  overflow: hidden;
  margin: 0;
  gap: 0;
  padding: 0;
  border: none;
  transition: max-height 0.2s ease, margin 0.2s ease, padding 0.2s ease;
}

.task-secondary-row.collapsible-column::before {
  display: none;
}

/* task-project-row.collapsible-column is defined below with its base styles */

/* Show collapsible columns on task row CLICK (is-selected) - NOT hover */
.task-row.is-selected .task-secondary-row.collapsible-column,
.task-row.is-selected .task-project-row.collapsible-column,
.task-row.is-focused-task .task-secondary-row.collapsible-column,
.task-row.is-focused-task .task-project-row.collapsible-column,
.task-row.is-keyboard-focused .task-secondary-row.collapsible-column,
.task-row.is-keyboard-focused .task-project-row.collapsible-column {
  max-height: 100px;
  min-height: 20px;
  height: auto;
  margin-top: 6px;
  gap: 12px;
}

/* Restore border on secondary row when expanded */
.task-row.is-selected .task-secondary-row.collapsible-column,
.task-row.is-focused-task .task-secondary-row.collapsible-column,
.task-row.is-keyboard-focused .task-secondary-row.collapsible-column {
  margin: 6px 5px 0 5px;
  padding-top: 6px;
}

.task-row.is-selected .task-secondary-row.collapsible-column::before,
.task-row.is-focused-task .task-secondary-row.collapsible-column::before,
.task-row.is-keyboard-focused .task-secondary-row.collapsible-column::before {
  display: block;
}

/* Keep expanded when any inner element is expanded (notes, editors, etc.) */
.task-row:has(.task-notes-expanded) .task-secondary-row.collapsible-column,
.task-row:has(.task-notes-expanded) .task-project-row.collapsible-column,
.task-row:has(.estimate-editor-expanded) .task-secondary-row.collapsible-column,
.task-row:has(.session-timer-expanded) .task-secondary-row.collapsible-column,
.task-row:has(.tracking-data-expanded) .task-secondary-row.collapsible-column,
.task-row:has(.task-project-picker) .task-project-row.collapsible-column,
.task-row:has(.add-subtask-container) .task-project-row.collapsible-column {
  max-height: 100px;
  margin-top: 6px;
}

/* Auto-expand project row when task has a project assigned (and setting enabled) */
.task-project-row.collapsible-column.has-project {
  max-height: 100px;
  min-height: 20px;
  height: auto;
  margin-top: 6px;
  gap: 12px;
}

.task-secondary-left {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  align-items: center;
  justify-content: flex-start;
}

.task-secondary-right {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  align-items: center;
  justify-content: flex-end;
}

/* Task Project Row - subtle project label */
.task-project-row {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;


}

/* Only add margin/height when NOT in collapsible mode */
.task-project-row:not(.collapsible-column) {
  margin-top: 6px;
  min-height: 20px;
  gap: 12px;
  margin: 0 15px 0 15px;
}

/* COLLAPSED STATE: Task project row when collapsed - no space taken */
.task-project-row.collapsible-column {
  max-height: 0;
  min-height: 0;
  height: 0;
  overflow: hidden;
  margin: 0;
  padding: 0;
  gap: 0;
  margin: 0 15px 0 15px;
  transition: max-height 0.2s ease, margin 0.2s ease, padding 0.2s ease;
}

.task-project-row-left {
  display: flex;
  align-items: center;
  position: relative;
}

.task-project-row-right {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
}

/* Add Subtask UI */
.add-subtask-container {
  display: flex;
  align-items: center;
}

.add-subtask-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 3px 6px;
  border-radius: 4px;
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 11px;
  cursor: pointer;
  transition: all 150ms ease;
  opacity: 0.5;
}

/* Always show when form is active */
.add-subtask-form {
  opacity: 1;
}

.add-subtask-btn:hover {
  color: var(--notion-text-secondary);
  background: var(--notion-bg-hover);
  opacity: 1;
}

.add-subtask-icon {
  font-size: 13px;
  font-weight: 500;
}

.add-subtask-form {
  display: flex;
  align-items: center;
  gap: 4px;
}

.add-subtask-input {
  width: 140px;
  padding: 4px 8px;
  border-radius: 4px;
  border: 1px solid var(--notion-border);
  background: var(--notion-bg-secondary);
  color: var(--notion-text);
  font-size: 11px;
  outline: none;
}

.add-subtask-input:focus {
  border-color: var(--notion-blue);
}

.add-subtask-submit {
  padding: 4px 10px;
  border-radius: 4px;
  border: none;
  background: var(--notion-blue);
  color: white;
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: opacity 150ms ease;
}

.add-subtask-submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.add-subtask-submit:not(:disabled):hover {
  opacity: 0.9;
}

.add-subtask-cancel {
  padding: 4px 6px;
  border-radius: 4px;
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 12px;
  cursor: pointer;
  transition: color 150ms ease;
}

.add-subtask-cancel:hover {
  color: #f87171;
}

/* Task Tags */
.task-tags {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-wrap: wrap;
}

.task-tag {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  font-size: 10px;
  font-weight: 500;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.08);
  color: var(--notion-text-muted);
  white-space: nowrap;
  transition: all 150ms ease;
}

.task-tag:hover {
  background: rgba(255, 255, 255, 0.12);
  color: var(--notion-text);
}

/* Notion-style project label - subtle and minimal */
.task-project-label {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  border: none;
  background: transparent;
  color: var(--notion-text-faint);
  font-size: 11px;
  font-weight: 400;
  cursor: pointer;
  opacity: 0.7;
  border-radius: var(--radius-sm);
  transition: all 150ms ease;
  opacity: 0.65;
}

.task-project-label:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text-secondary);
  opacity: 1;
}

.task-project-label .project-name {
  max-width: 280px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 11px;
  letter-spacing: 0.01em;
}

.task-project-label .project-chevron {
  font-size: 7px;
  opacity: 0.4;
  transition: transform var(--transition-fast);
  margin-left: 2px;
}

/* Add tag button - subtle text style with grayscale icon */
.task-tag-add-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 11px;
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: all 150ms ease;
  opacity: 0.5;
}

.task-tag-add-btn:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text-secondary);
  opacity: 1;
}

.task-tag-add-btn .tag-icon {
  font-size: 10px;
  filter: grayscale(1);
  opacity: 0.7;
  transition: all 150ms ease;
}

.task-tag-add-btn:hover .tag-icon {
  filter: grayscale(0.3);
  opacity: 1;
}

.task-tag-add-btn .tag-label {
  font-size: 11px;
}

/* "Add project" button - very subtle until hover */
.task-project-label.task-project-add {
  opacity: 0;
  color: var(--notion-text-faint);
}

.task-row:hover .task-project-label.task-project-add {
  opacity: 0.35;
}

.task-project-label.task-project-add:hover {
  opacity: 0.7;
  background: var(--notion-bg-hover);
}

/* Task Project Picker Dropdown */
.task-project-picker-backdrop {
  position: fixed;
  inset: 0;
  z-index: 2147483646;
  background: transparent;
}

.task-project-picker {
  position: fixed;
  z-index: 2147483647;
  min-width: 260px;
  max-width: 300px;
  max-height: 380px;
  overflow-y: auto;
  padding: 6px;
  background: var(--notion-bg-elevated);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 10px;
  box-shadow: 
    0 0 0 1px #000,
    0 8px 16px rgba(0, 0, 0, 0.7),
    0 16px 32px rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.task-project-picker .project-option {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  width: 100%;
  padding: 10px 12px;
  border: none;
  background: transparent;
  color: var(--notion-text);
  font-size: 13px;
  font-weight: 450;
  text-align: left;
  cursor: pointer;
  border-radius: 6px;
  transition: background 100ms ease;
}

.task-project-picker .project-option:hover {
  background: rgba(255, 255, 255, 0.08);
}

.task-project-picker .project-option.is-selected {
  background: rgba(59, 130, 246, 0.15);
  color: #93c5fd;
}

.task-project-picker .project-option.is-selected::after {
  content: '';
  font-size: 12px;
  font-weight: 600;
  color: #3b82f6;
  flex-shrink: 0;
}

.task-project-picker .project-option.is-selected:hover {
  background: rgba(59, 130, 246, 0.25);
}

/* First option (No project) styling */
.task-project-picker .project-option:first-child {
  color: var(--notion-text-muted);
  font-style: italic;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  margin-bottom: 4px;
  padding-bottom: 12px;
}

/* Capture form project selector */
.capture-project-inline {
  display: flex;
  align-items: center;
}

/* Project row - separate section above notes */
.capture-project-row {
  display: flex;
  align-items: center;
  padding: 0 8px;
  margin-top: 4px;
}

.project-select,
.capture-project-select {
  font-size: 13px;
  font-weight: 450;
  padding: 8px 32px 8px 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  background: var(--notion-bg-elevated);
  color: var(--notion-text);
  cursor: pointer;
  transition: all 150ms ease;
  min-width: 180px;
  max-width: 280px;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23999' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
}

.project-select option,
.capture-project-select option {
  padding: 12px 14px;
  line-height: 1.5;
  font-size: 13px;
  background: var(--notion-bg-elevated);
  color: var(--notion-text);
}

.project-select:hover,
.capture-project-select:hover {
  background: var(--notion-bg-tertiary);
  border-color: rgba(255, 255, 255, 0.18);
}

.project-select:focus,
.capture-project-select:focus {
  outline: none;
  border-color: rgba(59, 130, 246, 0.5);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.15);
}

.task-notes.estimate-editor {
  border-color: rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.02);
}

/* Remove margin from last task row when quick-add-wrapper exists in task-log-body */
.task-log-body.has-quick-add .task-list .task-row:last-child,
.task-log-body.has-quick-add .task-list .task-group-body .task-row:last-child,
.task-log-body.has-quick-add .task-group .task-group-body .task-row:last-child,
.task-log-body:has(> .quick-add-wrapper) .task-list .task-row:last-child,
.task-log-body:has(> .quick-add-wrapper) .task-list .task-group-body .task-row:last-child,
.task-log-body:has(> .quick-add-wrapper) .task-group .task-group-body .task-row:last-child {
  margin-bottom: 40px !important;
}

.task-row:hover {
  background: var(--notion-bg-hover);
}

.bottom-controls.has-active-session {
  background: linear-gradient(
    135deg,
    rgba(107, 33, 168, 0.25) 0%,
    rgba(139, 92, 246, 0.15) 100%
  );
  border-color: rgba(139, 92, 246, 0.3);
  box-shadow: 
    0 4px 24px rgba(139, 92, 246, 0.15),
    0 1px 2px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.05),
    0 0 40px rgba(139, 92, 246, 0.08);
}

.bottom-controls.is-collapsed .collapsed-session-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 5px 10px;
  border-radius: 10px;
  background: linear-gradient(
    135deg,
    rgba(139, 92, 246, 0.2) 0%,
    rgba(99, 102, 241, 0.15) 100%
  );
  border: 1px solid rgba(139, 92, 246, 0.25);
  margin-right: 8px;
  box-shadow: 0 0 12px rgba(139, 92, 246, 0.1);
}

.collapsed-session-times {
  display: inline-flex;
  align-items: baseline;
  gap: 6px;
  font-family: 'JetBrains Mono', monospace;
  color: #e9d5ff;
  letter-spacing: 0.5px;
}

.collapsed-session-remaining {
  font-size: 1em;
  font-weight: 600;
}

.collapsed-session-end {
  font-size: 0.85em;
  color: rgba(255, 255, 255, 0.8);
}

.collapsed-session-stop {
  border: none;
  background: rgba(255, 255, 255, 0.15);
  color: #fff;
  border-radius: var(--radius-sm);
  padding: 4px 10px;
  cursor: pointer;
  font-weight: 600;
}

.collapsed-session-stop:hover {
  background: rgba(255, 255, 255, 0.25);
}

.task-list.with-groups {
  gap: 10px;
  padding-right: 4px;
}

.task-group {
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.02);
  display: flex;
  flex-direction: column;
  /* Performance: contain layout for grouped tasks */
  contain: layout style;
}

.task-group-header {
  border: none;
  background: transparent;
  color: var(--notion-text);
  padding: 8px 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  text-align: left;
  width: 100%;
}

.task-group-header:hover {
  background: rgba(255, 255, 255, 0.02);
}

/* Group drop target styling */
.task-group.is-drop-target {
  position: relative;
}

.task-group-header.is-drop-target {
  background: rgba(168, 85, 247, 0.15);
  border-radius: var(--radius-md);
  transform: scale(1.01);
  box-shadow: 0 2px 8px rgba(168, 85, 247, 0.2);
  transition: all 150ms ease;
}

.task-group-header.is-drop-target .task-group-title {
  color: #d8b4fe;
}

.group-drop-indicator {
  position: absolute;
  right: 40px;
  font-size: 11px;
  color: #a855f7;
  background: rgba(168, 85, 247, 0.2);
  padding: 2px 8px;
  border-radius: 4px;
  animation: dropIndicatorPulse 1s ease-in-out infinite;
}

@keyframes dropIndicatorPulse {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

/* Task list dragging state */
.task-list.is-dragging {
  cursor: grabbing;
}

.task-list.is-dragging .task-row {
  cursor: grabbing;
}

/* Task being dragged */
.task-row.is-being-dragged {
  opacity: 0.5;
  transform: scale(0.98);
}

/* Improved task row draggable indicator */
.task-row[draggable="true"] {
  cursor: grab;
}

.task-row[draggable="true"]:active {
  cursor: grabbing;
}

.task-group-header-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.task-group-title {
  font-size: 12px;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  margin: 0;
}

.task-group-description {
  font-size: 11px;
  color: var(--notion-text-muted);
}

.task-group-meta {
  display: flex;
  align-items: center;
  gap: 8px;
}

.task-group-count {
  font-size: 11px;
  color: var(--notion-text-muted);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 999px;
  padding: 2px 8px;
}

.task-group-chevron {
  width: 10px;
  height: 10px;
  border-right: 1px solid rgba(255, 255, 255, 0.5);
  border-bottom: 1px solid rgba(255, 255, 255, 0.5);
  transform: rotate(45deg);
  transition: transform 150ms ease;
}

.task-group.is-collapsed .task-group-chevron {
  transform: rotate(-135deg);
}

.task-group-body {
  padding: 0 6px 10px;
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.task-group.is-collapsed .task-group-body {
  display: none;
}

.task-row-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
  overflow: hidden;
}

.task-header-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
  flex-wrap: wrap;
  max-width: 50%;
  justify-content: flex-end;
}

.task-header-left {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

/* Notion-style checkbox - soft rounded square */
.complete-toggle {
  width: 16px;
  height: 16px;
  min-width: 16px;
  border-radius: var(--radius-xs);
  border: 1.5px solid rgba(255, 255, 255, 0.35);
  background: transparent;
  color: var(--notion-text-muted);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  margin-top: 3px;
  transition: all var(--transition-normal);
  padding: 0;
  position: relative;
  overflow: hidden;
  flex-shrink: 0;
}

/* Checkmark - centered using flexbox positioning */
.complete-toggle::after {
  content: '';
  width: 4px;
  height: 7px;
  border: solid transparent;
  border-width: 0 1.5px 1.5px 0;
  transform: rotate(45deg) translateY(-0.5px);
  transition: border-color var(--transition-fast);
}

/* Show faint checkmark on hover when not complete */
.complete-toggle[data-state='idle']:hover::after {
  border-color: rgba(255, 255, 255, 0.4);
}

.complete-toggle:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.5);
}

.complete-toggle:active {
  transform: scale(0.94);
}

/* Completed state - filled blue with white checkmark */
.complete-toggle.is-complete {
  background: var(--notion-blue);
  border-color: var(--notion-blue);
}

.complete-toggle.is-complete::after {
  border-color: white;
}

.complete-hold-indicator {
  position: absolute;
  left: 3px;
  bottom: 3px;
  height: 3px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.7);
  transition: width 120ms linear;
  pointer-events: none;
}

.task-title {
  margin: 0;
  font-size: 14px;
  line-height: 1.5;
  color: var(--notion-text);
  font-weight: 400;
}

/* Notion-style inline text input */
.task-title-input {
  flex: 1;
  min-width: 0;
  background: transparent;
  border: none;
  border-radius: var(--radius-xs);
  color: var(--notion-text);
  font-size: 14px;
  padding: 2px 6px;
  transition: all var(--transition-fast);
}

.task-title-input:hover {
  background: var(--notion-bg-hover);
}

.task-title-input:focus {
  outline: none;
  background: var(--notion-bg-hover);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1);
}

.is-complete .task-title {
    text-decoration: line-through;
    color: var(--notion-text-muted);
}

.matrix-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 4px;
    flex-wrap: wrap;
    gap: 8px;
}

.matrix-select {
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 999px;
  padding: 1px 8px;
  background: rgba(255, 255, 255, 0.02);
  color: var(--notion-text);
  font-size: 10.5px;
  cursor: pointer;
  -webkit-appearance: none;
  appearance: none;
  text-align: center;
  text-align-last: center;
  font-weight: 600;
  min-height: 22px;
}

.pill.link {
    font-size: 11px;
    color: var(--notion-text-muted);
    text-decoration: none;
    padding: 2px 6px;
    border-radius: 3px;
    background: transparent;
    border: 1px solid transparent;
    opacity: 0.6;
    transition: background 100ms ease, color 100ms ease;
}

.pill.link:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
    opacity: 1;
}

/* Task Properties Row */
.task-properties-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 15px;
  padding-left: 2px;
  overflow: hidden;
}

.property-group-left {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  flex: 1 1 240px;
  min-width: 220px;
}

.property-group-flags {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  flex: 1 1 auto;
  flex-wrap: wrap;
  justify-content: space-between;
}

.property-group-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.matrix-inline {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
  min-width: 0px;
  justify-content: space-between;
}

/* Notion-style link button */
.open-link {
  font-size: 12px;
  padding: 4px 8px;
  border-radius: var(--radius-xs);
  border: none;
  background: transparent;
  display: inline-flex;
  justify-content: center;
  font-weight: 500;
  color: var(--notion-text-muted);
  transition: all var(--transition-fast);
}

.open-link:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

.date-stack {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.date-stack .task-notes-toggle {
  text-align: left;
}

/* Notion-style status pills - using Notion's actual colors */
.status-pill {
  min-width: 40px;
  min-height: 22px;
  max-width: 120px;
  text-align: center;
  padding: 3px 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 500;
  letter-spacing: 0.01em;
  color: white;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
}

/* Default/Gray */
.status-pill.status-inbox,
.status-pill.status-default {
  background: var(--notion-color-gray);
}

/* To-do - Orange */
.status-pill.status-todo {
  background: var(--notion-color-orange);
}

/* Active/In Progress - Blue */
.status-pill.status-active,
.status-pill.status-inprogress {
  background: var(--notion-color-blue);
}

/* Waiting - Yellow */
.status-pill.status-waiting {
  background: var(--notion-color-yellow);
}

/* Done/Complete - Green */
.status-pill.status-done,
.status-pill.status-complete {
  background: var(--notion-color-green);
}

/* Purple */
.status-pill.status-purple {
  background: var(--notion-color-purple);
}

/* Pink */
.status-pill.status-pink {
  background: var(--notion-color-pink);
}

/* Red */
.status-pill.status-red {
  background: var(--notion-color-red);
}

/* Brown */
.status-pill.status-brown {
  background: var(--notion-color-brown);
}

/* Direct color mapping for status pills (from database color field) */
.status-pill.status-gray {
  background: var(--notion-color-gray);
}

.status-pill.status-blue {
  background: var(--notion-color-blue);
}

.status-pill.status-green {
  background: var(--notion-color-green);
}

.status-pill.status-orange {
  background: var(--notion-color-orange);
}

.status-pill.status-yellow {
  background: var(--notion-color-yellow);
}

.status-pill.status-purple {
  background: var(--notion-color-purple);
}

.status-pill.status-pink {
  background: var(--notion-color-pink);
}

.status-pill.status-red {
  background: var(--notion-color-red);
}

/* ============================================
   Filter Pills Toolbar - Notion-style Chips
   ============================================ */
.filter-pills-toolbar {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  flex-wrap: wrap;
  position: relative;
  z-index: 100;
}

/* Sort/Rules chips - Notion style */
.filter-toolbar-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 6px;
  border: none;
  border-radius: 3px;
  background: transparent;
  color: rgba(255, 255, 255, 0.5);
  font-size: 12px;
  font-weight: 400;
  cursor: pointer;
  transition: background 80ms ease;
}

.filter-toolbar-chip:hover {
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.7);
}

.filter-toolbar-chip .chip-icon {
  font-size: 10px;
  opacity: 0.7;
}

/* Filter pill dropdown container */
.filter-pill-dropdown {
  position: relative;
  display: inline-block;
  isolation: isolate;
}

/* Filter pill trigger button - Notion minimal style */
.filter-pill-trigger {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 6px;
  border: none;
  border-radius: 3px;
  background: transparent;
  color: rgba(255, 255, 255, 0.5);
  font-size: 12px;
  font-weight: 400;
  cursor: pointer;
  transition: background 80ms ease;
}

.filter-pill-trigger:hover {
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.7);
}

/* When filter has a value - subtle blue tint like Notion */
.filter-pill-trigger.has-value {
  background: rgba(35, 131, 226, 0.15);
  color: rgb(35, 131, 226);
}

.filter-pill-trigger.has-value:hover {
  background: rgba(35, 131, 226, 0.2);
}

.filter-pill-dropdown.is-open .filter-pill-trigger {
  background: rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.8);
}

.filter-pill-label {
  white-space: nowrap;
  display: inline-flex;
  align-items: center;
}

.filter-pill-separator {
  opacity: 0.5;
  margin: 0 2px;
}

.filter-pill-value {
  font-weight: 500;
}

.filter-pill-chevron {
  font-size: 8px;
  opacity: 0.5;
  margin-left: 1px;
  transition: transform 100ms ease;
}

.filter-pill-dropdown.is-open .filter-pill-chevron {
  transform: rotate(180deg);
}

/* Filter dropdown menu - cleaner Notion style */
.filter-pill-menu {
  position: fixed;
  z-index: 2147483647;
  min-width: 180px;
  max-width: 280px;
  max-height: 320px;
  overflow-y: auto;
  background: rgb(37, 37, 37);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 6px;
  padding: 4px;
  box-shadow: 
    0 4px 12px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(0, 0, 0, 0.1);
  animation: filterMenuIn 100ms ease-out;
}

@keyframes filterMenuIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.filter-menu-section {
  display: flex;
  flex-direction: column;
  gap: 1px;
  background: transparent;
}

.filter-menu-option {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 6px 10px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: rgba(255, 255, 255, 0.8);
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: background 80ms ease;
  white-space: nowrap;
}

.filter-menu-option:hover {
  background: rgba(255, 255, 255, 0.06);
}

.filter-menu-option:active {
  background: rgba(255, 255, 255, 0.08);
}

.filter-menu-option.is-active {
  background: rgba(35, 131, 226, 0.15);
  color: rgb(35, 131, 226);
}

.filter-menu-option.is-active:hover {
  background: rgba(35, 131, 226, 0.2);
}

.filter-menu-option .option-icon {
  font-size: 13px;
  width: 18px;
  text-align: center;
  flex-shrink: 0;
  opacity: 0.7;
}

.filter-menu-option .option-emoji {
  font-size: 13px;
}

.filter-menu-option .option-color {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.filter-menu-option .option-chevron {
  margin-left: auto;
  font-size: 11px;
  opacity: 0.4;
}

/* Filter menu divider */
.filter-menu-divider {
  height: 1px;
  background: rgba(255, 255, 255, 0.06);
  margin: 4px 0;
}

/* Filter menu section label */
.filter-menu-label {
  font-size: 11px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.4);
  text-transform: uppercase;
  letter-spacing: 0.3px;
  padding: 6px 10px 4px;
}

/* Add filter button - Notion style */
.filter-add-btn {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  padding: 3px 6px;
  border: none;
  border-radius: 3px;
  background: transparent;
  color: rgba(255, 255, 255, 0.4);
  font-size: 12px;
  cursor: pointer;
  transition: background 80ms ease;
}

.filter-add-btn:hover {
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.6);
}

/* Notion-style condition row (Is / Is not) */
.filter-condition-row {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 4px 0;
}

.filter-condition-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 6px 10px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: rgba(255, 255, 255, 0.7);
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: background 80ms ease;
}

.filter-condition-btn:hover {
  background: rgba(255, 255, 255, 0.06);
}

.filter-condition-btn .condition-checkbox {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 3px;
  font-size: 11px;
  color: rgba(255, 255, 255, 0.9);
  background: transparent;
}

.filter-condition-btn.is-active .condition-checkbox {
  background: rgb(35, 131, 226);
  border-color: rgb(35, 131, 226);
}

/* Notion-style checkbox options */
.filter-menu-checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 6px 10px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: rgba(255, 255, 255, 0.8);
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: background 80ms ease;
}

.filter-menu-checkbox:hover {
  background: rgba(255, 255, 255, 0.06);
}

.filter-menu-checkbox .checkbox-indicator {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 3px;
  background: transparent;
  flex-shrink: 0;
}

.filter-menu-checkbox .checkbox-indicator.is-checked {
  background: rgb(35, 131, 226);
  border-color: rgb(35, 131, 226);
}

.filter-menu-checkbox .checkbox-indicator svg {
  color: white;
}

.filter-menu-checkbox .checkbox-icon {
  font-size: 14px;
  flex-shrink: 0;
}

.filter-menu-checkbox .checkbox-color {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  flex-shrink: 0;
}

.filter-menu-checkbox .checkbox-label {
  flex: 1;
}

/* Clear selection button */
.filter-menu-clear {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 8px 10px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: rgba(255, 255, 255, 0.5);
  font-size: 12px;
  cursor: pointer;
  transition: background 80ms ease, color 80ms ease;
}

.filter-menu-clear:hover {
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.8);
}

/* ============================================
   Notion-style Filter Pill
   ============================================ */
.notion-filter-pill {
  position: relative;
}

.notion-filter-pill-trigger {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 6px;
  border: none;
  border-radius: 3px;
  background: transparent;
  color: rgba(255, 255, 255, 0.5);
  font-size: 12px;
  font-weight: 400;
  cursor: pointer;
  transition: background 80ms ease;
}

.notion-filter-pill-trigger:hover {
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.7);
}

.notion-filter-pill.is-open .notion-filter-pill-trigger {
  background: rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.8);
}

.notion-filter-pill.has-value .notion-filter-pill-trigger {
  background: rgba(35, 131, 226, 0.15);
  color: rgb(35, 131, 226);
}

.notion-filter-pill.has-value .notion-filter-pill-trigger:hover {
  background: rgba(35, 131, 226, 0.2);
}

.notion-filter-pill .filter-pill-icon {
  display: flex;
  align-items: center;
}

.notion-filter-pill .filter-pill-condition {
  color: rgba(255, 255, 255, 0.4);
  margin-left: 2px;
}

.notion-filter-pill.has-value .filter-pill-condition {
  color: rgba(35, 131, 226, 0.7);
}

.notion-filter-pill .filter-pill-separator {
  opacity: 0.5;
  margin: 0 2px;
}

.notion-filter-pill .filter-pill-value {
  font-weight: 500;
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Notion Filter Menu */
.notion-filter-menu {
  position: fixed;
  z-index: 2147483647;
  min-width: 260px;
  max-width: 320px;
  background: rgb(37, 37, 37);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.notion-filter-menu.simple {
  min-width: 200px;
  max-width: 260px;
}

/* Filter menu header */
.notion-filter-menu-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.notion-filter-menu-header .filter-menu-field-name {
  color: rgba(255, 255, 255, 0.6);
  font-size: 12px;
  font-weight: 500;
}

.notion-filter-menu-header .filter-menu-more {
  margin-left: auto;
  padding: 4px;
  border: none;
  border-radius: 3px;
  background: transparent;
  color: rgba(255, 255, 255, 0.4);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.notion-filter-menu-header .filter-menu-more:hover {
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.7);
}

/* Condition dropdown */
.condition-dropdown {
  position: relative;
}

.condition-dropdown-trigger {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 6px;
  border: none;
  border-radius: 3px;
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.8);
  font-size: 12px;
  cursor: pointer;
  transition: background 80ms ease;
}

.condition-dropdown-trigger:hover {
  background: rgba(255, 255, 255, 0.1);
}

.condition-dropdown-menu {
  position: fixed;
  z-index: 2147483648;
  min-width: 140px;
  background: rgb(37, 37, 37);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 6px;
  padding: 4px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.condition-dropdown-option {
  display: block;
  width: 100%;
  padding: 6px 10px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: rgba(255, 255, 255, 0.8);
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: background 80ms ease;
}

.condition-dropdown-option:hover {
  background: rgba(255, 255, 255, 0.06);
}

.condition-dropdown-option.is-active {
  background: rgba(35, 131, 226, 0.15);
  color: rgb(35, 131, 226);
}

/* Filter search input */
.notion-filter-search {
  padding: 8px 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.notion-filter-search-input {
  width: 100%;
  padding: 6px 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  background: rgba(255, 255, 255, 0.04);
  color: rgba(255, 255, 255, 0.9);
  font-size: 13px;
  outline: none;
  transition: border-color 100ms ease;
}

.notion-filter-search-input::placeholder {
  color: rgba(255, 255, 255, 0.3);
}

.notion-filter-search-input:focus {
  border-color: rgba(35, 131, 226, 0.5);
}

/* Filter options list */
.notion-filter-options {
  max-height: 240px;
  overflow-y: auto;
  padding: 4px;
}

.notion-filter-options-hint {
  padding: 6px 10px;
  font-size: 11px;
  color: rgba(255, 255, 255, 0.4);
}

.notion-filter-option {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 6px 10px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: rgba(255, 255, 255, 0.8);
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: background 80ms ease;
}

.notion-filter-option:hover {
  background: rgba(255, 255, 255, 0.06);
}

.notion-filter-option.is-selected {
  background: rgba(35, 131, 226, 0.1);
}

.notion-filter-option .option-checkbox {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 3px;
  background: transparent;
  flex-shrink: 0;
}

.notion-filter-option .option-checkbox.is-checked {
  background: rgb(35, 131, 226);
  border-color: rgb(35, 131, 226);
}

.notion-filter-option .option-checkbox svg {
  color: white;
}

.notion-filter-option .option-icon {
  font-size: 14px;
}

.notion-filter-option .option-color {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  flex-shrink: 0;
}

.notion-filter-option .option-label {
  flex: 1;
}

/* Filter footer */
.notion-filter-footer {
  padding: 6px;
  border-top: 1px solid rgba(255, 255, 255, 0.06);
}

.notion-filter-clear {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 6px 10px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: rgba(255, 255, 255, 0.5);
  font-size: 12px;
  cursor: pointer;
  transition: background 80ms ease, color 80ms ease;
}

.notion-filter-clear:hover {
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.8);
}

/* ============================================
   Status Select - Custom Notion-style Dropdown
   ============================================ */
.status-select-container {
  position: relative;
  display: inline-flex;
}

.status-select-trigger {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  cursor: pointer;
  border: none;
  transition: all var(--transition-fast);
  /* Inherits pill styling from .status-pill */
}

.status-select-trigger:hover {
  filter: brightness(1.15);
}

.status-select-trigger.is-open {
  filter: brightness(1.2);
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.15);
}

.status-select-trigger:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Status circle indicator in trigger */
.status-select-circle {
  font-size: 10px;
  line-height: 1;
  opacity: 0.9;
}

/* Circle types - empty, half, full */
.status-circle-empty {
  opacity: 0.7;
}

.status-circle-half {
  opacity: 0.85;
}

.status-circle-full {
  opacity: 1;
}

.status-select-label {
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
}

/* Status Dropdown */
.status-select-dropdown {
  position: fixed;
  z-index: 2147483647;
  min-width: 180px;
  max-width: 240px;
  max-height: 320px;
  overflow-y: auto;
  background: var(--notion-bg-elevated);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 8px;
  padding: 6px;
  box-shadow: 
    rgba(15, 15, 15, 0.05) 0px 0px 0px 1px,
    rgba(15, 15, 15, 0.1) 0px 3px 6px,
    rgba(15, 15, 15, 0.2) 0px 9px 24px;
  animation: statusDropdownIn 120ms ease-out;
}

@keyframes statusDropdownIn {
  from {
    opacity: 0;
    transform: translateY(-4px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.status-select-option {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 14px;
  margin-bottom: 4px;
  border: none;
  border-radius: 6px;
  background: transparent;
  color: var(--notion-text);
  font-size: 14px;
  cursor: pointer;
  transition: all var(--transition-fast);
  text-align: left;
}

.status-select-option:last-child {
  margin-bottom: 0;
}

.status-select-option:hover {
  background: rgba(255, 255, 255, 0.1);
}

.status-select-option.is-selected {
  background: rgba(255, 255, 255, 0.12);
}

/* Circle indicator in dropdown options */
.status-option-circle {
  font-size: 12px;
  width: 18px;
  text-align: center;
  flex-shrink: 0;
  opacity: 0.8;
}

.status-option-circle.status-circle-empty {
  opacity: 0.6;
}

.status-option-circle.status-circle-half {
  opacity: 0.8;
}

.status-option-circle.status-circle-full {
  opacity: 1;
}

.status-option-label {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-weight: 500;
}

/* Checkmark shown at the start for selected items */
.status-option-check {
  font-size: 14px;
  color: hsl(199, 89%, 60%);
  font-weight: 600;
  width: 18px;
  text-align: center;
  flex-shrink: 0;
}

/* Color dot indicator in dropdown options */
.status-option-color-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

.status-option-color-dot.status-gray {
  background: var(--notion-color-gray);
}

.status-option-color-dot.status-brown {
  background: var(--notion-color-brown);
}

.status-option-color-dot.status-orange {
  background: var(--notion-color-orange);
}

.status-option-color-dot.status-yellow {
  background: var(--notion-color-yellow);
}

.status-option-color-dot.status-green {
  background: var(--notion-color-green);
}

.status-option-color-dot.status-blue {
  background: var(--notion-color-blue);
}

.status-option-color-dot.status-purple {
  background: var(--notion-color-purple);
}

.status-option-color-dot.status-pink {
  background: var(--notion-color-pink);
}

.status-option-color-dot.status-red {
  background: var(--notion-color-red);
}

.property-item.status-item {
  flex: 0 0 auto;
}

.property-item.status-item select,
.property-item.status-item input {
  width: 45px;
  text-align: center;
  text-align-last: center;
}

.matrix-select {
  width: 100%;
}

/* Notion-style matrix/priority chips - rounded, clear typography */
.matrix-chip {
  font-size: 12px;
  font-weight: 500;
  padding: 3px 10px;
  border-radius: 999px;
  border: none;
  margin-right: 4px;
  color: white;
  letter-spacing: 0.01em;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.matrix-select,
.matrix-chip {
  transition: all var(--transition-fast);
}

.matrix-select.matrix-green,
.matrix-chip.matrix-green {
  background: rgba(77, 171, 154, 0.85);
  color: white;
}

.matrix-select.matrix-blue,
.matrix-chip.matrix-blue {
  background: rgba(82, 156, 202, 0.85);
  color: white;
}

.matrix-select.matrix-yellow,
.matrix-chip.matrix-yellow {
  background: rgba(203, 145, 47, 0.85);
  color: white;
}

.matrix-select.matrix-orange,
.matrix-chip.matrix-orange {
  background: rgba(217, 115, 13, 0.85);
  color: white;
}

.matrix-select.matrix-gray,
.matrix-chip.matrix-gray {
  background: rgba(155, 154, 151, 0.7);
  color: white;
}

/* Notion-style property controls - pill shaped, clear typography */
.task-properties-row select,
.task-properties-row .date-input,
.deadline-chip {
    appearance: none;
    background: rgba(255, 255, 255, 0.06);
    border: none;
    color: white;
    font-family: var(--notion-font);
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.01em;
    padding: 3px 10px;
    border-radius: 999px;
    cursor: pointer;
    height: 24px;
    display: flex;
    align-items: center;
    transition: all var(--transition-fast);
}

.task-properties-row select:hover,
.task-properties-row .date-input:hover,
.deadline-chip:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* Notion-style pill select - rounded, clear typography */
.pill-select {
    appearance: none;
    border-radius: 999px;
    border: none;
    background: rgba(255, 255, 255, 0.06);
    min-height: 24px;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.01em;
    padding: 3px 10px;
    color: white;
    transition: all var(--transition-fast);
}

.pill-select:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* Notion-style pill input */
.pill-input {
    border-radius: var(--radius-sm);
    padding: 4px 10px;
    border: none;
    background: transparent;
    min-height: 28px;
    color: var(--notion-text);
    transition: all var(--transition-fast);
}

.pill-input:hover {
    background: var(--notion-bg-hover);
}

.pill-input:focus {
    background: var(--notion-bg-hover);
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1);
    outline: none;
}

.date-field {
  position: relative;
  display: inline-flex;
  max-width: fit-content;
}

.date-field.is-open {
  z-index: 9999;
}

/* Notion-style date field trigger button - text-like appearance */
.date-field-trigger {
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  gap: 4px;
  border-radius: 4px;
  border: none;
  background: transparent;
  padding: 3px 8px;
  height: 24px;
  font-size: 12px;
  font-weight: 400;
  font-variant-numeric: tabular-nums;
  color: var(--notion-text-muted);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.date-field-trigger:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--notion-text);
}

/* When date has a value - subtle text-like appearance */
.date-field-trigger.has-value {
  color: var(--notion-text);
}

.date-field-trigger.has-value:hover {
  background: rgba(255, 255, 255, 0.08);
}

/* When date has a reminder - subtle color indicator */
.date-field-trigger.has-reminder {
  color: hsl(214, 70%, 65%);
}

/* Reminder indicator removed - now uses tooltip on hover */

.date-field-trigger:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Date field icon and text */
.date-field-icon {
  display: none;
}

.date-field-text {
  white-space: nowrap;
  font-size: 14px;
  font-weight: 500;
}

/* Legacy date field input wrapper - kept for backwards compatibility */
.date-field-input-wrapper {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  border: none;
  background: rgba(255, 255, 255, 0.06);
  padding: 3px 8px 3px 10px;
  min-height: 24px;
  gap: 5px;
  transition: background var(--transition-fast);
}

.date-field-input-wrapper:hover {
  background: rgba(255, 255, 255, 0.1);
}

.date-field-input-wrapper.pill-input {
  padding: 3px 8px 3px 10px;
  min-height: 24px;
}

/* When date has a reminder, show with more emphasis */
.date-field-input-wrapper.has-reminder {
  background: rgba(35, 131, 226, 0.2);
}

.date-field-input-wrapper.has-reminder:hover {
  background: rgba(35, 131, 226, 0.3);
}

.date-field-input {
  border: none;
  background: transparent;
  color: var(--notion-text);
  font-size: 12px;
  font-weight: 500;
  letter-spacing: 0.01em;
  font-variant-numeric: tabular-nums;
  padding: 0;
  min-width: 60px;
  max-width: 120px;
  flex: 1 1 auto;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.date-field-input::placeholder {
  color: var(--notion-text-muted);
  font-weight: 400;
}

.date-field-input:focus {
  outline: none;
}

.date-field-calendar {
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  padding: 0 2px;
  cursor: pointer;
  font-size: 13px;
  transition: color var(--transition-fast);
}

.date-field-input-wrapper:hover .date-field-calendar {
  color: var(--notion-text);
}

.date-field-input:disabled,
.date-field-calendar:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.date-field-popover {
  position: fixed;
  z-index: 2147483647;
  background: var(--notion-bg-elevated);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 12px;
  padding: 8px;
  box-shadow: 
    0 0 0 1px #000,
    0 8px 16px rgba(0, 0, 0, 0.7),
    0 16px 32px rgba(0, 0, 0, 0.5);
  min-width: 240px;
  max-height: 85vh;
  overflow: visible;
}

/* Text input at top of date popover */
/* Notion-style date inputs row */
.date-field-inputs-row {
  display: flex;
  gap: 8px;
  padding: 8px 10px 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

/* Stacked layout when end date + time are enabled */
.date-field-inputs-row.stacked {
  flex-direction: column;
  gap: 6px;
}

.date-input-group {
  display: flex;
  gap: 4px;
  flex: 1;
}

.date-field-date-input,
.date-field-time-input {
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.04);
  color: var(--notion-text);
  font-size: 13px;
  padding: 6px 10px;
  outline: none;
  transition: all var(--transition-fast);
}

.date-field-date-input {
  flex: 1;
  min-width: 0;
}

.date-field-time-input {
  width: 70px;
  flex-shrink: 0;
}

.date-field-date-input:focus,
.date-field-time-input:focus {
  background: rgba(255, 255, 255, 0.06);
  border-color: var(--notion-blue);
}

.date-field-date-input::placeholder,
.date-field-time-input::placeholder {
  color: var(--notion-text-muted);
  font-size: 11px;
}

/* Legacy text input - kept for backwards compatibility */
.date-field-text-input-wrapper {
  padding: 8px 10px 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.date-field-text-input {
  width: 100%;
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.04);
  color: var(--notion-text);
  font-size: 14px;
  padding: 8px 10px;
  outline: none;
  transition: all var(--transition-fast);
}

.date-field-text-input:focus {
  background: rgba(255, 255, 255, 0.06);
  border-color: var(--notion-blue);
}

.date-field-text-input::placeholder {
  color: var(--notion-text-muted);
}

.date-field-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 12px;
  margin-bottom: 10px;
}

.date-field-header p {
  margin: 0;
  font-size: 14px;
  font-weight: 500;
  color: var(--notion-text);
}

.date-field-today-btn {
  background: transparent;
  border: 1px solid var(--notion-border);
  border-radius: 4px;
  padding: 2px 8px;
  font-size: 12px;
  color: var(--notion-text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.date-field-today-btn:hover {
  background: var(--notion-hover);
  color: var(--notion-text);
  border-color: var(--notion-text-secondary);
}

.date-field-nav {
  display: flex;
  align-items: center;
  gap: 4px;
}

.date-field-nav button {
  border: none;
  background: transparent;
  border-radius: 4px;
  width: 24px;
  height: 24px;
  color: var(--notion-text-muted);
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 150ms ease;
}

.date-field-nav button:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--notion-text);
}

.date-field-weekdays,
.date-field-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
}

.date-field-weekdays {
  margin-bottom: 4px;
}

.date-field-weekdays span {
  font-size: 11px;
  font-weight: 500;
  text-align: center;
  color: var(--notion-text-muted);
  padding: 4px 0;
}

.date-field-cell {
  border: none;
  border-radius: 50%;
  aspect-ratio: 1;
  width: 28px;
  height: 28px;
  margin: 0 auto;
  background: transparent;
  color: var(--notion-text);
  font-size: 13px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 150ms ease;
}

.date-field-cell:hover:not(.is-selected) {
  background: rgba(255, 255, 255, 0.08);
}

.date-field-cell.is-muted {
  color: rgba(255, 255, 255, 0.3);
}

.date-field-cell.is-selected {
  background: var(--notion-blue);
  color: white;
  font-weight: 500;
}

.date-field-cell.is-range {
  background: rgba(59, 130, 246, 0.15);
  border-radius: 4px;
}

.date-field-cell.is-today:not(.is-selected) {
  background: rgba(255, 255, 255, 0.08);
  font-weight: 600;
}

/* DateField Options Section - Notion style */
.date-field-options {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid rgba(255, 255, 255, 0.06);
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.date-field-option-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 4px;
  border-radius: 4px;
  min-height: 32px;
}

.date-field-option-row:hover {
  background: rgba(255, 255, 255, 0.04);
}

.option-label {
  font-size: 13px;
  color: var(--notion-text);
  font-weight: 400;
}

/* Notion-style toggle switch */
.option-toggle {
  position: relative;
  width: 32px;
  height: 18px;
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  flex-shrink: 0;
}

.toggle-track {
  display: block;
  width: 100%;
  height: 100%;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.15);
  transition: background 200ms ease;
}

.option-toggle.is-on .toggle-track {
  background: var(--notion-blue);
}

.toggle-thumb {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  transition: transform 200ms ease;
}

.option-toggle.is-on .toggle-thumb {
  transform: translateX(14px);
}

/* Option value button (for Repeat, Remind) */
.option-value {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 13px;
  cursor: pointer;
  transition: all 150ms ease;
}

.option-value:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--notion-text);
}

.option-chevron {
  font-size: 14px;
  opacity: 0.5;
  margin-left: 2px;
}

/* Time input row */
.time-input-row {
  padding-left: 4px;
}

.time-input {
  padding: 6px 10px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.06);
  color: var(--notion-text);
  font-size: 13px;
  width: 100%;
  max-width: 120px;
}

.time-input:focus {
  outline: none;
  border-color: var(--notion-blue);
  background: rgba(255, 255, 255, 0.08);
}

/* Option row wrapper - needed for submenu positioning */
.date-field-option-row-wrapper {
  position: relative;
}

/* Clickable option row (for Repeat/Remind) */
.date-field-option-row.clickable {
  width: 100%;
  border: none;
  background: transparent;
  cursor: pointer;
  text-align: left;
}

.date-field-option-row.clickable:hover,
.date-field-option-row.clickable.is-active {
  background: rgba(255, 255, 255, 0.06);
}

.option-value-text {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  color: var(--notion-text-muted);
  font-size: 13px;
}

/* Submenu - positioned to the right using fixed positioning to escape container */
.date-field-submenu {
  position: fixed;
  min-width: 220px;
  background: rgba(20, 20, 20, 0.98);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 8px;
  padding: 4px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  z-index: 100000;
}

.submenu-option {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 8px 12px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: var(--notion-text);
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: background 150ms ease;
}

.submenu-option:hover {
  background: rgba(255, 255, 255, 0.06);
}

.submenu-option.is-selected {
  background: rgba(255, 255, 255, 0.04);
}

.submenu-label {
  flex: 1;
}

.submenu-check {
  color: var(--notion-blue);
  font-size: 14px;
  margin-left: 8px;
}

.date-field-time {
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.date-field-time-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.date-field-time-row label {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: var(--notion-text-muted);
}

.date-field-time-row input[type="time"] {
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(255, 255, 255, 0.08);
  border-radius: 6px;
  color: var(--notion-text);
  font-size: 11px;
  padding: 2px 6px;
}

.date-field-footer {
  display: flex;
  justify-content: flex-end;
  margin-top: 8px;
}

.date-field-footer button {
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 11px;
  cursor: pointer;
}

/* DateField Actions Bar */
.date-field-actions {
  display: flex;
  gap: 6px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid var(--notion-border);
}

.date-field-action-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  flex: 1;
  padding: 6px 8px;
  border-radius: 4px;
  border: 1px solid var(--notion-border);
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 11px;
  cursor: pointer;
  transition: all 150ms ease;
}

.date-field-action-btn:hover {
  background: var(--notion-bg-hover);
  border-color: var(--notion-text-muted);
}

.date-field-action-btn.is-active {
  background: rgba(59, 130, 246, 0.15);
  border-color: var(--notion-blue);
  color: var(--notion-blue);
}

.date-field-action-btn .action-icon {
  font-size: 12px;
}

.date-field-action-btn .action-label {
  flex: 1;
  text-align: left;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.date-field-action-btn .action-chevron {
  font-size: 10px;
  opacity: 0.6;
}

.date-field-clear-btn {
  display: block;
  width: 100%;
  padding: 8px 4px;
  margin-top: 4px;
  border-radius: 4px;
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 13px;
  font-weight: 400;
  cursor: pointer;
  text-align: left;
  transition: all 150ms ease;
}

.date-field-clear-btn:hover {
  background: rgba(255, 255, 255, 0.04);
  color: var(--notion-text);
}

/* DateField Secondary Panels */
.date-field-panel {
  margin-top: 10px;
  padding: 12px;
  background: var(--notion-bg-secondary);
  border-radius: 6px;
  border: 1px solid var(--notion-border);
}

.panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
  font-size: 12px;
  font-weight: 600;
  color: var(--notion-text);
}

.panel-close {
  width: 20px;
  height: 20px;
  border-radius: 4px;
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.panel-close:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

/* Repeat Panel */
.repeat-presets {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 6px;
  margin-bottom: 12px;
}

.repeat-preset {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 10px;
  border-radius: 6px;
  border: 1px solid var(--notion-border);
  background: transparent;
  color: var(--notion-text);
  font-size: 11px;
  cursor: pointer;
  transition: all 150ms ease;
}

.repeat-preset:hover {
  background: var(--notion-bg-hover);
  border-color: var(--notion-blue);
}

.repeat-preset.is-selected {
  background: rgba(59, 130, 246, 0.15);
  border-color: var(--notion-blue);
  color: var(--notion-blue);
}

.repeat-preset .preset-icon {
  font-size: 14px;
}

.repeat-interval {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px;
  background: var(--notion-bg);
  border-radius: 6px;
  margin-bottom: 12px;
  font-size: 12px;
  color: var(--notion-text);
}

.interval-input {
  width: 60px;
  padding: 6px 8px;
  border-radius: 4px;
  border: 1px solid var(--notion-border);
  background: var(--notion-bg-secondary);
  color: var(--notion-text);
  font-size: 12px;
  text-align: center;
}

.interval-input:focus {
  outline: none;
  border-color: var(--notion-blue);
}

.repeat-custom {
  padding: 10px;
  background: var(--notion-bg);
  border-radius: 6px;
  margin-bottom: 12px;
}

.custom-label {
  font-size: 11px;
  color: var(--notion-text-muted);
  margin-bottom: 8px;
}

.weekday-picker {
  display: flex;
  gap: 4px;
}

.weekday-btn {
  flex: 1;
  padding: 6px 2px;
  border-radius: 4px;
  border: 1px solid var(--notion-border);
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 10px;
  font-weight: 500;
  cursor: pointer;
  transition: all 150ms ease;
}

.weekday-btn:hover {
  border-color: var(--notion-blue);
  color: var(--notion-blue);
}

.weekday-btn.is-selected {
  background: var(--notion-blue);
  border-color: var(--notion-blue);
  color: white;
}

.repeat-clear {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  width: 100%;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #f87171;
  background: transparent;
  color: #f87171;
  font-size: 11px;
  cursor: pointer;
  transition: all 150ms ease;
}

.repeat-clear:hover {
  background: rgba(248, 113, 113, 0.1);
}

/* Reminder Panel */
.reminder-options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 6px;
  margin-bottom: 12px;
}

.reminder-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid var(--notion-border);
  background: transparent;
  color: var(--notion-text);
  font-size: 11px;
  cursor: pointer;
  transition: all 150ms ease;
}

.reminder-option:hover {
  background: var(--notion-bg-hover);
  border-color: var(--notion-blue);
}

.reminder-option .reminder-icon {
  font-size: 16px;
}

.reminder-clear {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  width: 100%;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #f87171;
  background: transparent;
  color: #f87171;
  font-size: 11px;
  cursor: pointer;
  transition: all 150ms ease;
}

.reminder-clear:hover {
  background: rgba(248, 113, 113, 0.1);
}

/* Header indicators for recurrence and reminder */
.recurrence-indicator,
.reminder-indicator {
  font-size: 14px;
  opacity: 0.7;
  margin-right: 4px;
  cursor: help;
}

.reminder-indicator {
  animation: pulse-bell 2s ease-in-out infinite;
}

@keyframes pulse-bell {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

select option {
    background-color: var(--notion-bg-secondary);
    color: var(--notion-text);
}

/* Flags (Checkboxes) */
/* Urgent/Important flag toggles - clean minimal style */
.flag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.01em;
    color: var(--notion-text-muted);
    cursor: pointer;
    padding: 3px 4px;
    border-radius: 4px;
    transition: color var(--transition-fast);
}

.flag:hover {
    color: var(--notion-text);
}

.flag input[type="checkbox"] {
    appearance: none;
    width: 14px;
    height: 14px;
    border: 1.5px solid var(--notion-text-muted);
    border-radius: 3px;
    background: transparent;
    cursor: pointer;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
}

.flag input[type="checkbox"]:checked {
    background: var(--notion-blue);
    border-color: var(--notion-blue);
}

.flag.urgent input[type="checkbox"]:checked {
  background: #f59e0b;
  border-color: #f59e0b;
}

.flag.urgent input[type="checkbox"]:checked::after {
  color: #111;
}

.flag.urgent.is-active {
  color: var(--notion-text);
}

.flag.important input[type="checkbox"]:checked {
  background: #3b82f6;
  border-color: #3b82f6;
}

.flag.important.is-active {
  color: var(--notion-text);
}

.flag input[type="checkbox"]:checked::after {
    content: '';
    position: absolute;
    color: white;
    font-size: 10px;
    font-weight: 700;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    line-height: 1;
}

.flag.is-active {
    color: var(--notion-text);
}

.task-notes-section {
    margin-top: 6px;
}

/* Action links - clearer typography */
.task-notes-toggle {
    border: none;
    background: transparent;
    color: var(--notion-text-muted);
    font-size: 12px;
    font-weight: 400;
    letter-spacing: 0.005em;
    cursor: pointer;
    padding: 2px 0;
    transition: color var(--transition-fast);
}

.task-notes-toggle:hover {
    color: var(--notion-text);
}

/* ============================================
   Notion-style Session Controls
   ============================================ */

/* Session button - Notion style */
.notion-session-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    font-size: 12px;
    font-weight: 500;
    color: var(--notion-text-muted);
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 120ms ease;
}

.notion-session-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.notion-session-btn .session-play-icon {
    font-size: 10px;
    color: rgba(34, 197, 94, 0.8);
}

.notion-session-btn.is-active {
    color: var(--notion-text);
    background: rgba(167, 139, 250, 0.1);
}

.notion-session-btn.is-active .session-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #a78bfa;
    animation: pulse-dot 1.5s ease-in-out infinite;
}

@keyframes pulse-dot {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(0.85); }
}

/* Time remaining - Notion code style */
.time-remaining-code {
    font-family: 'SFMono-Regular', 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;
    font-size: 11px;
    padding: 2px 6px;
    background: rgba(135, 131, 120, 0.15);
    border-radius: 3px;
    color: #eb5757;
    color: var(--notion-text-secondary);
    font-variant-numeric: tabular-nums;
}

.time-remaining-code.is-low {
    background: rgba(245, 158, 11, 0.15);
    color: #f59e0b;
}

.time-remaining-code.is-overtime {
    background: rgba(239, 68, 68, 0.15);
    color: #ef4444;
}

/* Estimate button - Notion style */
.notion-estimate-btn {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    font-size: 12px;
    color: var(--notion-text-muted);
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 120ms ease;
}

.notion-estimate-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

/* Tracking button - Notion style */
.notion-tracking-btn {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    padding: 4px 10px;
    font-size: 12px;
    color: var(--notion-text-muted);
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 120ms ease;
}

.notion-tracking-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.notion-tracking-btn .tracking-icon {
    font-size: 12px;
}

/* ============================================
   Notion-style Session Panel
   ============================================ */

/* Panel header - title + actions */
.panel-header {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    position: relative;
    padding-bottom: 6px;
    margin-bottom: 4px;
}

.panel-title {
    font-size: 10px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--notion-text-muted);
    opacity: 0.4;
}

.panel-header-actions {
    position: absolute;
    right: 0;
    top: 0;
    display: flex;
    align-items: center;
    gap: 4px;
}

.panel-reset-btn {
    padding: 3px 8px;
    font-size: 11px;
    font-weight: 500;
    color: var(--notion-text-muted);
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 120ms ease;
}

.panel-reset-btn:hover {
    color: var(--notion-text);
    background: var(--notion-bg-hover);
}

.notion-panel-close-sm {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 300;
    color: var(--notion-text-muted);
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 120ms ease;
    line-height: 1;
}

.notion-panel-close-sm:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.notion-session-panel {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 10px 0;
    flex-wrap: wrap;
}

/* Quick presets - left side */
.session-presets {
    display: flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
}

.session-preset-btn {
    padding: 5px 10px;
    font-size: 12px;
    font-weight: 500;
    color: var(--notion-text-muted);
    background: transparent;
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    cursor: pointer;
    transition: all 120ms ease;
    font-variant-numeric: tabular-nums;
}

.session-preset-btn:hover {
    color: var(--notion-text);
    background: var(--notion-bg-hover);
    border-color: rgba(255, 255, 255, 0.15);
}

.session-preset-btn.is-selected {
    color: var(--notion-blue);
    background: rgba(35, 131, 226, 0.1);
    border-color: rgba(35, 131, 226, 0.3);
}

/* Preset chip wrapper for remove button */
.preset-chip {
    position: relative;
    display: inline-flex;
}

.preset-chip:hover .preset-remove-btn {
    opacity: 1;
}

.preset-remove-btn {
    position: absolute;
    top: -6px;
    right: -6px;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 500;
    color: var(--notion-text-muted);
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: 50%;
    cursor: pointer;
    opacity: 0;
    transition: all 120ms ease;
    line-height: 1;
}

.preset-remove-btn:hover {
    color: #ef4444;
    background: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
}

/* Add preset input */
.preset-add {
    display: inline-flex;
}

.preset-add-input {
    width: 52px;
    padding: 5px 8px;
    font-size: 12px;
    font-weight: 500;
    color: var(--notion-text-muted);
    background: transparent;
    border: 1px dashed var(--notion-border);
    border-radius: 4px;
    text-align: center;
    transition: all 120ms ease;
}

.preset-add-input::placeholder {
    color: var(--notion-text-muted);
    opacity: 0.6;
}

.preset-add-input:focus {
    outline: none;
    color: var(--notion-text);
    border-style: solid;
    border-color: var(--notion-blue);
    background: var(--notion-bg-secondary);
    width: 64px;
}

/* Custom input + start - right side */
.session-custom {
    display: flex;
    align-items: center;
    gap: 8px;
}

.session-input-group {
    display: flex;
    align-items: center;
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    overflow: hidden;
}

.notion-input.session-duration-input {
    width: 52px;
    padding: 6px 8px;
    font-size: 14px;
    font-weight: 500;
    text-align: center;
    border: none;
    background: transparent;
    color: var(--notion-text);
    font-variant-numeric: tabular-nums;
}

.notion-input.session-duration-input:focus {
    outline: none;
}

.notion-input.session-duration-input::placeholder {
    color: var(--notion-text-muted);
}

/* Hide number input spinners */
.notion-input.session-duration-input::-webkit-outer-spin-button,
.notion-input.session-duration-input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.notion-input.session-duration-input[type=number] {
    -moz-appearance: textfield;
    appearance: textfield;
}

.session-unit-toggle {
    display: flex;
    border-left: 1px solid var(--notion-border);
}

.session-unit-toggle .unit-btn {
    padding: 6px 10px;
    font-size: 12px;
    font-weight: 500;
    color: var(--notion-text-muted);
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 120ms ease;
}

.session-unit-toggle .unit-btn:first-child {
    border-right: 1px solid var(--notion-border);
}

.session-unit-toggle .unit-btn:hover {
    color: var(--notion-text);
    background: var(--notion-bg-hover);
}

.session-unit-toggle .unit-btn.is-active {
    color: var(--notion-text);
    background: var(--notion-bg-hover);
}

.notion-start-btn {
    padding: 6px 14px;
    font-size: 13px;
    font-weight: 500;
    color: white;
    background: var(--notion-blue);
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: all 120ms ease;
}

.notion-start-btn:hover:not(:disabled) {
    filter: brightness(1.1);
}

.notion-start-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Responsive: Stack to 2 rows on smaller widths */
@container (max-width: 400px) {
    .notion-session-panel {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }
    
    .session-presets {
        justify-content: flex-start;
    }
    
    .session-custom {
        justify-content: flex-end;
    }
}

/* Fallback for browsers without container queries */
@media (max-width: 500px) {
    .task-notes .notion-session-panel {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }
    
    .task-notes .session-presets {
        justify-content: flex-start;
    }
    
    .task-notes .session-custom {
        justify-content: flex-end;
    }
}

/* Panel close button - Notion style */
.notion-panel-close {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: 300;
    color: var(--notion-text-muted);
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 120ms ease;
    line-height: 1;
}

.notion-panel-close:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

/* Panel controls - top right corner */
.panel-controls {
    position: absolute;
    top: 8px;
    right: 8px;
    display: flex;
    align-items: center;
    gap: 4px;
}

.panel-controls .notion-panel-close {
    position: static;
}

/* Settings gear button */
.panel-settings-btn {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--notion-text-muted);
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 120ms ease;
}

.panel-settings-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.panel-settings-btn.is-active {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.panel-settings-btn .settings-icon {
    font-size: 14px;
    opacity: 0.7;
}

.panel-settings-btn:hover .settings-icon,
.panel-settings-btn.is-active .settings-icon {
    opacity: 1;
}

/* Settings dropdown */
.panel-settings-dropdown {
    margin-top: 12px;
    padding: 8px;
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: 8px;
}

.settings-option {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 8px 10px;
    border-radius: 6px;
    cursor: pointer;
    transition: background 120ms ease;
}

.settings-option:hover {
    background: var(--notion-bg-hover);
}

.settings-option input[type="checkbox"] {
    width: 16px;
    height: 16px;
    margin-top: 2px;
    accent-color: var(--notion-blue);
    cursor: pointer;
    flex-shrink: 0;
}

.settings-option .option-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.settings-option .option-label {
    font-size: 13px;
    font-weight: 500;
    color: var(--notion-text);
}

.settings-option .option-hint {
    font-size: 11px;
    color: var(--notion-text-muted);
    line-height: 1.4;
}

/* ============================================
   Notion-style Estimate Panel
   ============================================ */

.notion-estimate-panel {
    position: relative;
}

.estimate-panel-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 10px 0;
    flex-wrap: wrap;
}

/* Quick presets - left side */
.estimate-presets {
    display: flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
}

.estimate-preset-btn {
    padding: 5px 10px;
    font-size: 12px;
    font-weight: 500;
    color: var(--notion-text-muted);
    background: transparent;
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    cursor: pointer;
    transition: all 120ms ease;
    font-variant-numeric: tabular-nums;
}

.estimate-preset-btn:hover {
    color: var(--notion-text);
    background: var(--notion-bg-hover);
    border-color: rgba(255, 255, 255, 0.15);
}

.estimate-preset-btn.is-selected {
    color: #a78bfa;
    background: rgba(167, 139, 250, 0.1);
    border-color: rgba(167, 139, 250, 0.3);
}

/* Custom input + save - right side */
.estimate-custom {
    display: flex;
    align-items: center;
    gap: 8px;
}

.estimate-input-group {
    display: flex;
    align-items: center;
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    overflow: hidden;
}

.notion-input.estimate-duration-input {
    width: 52px;
    padding: 6px 8px;
    font-size: 14px;
    font-weight: 500;
    text-align: center;
    border: none;
    background: transparent;
    color: var(--notion-text);
    font-variant-numeric: tabular-nums;
}

.notion-input.estimate-duration-input:focus {
    outline: none;
}

.notion-input.estimate-duration-input::placeholder {
    color: var(--notion-text-muted);
}

.notion-input.estimate-duration-input::-webkit-outer-spin-button,
.notion-input.estimate-duration-input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.notion-input.estimate-duration-input[type=number] {
    -moz-appearance: textfield;
    appearance: textfield;
}

.estimate-unit-toggle {
    display: flex;
    border-left: 1px solid var(--notion-border);
}

.estimate-unit-toggle .unit-btn {
    padding: 6px 10px;
    font-size: 12px;
    font-weight: 500;
    color: var(--notion-text-muted);
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 120ms ease;
}

.estimate-unit-toggle .unit-btn:first-child {
    border-right: 1px solid var(--notion-border);
}

.estimate-unit-toggle .unit-btn:hover {
    color: var(--notion-text);
    background: var(--notion-bg-hover);
}

.estimate-unit-toggle .unit-btn.is-active {
    color: var(--notion-text);
    background: var(--notion-bg-hover);
}

/* Save button - purple accent for estimates */
.notion-save-btn {
    padding: 6px 14px;
    font-size: 13px;
    font-weight: 500;
    color: white;
    background: #8b5cf6;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: all 120ms ease;
}

.notion-save-btn:hover:not(:disabled) {
    filter: brightness(1.1);
}

.notion-save-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Clear button */
.notion-clear-btn {
    padding: 6px 12px;
    font-size: 13px;
    font-weight: 500;
    color: var(--notion-text-muted);
    background: transparent;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: all 120ms ease;
}

.notion-clear-btn:hover:not(:disabled) {
    color: var(--notion-text);
    background: var(--notion-bg-hover);
}

/* Notion-style checkbox label */
.notion-checkbox-label {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    margin-top: 12px;
    padding: 10px 12px;
    background: var(--notion-bg-secondary);
    border-radius: 6px;
    cursor: pointer;
    transition: background 120ms ease;
}

.notion-checkbox-label:hover {
    background: var(--notion-bg-hover);
}

.notion-checkbox {
    width: 16px;
    height: 16px;
    margin-top: 2px;
    accent-color: var(--notion-blue);
    cursor: pointer;
    flex-shrink: 0;
}

.notion-checkbox-label .checkbox-text {
    font-size: 13px;
    font-weight: 500;
    color: var(--notion-text);
}

.notion-checkbox-label .checkbox-hint {
    display: block;
    font-size: 11px;
    color: var(--notion-text-muted);
    margin-top: 2px;
}

/* Responsive: Stack to 2 rows on smaller widths */
@media (max-width: 500px) {
    .task-notes .estimate-panel-content {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }
    
    .task-notes .estimate-presets {
        justify-content: flex-start;
    }
    
    .task-notes .estimate-custom {
        justify-content: flex-end;
    }
}

/* Inline notes toggle in flag row */
.notes-toggle-inline {
    padding: 3px 8px;
    border-radius: var(--radius-sm);
    background: rgba(255, 255, 255, 0.01);
    font-size: 11px;
}

.notes-toggle-inline:hover {
    background: rgba(255, 255, 255, 0.08);
}

.task-notes {
    margin-top: 6px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 8px;
    padding: 8px;
    background: rgba(255, 255, 255, 0.02);
    position: relative;
}

.task-row.task-row:last-child.capture-task-notes {
  margin-bottom: 0 !important;
}


.task-notes capture-task-notes {
  margin-top: 0 !important;
}

.task-notes textarea {
    width: 100%;
    min-height: 80px;
    background: transparent;
    border: none;
    color: var(--notion-text);
    font-family: var(--notion-font);
    font-size: 13px;
    line-height: 1.5;
    resize: vertical;
}

.task-notes textarea:focus {
    outline: none;
  }

.task-notes {
  animation: notesRevealIn 220ms ease forwards;
}

@keyframes notesRevealIn {
  from {
    opacity: 0;
    transform: translateY(-6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.task-notes.is-closing {
  animation: notesRevealOut 200ms ease forwards;
  margin-top: -10px;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

@keyframes notesRevealOut {
  to {
    opacity: 0;
    transform: translateY(-6px);
  }
}

.task-notes-hint {
    margin: 6px 0 0;
    font-size: 11px;
    color: var(--notion-text-muted);
}

.task-notes-collapse {
    position: absolute;
    bottom: 8px;
    right: 8px;
    border: 1px solid rgba(255, 255, 255, 0.12);
    background: rgba(255, 255, 255, 0.05);
    color: var(--notion-text);
    border-radius: 6px;
    font-size: 14px;
    padding: 4px 6px;
    cursor: pointer;
}

.task-notes-collapse:hover {
    background: rgba(255, 255, 255, 0.12);
}

/* Notion-style deadline chips - rounded pills, clear typography */
.chip-hard {
    background: rgba(212, 76, 71, 0.8);
    color: white;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.02em;
    border-radius: 999px;
    padding: 3px 10px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
}

.chip-soft {
    background: rgba(35, 131, 226, 0.7);
    color: white;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.02em;
    border-radius: 999px;
    padding: 3px 10px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
}

/* Bottom Controls */
.bottom-controls {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 8px 6px 0;
  margin-top: 0;
  /* Inherits from widget surface - no separate background */
}

.bottom-controls-left {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.bottom-controls-right {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.bottom-controls.is-collapsed {
  position: absolute;
  bottom: 0px;
  left: 0px;
  right: 0px;
  border-top: none;
  padding: 9px;
  margin-top: 0;
  background: var(--notion-bg);
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  pointer-events: auto;
  z-index: 4;
}

.bottom-controls.is-collapsed .bottom-controls-left {
  width: auto;
  gap: 2px;
}

.bottom-controls.is-collapsed .bottom-controls-center {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 0;
  overflow: hidden;
}

/* Next Action indicator */
.collapsed-next-action {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: transparent;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  max-width: 100%;
  overflow: hidden;
}

.collapsed-next-action:hover {
  background: rgba(255, 255, 255, 0.06);
}

.collapsed-next-action .next-action-label {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: rgba(255, 255, 255, 0.4);
  flex-shrink: 0;
}

.collapsed-next-action .next-action-title {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.7);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.collapsed-next-action:hover .next-action-title {
  color: rgba(255, 255, 255, 0.9);
}

.collapsed-next-action .next-action-project {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.3);
  flex-shrink: 0;
}

/* Collapsed state button styles */
.bottom-controls.is-collapsed .widget-toggle-button,
.bottom-controls.is-collapsed .collapsed-icon-btn,
.bottom-controls.is-collapsed .quick-add-toggle {
  width: 28px;
  height: 28px;
  padding: 0;
  color: currentColor;
  background: transparent;
  border-radius: 8px;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.bottom-controls.is-collapsed .widget-toggle-button:hover,
.bottom-controls.is-collapsed .collapsed-icon-btn:hover,
.bottom-controls.is-collapsed .quick-add-toggle:hover {
  background: rgba(255, 255, 255, 0.08);
}

.bottom-controls.is-collapsed .widget-toggle-button svg,
.bottom-controls.is-collapsed .collapsed-icon-btn svg {
  opacity: 0.5;
}

.bottom-controls.is-collapsed .widget-toggle-button:hover svg,
.bottom-controls.is-collapsed .collapsed-icon-btn:hover svg {
  opacity: 0.9;
}

.bottom-controls.is-collapsed .collapsed-icon-btn.is-active {
  background: rgba(255, 255, 255, 0.04);
}

.bottom-controls.is-collapsed .collapsed-icon-btn.is-active svg {
  opacity: 0.85;
}

/* Pin button specific - more subdued when active */
.bottom-controls.is-collapsed .collapsed-pin.is-active {
  background: rgba(255, 255, 255, 0.03);
}

.bottom-controls.is-collapsed .collapsed-pin.is-active svg {
  opacity: 0.8;
}

.bottom-controls.is-collapsed .quick-add-toggle {
  font-size: 18px;
  font-weight: 300;
  color: rgba(255, 255, 255, 0.5);
}

.bottom-controls.is-collapsed .quick-add-toggle:hover {
  color: rgba(255, 255, 255, 0.9);
}

.bottom-controls.is-collapsed.is-thin {
  padding: 0;
  background: transparent;
  border: none;
  box-shadow: none;
  transform: translateY(6px);
  justify-content: center;
  height: 12px;
  display: flex;
  align-items: center;
}

.bottom-controls.is-collapsed.is-thin .bottom-controls-left {
  width: auto;
}

.bottom-controls.is-collapsed.is-thin .widget-toggle-button,
.bottom-controls.is-collapsed.is-thin .pin-toggle,
.bottom-controls.is-collapsed.is-thin .quick-add-toggle {
  display: none;
}

.thin-indicator {
  width: 64px;
  height: 6px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.15);
  background: rgba(255, 255, 255, 0.1);
  opacity: 0.9;
  cursor: pointer;
  pointer-events: auto;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  position: relative;
  overflow: hidden;
}

.thin-indicator.has-progress {
  border-color: rgba(168, 85, 247, 0.4);
  background: rgba(168, 85, 247, 0.15);
}

.thin-progress-bar {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: var(--progress, 0%);
  background: linear-gradient(90deg, rgba(168, 85, 247, 0.8), rgba(139, 92, 246, 0.9));
  border-radius: 999px;
  transition: width 1s linear;
  box-shadow: 0 0 8px rgba(168, 85, 247, 0.5);
}

.bottom-controls.is-collapsed.is-thin .thin-indicator:hover {
  opacity: 1;
  background: rgba(255, 255, 255, 0.25);
  height: 8px;
  transform: translateY(-1px);
  border-color: rgba(255, 255, 255, 0.3);
}

.bottom-controls.is-collapsed.is-thin .thin-indicator.has-progress:hover {
  background: rgba(168, 85, 247, 0.25);
  border-color: rgba(168, 85, 247, 0.5);
}

/* Collapsed timer display */
.collapsed-timer-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 8px 12px;
  min-width: 120px;
}

.collapsed-cue .collapsed-timer-display {
  padding: 0;
  min-width: auto;
}

.collapsed-timer-task {
  font-size: 11px;
  color: var(--notion-text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 200px;
  text-align: center;
}

.collapsed-timer-time {
  font-size: 16px;
  font-weight: 600;
  color: var(--notion-text);
  font-family: 'JetBrains Mono', monospace;
  letter-spacing: 0.5px;
}

.bottom-controls-left {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

/* Quick Add */
.quick-add-wrapper {
  display: flex;
  flex-direction: column;
  gap: 0;
  flex: 1;
  position: relative;
}

.quick-add-wrapper::before {
  content: '';
  position: absolute;
  top: -38px;
  left: 0;
  right: 0;
  height: 38px;
  pointer-events: none;
  z-index: 10;
}

/* Hide QuickAdd gradient in capture mode */
.task-log.is-capture-mode .quick-add-wrapper::before {
  display: none;
}

.quick-add {
  padding-top: 5px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  box-shadow: 0 0 5px 5px rgb(27, 27, 27);
  transition: max-height 300ms ease, opacity 300ms ease, padding 300ms ease, border-top 300ms ease;
  overflow: hidden;
  opacity: 0.85;
  position: relative;
  border-top: 1px solid var(--notion-border);
}

/* Remove border-top in capture mode */
.task-log.is-capture-mode .quick-add {
  border-top: none;
}

.quick-add.is-collapsed {
  max-height: 0;
  opacity: 0;
  padding-top: 0;
  padding-bottom: 0;
  border-top: none;
  margin: 0;
  box-shadow: none;
}

.quick-add.is-collapsed * {
  pointer-events: none;
}

/* Notion-style quick add toggle */
.quick-add-toggle {
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  font-size: 14px;
  font-weight: 500;
  padding: 6px 10px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-sm);
  white-space: nowrap;
  flex-shrink: 0;
  margin-left: auto;
}

.quick-add-toggle:hover {
  color: var(--notion-text);
  background: var(--notion-bg-hover);
}

.capture-title-wrapper {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.capture-title-input {
  background: transparent;
  border: none;
  border-radius: 0;
  padding: 6px 0;
  font-size: 16px;
}

.capture-title-input:focus {
  outline: none;
  border-bottom-color: rgba(255, 255, 255, 0.35);
  box-shadow: none;
}

.capture-title-input::placeholder {
  color: var(--notion-text-muted);
}

.capture-deadline-toggle {
  min-height: 32px;
}

.capture-task-properties {
  margin-top: 4px;
}

.capture-property-group-left,
.task-row-property-left {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  gap: 12px;
  flex: 1 1 320px;
  min-width: 260px;
}

.capture-property-group-flags {
  gap: 12px;
  flex: 0 0 auto;
}

.capture-flags {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  flex-wrap: wrap;
}

.capture-matrix-inline {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
  min-width: 80px;
}

.task-row-property-left {
  flex: 1 1 360px;
  min-width: 285px;
}

.task-row-matrix-inline {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 80px;
}

.task-row-property-flags {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
  flex: 0 1 auto;
  min-width: 0;
  margin-right: 5px;
  flex-shrink: 1;
}

.task-row-property-flags .flag {
  margin: 0;
}

.task-row-flag-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

/* ============================================
   Foam Mode - Compact Layout for Narrow Widths
   ============================================ */

/* Enable container queries on task properties row */
.task-properties-row {
  container-type: inline-size;
  container-name: task-props;
}

/* Structured date field display */
.date-field-placeholder {
  color: var(--notion-text-muted);
}

.date-field-structured {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.date-field-structured .date-part {
  font-weight: 500;
}

.date-field-structured .time-part {
  opacity: 0.85;
}

.date-field-structured .time-part::before {
  content: '';
  margin-right: 6px;
  opacity: 0.5;
}

/* Same-day range: date on top, time range below */
.date-field-structured.same-day-range {
  display: inline-flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
  font-size: 12px;
}

.date-field-structured.same-day-range .time-range-part {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.date-field-structured.same-day-range .time-range-part .time-part::before {
  content: none;
}

/* Subtle arrow indicator for time range row */
.date-field-structured.same-day-range .time-range-part::before {
  content: '';
  opacity: 0.35;
  margin-right: 3px;
  font-size: 0.9em;
}

.date-field-structured .time-separator,
.date-field-structured .date-separator {
  opacity: 0.6;
  margin: 0 2px;
}

.date-field-structured.date-range {
  display: inline-flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
  font-size: 12px;
}

.date-field-structured.date-range .range-start,
.date-field-structured.date-range .range-end {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.date-field-structured.date-range .date-separator {
  display: none;
}

.date-field-structured.date-range .range-start .time-part::before,
.date-field-structured.date-range .range-end .time-part::before {
  content: none;
}

/* Subtle arrow indicator for end date row */
.date-field-structured.date-range .range-end::before {
  content: '';
  opacity: 0.35;
  margin-right: 3px;
  font-size: 0.9em;
}


/* Foam Mode Container Query - triggers at narrow widths */
@container task-props (max-width: 550px) {
  /* Hide flag labels, show only checkboxes */
  .flag .flag-label {
    display: none;
  }
  
  /* Make flag container more compact */
  .task-row-property-flags {
    flex: 0 1 auto;
    min-width: 0;
  }
  
  .task-row-flag-row {
    gap: 8px;
  }
  
  /* Spread items apart */
  .task-row-property-left {
    flex: 1 1 auto;
    min-width: 180px;
    justify-content: flex-start;
  }
  
}

/* Very narrow foam mode - even more compact */
@container task-props (max-width: 320px) {
  .task-row-property-left {
    flex-direction: column;
    gap: 8px;
    min-width: 150px;
  }
  
  .property-item.status-item {
    width: 100%;
  }
  
  .matrix-inline.task-row-matrix-inline {
    width: 100%;
  }
}

.task-row-open-link {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  width: 100%;
  margin-right: 2px;
  gap: 8px;
}

.task-row-open-meta {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.task-row-open-link .open-link {
  width: auto;
}

.estimated-length-pill {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(255, 255, 255, 0.08);
  font-size: 0.78em;
  color: rgba(255, 255, 255, 0.9);
}

.time-left-pill {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(107, 33, 168, 0.5);
  background: rgba(107, 33, 168, 0.25);
  font-size: 0.78em;
  color: #f5e1ff;
  font-family: 'JetBrains Mono', monospace;
}

.capture-matrix-select,
.task-row-matrix-select {
  min-width: 80px;
}

/* Footer row: Project selector + Add Task button */
.capture-footer-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  padding: 10px 8px 8px;
  margin-top: 6px;
  border-top: 1px solid rgba(255, 255, 255, 0.04);
}

.capture-footer-left {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  min-width: 0;
}

.capture-footer-right {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
}

/* Legacy capture-actions - kept for compatibility */
.capture-actions {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 16px;
  width: 100%;
  flex-wrap: wrap;
  margin-top: 8px;
  padding: 0 8px 8px;
}

.capture-actions-title {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
}

.capture-actions p {
  margin: 0;
}

.capture-actions-title h2 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--notion-text);
}

.capture-subtle-title {
  margin: 0;
  font-size: 12px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.45);
}

.capture-submit {
  border: none;
  border-radius: 8px;
  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
  color: #fff;
  font-weight: 600;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  font-size: 11px;
  padding: 10px 24px;
  cursor: pointer;
  transition: all 150ms ease;
  box-shadow: 
    0 1px 2px rgba(0, 0, 0, 0.3),
    0 0 0 0 rgba(59, 130, 246, 0);
}

.capture-submit:not(:disabled):hover {
  background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
  box-shadow: 
    0 2px 8px rgba(59, 130, 246, 0.4),
    0 0 0 2px rgba(59, 130, 246, 0.2);
  transform: translateY(-1px);
}

.capture-submit:not(:disabled):active {
  transform: translateY(0);
  box-shadow: 
    0 1px 2px rgba(0, 0, 0, 0.3),
    0 0 0 2px rgba(59, 130, 246, 0.3);
}

.capture-submit:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  background: #374151;
}


.capture-complete:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.task-organizer {
  position: relative;
  display: inline-flex;
}


.task-organizer-icon {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  border: 1px solid transparent;
  background: rgba(255, 255, 255, 0.02);
  color: var(--notion-text);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 0.7;
  transition:
    background 140ms ease,
    border-color 140ms ease,
    opacity 140ms ease,
    box-shadow 140ms ease;
}

.task-organizer-icon:hover {
  opacity: 1;
  border-color: rgba(255, 255, 255, 0.25);
  background: rgba(255, 255, 255, 0.06);
}

.task-organizer-icon.is-active {
  border-color: rgba(255, 255, 255, 0.2);
  opacity: 1;
}

.task-organizer-icon.is-open {
  opacity: 1;
  border-color: rgba(255, 255, 255, 0.4);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
}

.task-organizer-icon-inner {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.task-organizer-icon-inner svg {
  width: 18px;
  height: 18px;
  pointer-events: none;
}

.task-organizer-popover {
  position: absolute;
  bottom: calc(100% + 8px);
  left: 0;
  min-width: 320px;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(20, 20, 20, 0.95);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.45);
  z-index: 30;
}

@supports (backdrop-filter: blur(12px)) {
  .task-organizer-popover {
    background: rgba(18, 18, 18, 0.7);
    backdrop-filter: blur(12px);
  }
}

/* Notion-style filter section */
.task-organizer-section {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px 12px;
}

.task-organizer-section:last-child {
  border-bottom: none;
}

.task-organizer-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 12px;
  color: var(--notion-text-muted);
}

/* Notion-style filter footer */
.task-organizer-section-footer {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 0;
  padding: 4px 8px;
  border-top: none;
}

.task-organizer-section-title {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  color: rgba(255, 255, 255, 0.4);
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin: 0;
}

.task-organizer-section-meta {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.4);
  opacity: 1;
}

.task-organizer-section-actions {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  margin-left: auto;
}

.task-organizer-arrow {
  font-size: 12px;
  color: var(--notion-text);
}

.task-organizer-link {
  background: none;
  border: none;
  color: var(--notion-blue);
  font-size: 11px;
  cursor: pointer;
  padding: 0;
}

.task-organizer-link:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.task-organizer-close {
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  border-radius: 4px;
  font-size: 13px;
  padding: 2px 4px;
  cursor: pointer;
  transition: color 120ms ease;
}

.task-organizer-close:hover {
  color: var(--notion-text);
}

.task-organizer-rule-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sort-rule-row {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.sort-rule-row select {
  flex: 1;
  appearance: none;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(255, 255, 255, 0.04);
  color: var(--notion-text);
  font-size: 12px;
  padding: 4px 10px;
}

.task-organizer-order {
  display: flex;
  align-items: center;
  gap: 4px;
}

.task-organizer-order-button {
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.15);
  background: rgba(255, 255, 255, 0.04);
  color: var(--notion-text);
  font-size: 11px;
  cursor: pointer;
  transition: background 120ms ease, border-color 120ms ease;
}

.task-organizer-order-button:disabled {
  opacity: 0.35;
  cursor: not-allowed;
}

.task-organizer-order-button:not(:disabled):hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.35);
}

.task-organizer-remove {
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border: none;
  background: rgba(255, 255, 255, 0.05);
  color: var(--notion-text-muted);
  cursor: pointer;
  transition: background 120ms ease, color 120ms ease;
}

.task-organizer-remove:hover {
  background: rgba(255, 255, 255, 0.18);
  color: var(--notion-text);
}

.task-organizer-empty {
  margin: 0;
  font-size: 12px;
  color: var(--notion-text-muted);
}

.task-organizer-group-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.task-organizer-group-section {
  gap: 12px;
}

.task-organizer-group-pill {
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.16);
  background: transparent;
  color: var(--notion-text);
  font-size: 11px;
  padding: 4px 12px;
  cursor: pointer;
  transition: background 120ms ease, border-color 120ms ease;
}

.task-organizer-group-pill.is-active {
  border-color: rgba(255, 255, 255, 0.6);
  background: rgba(255, 255, 255, 0.08);
}

.task-organizer-group-pill:hover {
  border-color: rgba(255, 255, 255, 0.4);
}

.quick-add button[type="submit"]:hover {
    background: #1d70c2;
}

/* Writing Widget */
.writing-widget {
    gap: 8px;
    padding-top: 12px;
  }

.writing-widget header {
    padding: 0 0 12px;
    border-bottom: 1px solid var(--notion-border);
  }

.writing-title-field {
    display: flex;
    flex-direction: column;
    margin-bottom: 12px;
}

.writing-title-input {
  border: none;
    background: transparent;
    color: var(--notion-text);
    font-size: 28px;
  font-weight: 600;
    padding: 0;
    margin: 0;
}

.writing-title-input::placeholder {
    color: rgba(255, 255, 255, 0.25);
    font-weight: 600;
}

.writing-title-input:focus {
    outline: none;
}

.writing-properties {
  display: flex;
    flex-direction: column;
    gap: 1px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--notion-border);
}

.property-row {
  display: flex;
  align-items: center;
    min-height: 32px;
}

.property-label {
    width: 120px;
    flex-shrink: 0;
    font-size: 14px;
    color: var(--notion-text-muted);
    display: flex;
  align-items: center;
  gap: 6px;
}

.property-input {
    flex: 1;
    min-width: 0;
}

.property-input input {
    width: 100%;
    background: transparent;
    border: none;
    color: var(--notion-text);
    font-size: 14px;
    padding: 4px 0;
}

.property-input input::placeholder {
    color: var(--notion-text-muted);
    opacity: 0.5;
}

.property-input input:focus {
    outline: none;
    background: transparent;
}

.content-label {
    display: none; /* Hidden for cleaner look, implied by editor */
}

.writing-body {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
    margin-top: 12px;
}

.writing-widget .rich-body-editor {
    flex: 1;
    min-height: 200px;
    background: transparent;
    border: none;
    padding: 0;
    color: var(--notion-text);
    font-size: 14px;
    line-height: 1.5;
    overflow-y: auto;
}

.writing-widget .rich-body-editor:focus-within {
    background: transparent;
    outline: none;
}

/* Editor Styles */
.writing-widget .editor-heading {
    margin: 1em 0 0.5em;
    font-weight: 600;
    line-height: 1.3;
}

.writing-widget .editor-heading.heading-one {
    font-size: 1.5em;
    margin-top: 0;
}

.writing-widget .editor-heading.heading-two {
    font-size: 1.25em;
}

.writing-widget .editor-heading.heading-three {
    font-size: 1.1em;
}

.writing-widget .editor-list {
    margin: 0;
    padding-left: 1.5em;
}

.writing-widget .editor-list.bulleted {
    list-style-type: disc;
}

.writing-widget .editor-list.bulleted .editor-list.bulleted {
    list-style-type: circle;
}

.writing-widget .editor-list.bulleted .editor-list.bulleted .editor-list.bulleted {
    list-style-type: square;
}

/* Cycle back for deep nesting */
.writing-widget .editor-list.bulleted .editor-list.bulleted .editor-list.bulleted .editor-list.bulleted {
    list-style-type: disc;
}

.writing-widget .editor-list.bulleted .editor-list.bulleted .editor-list.bulleted .editor-list.bulleted .editor-list.bulleted {
    list-style-type: circle;
}

.writing-widget .editor-list.bulleted .editor-list.bulleted .editor-list.bulleted .editor-list.bulleted .editor-list.bulleted .editor-list.bulleted {
    list-style-type: square;
}

.writing-widget .editor-list.numbered {
    list-style-type: decimal;
}

.writing-widget .editor-list.numbered .editor-list.numbered {
    list-style-type: lower-alpha;
}

.writing-widget .editor-list.numbered .editor-list.numbered .editor-list.numbered {
    list-style-type: lower-roman;
}

/* Cycle back for deep nesting */
.writing-widget .editor-list.numbered .editor-list.numbered .editor-list.numbered .editor-list.numbered {
    list-style-type: decimal;
}

.writing-widget .editor-list.numbered .editor-list.numbered .editor-list.numbered .editor-list.numbered .editor-list.numbered {
    list-style-type: lower-alpha;
}

.writing-widget .editor-list.numbered .editor-list.numbered .editor-list.numbered .editor-list.numbered .editor-list.numbered .editor-list.numbered {
    list-style-type: lower-roman;
}

.writing-widget .editor-quote {
    border-left: 3px solid var(--notion-text);
    margin: 0.5em 0;
    padding-left: 1em;
    font-style: italic;
    opacity: 0.8;
}

.writing-widget .editor-code {
    background: rgba(255, 255, 255, 0.05);
    padding: 0.2em 0.4em;
    border-radius: 3px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85em;
}

.writing-widget .editor-divider {
    margin: 0.8em 0;
}

.writing-widget .editor-divider hr {
    border: none;
    border-top: 1px solid rgba(255, 255, 255, 0.15);
    margin: 0;
}

.editor-toolbar {
    display: flex;
    gap: 8px;
    margin-bottom: 6px;
}

.editor-toolbar button {
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.12);
    color: var(--notion-text);
    font-size: 11px;
    border-radius: 4px;
    padding: 2px 8px;
    cursor: pointer;
}

.editor-toolbar button:hover {
    background: var(--notion-bg-hover);
}

.editor-toggle {
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 6px;
    margin: 0.4em 0;
    padding: 4px 6px;
    background: rgba(255, 255, 255, 0.02);
}

.editor-toggle .toggle-row {
    display: flex;
    align-items: center;
    gap: 6px;
}

.toggle-button {
    background: transparent;
    border: none;
    color: var(--notion-text);
    cursor: pointer;
    font-size: 12px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
}

.toggle-title-content {
    flex: 1;
}

.editor-toggle-title {
    display: inline-block;
    width: 100%;
}

.toggle-body {
    margin-left: 26px;
    padding-top: 4px;
}

.writing-widget .editor-todo {
  display: flex;
    gap: 0.5em;
    align-items: start;
    margin: 0.25em 0;
}

.writing-widget .pill-toggle {
    display: inline-flex;
    background: var(--notion-bg-secondary);
    padding: 2px;
    border-radius: 4px;
}

.writing-widget .pill-toggle button {
    border-radius: 3px;
    font-size: 12px;
    padding: 2px 8px;
}

.writing-widget .pill-toggle button.active {
    background: var(--notion-bg-hover); /* Or white/active color */
    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.form-actions {
  display: flex;
    justify-content: flex-end;
    padding-top: 12px;
}

.action-button {
    background: var(--notion-blue);
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
}

.action-button:hover {
    background: #1d70c2;
}

.action-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

/* Settings Drawer */
.widget-settings-window {
    background: var(--notion-bg);
    min-height: 100vh;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 48px 24px;
}

.widget-settings-window.is-loading {
    align-items: center;
}

.widget-settings-surface {
    position: relative;
    width: min(720px, 100%);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    background: rgba(6, 8, 14, 0.92);
    padding: 36px 24px 24px;
    box-shadow: 0 18px 60px rgba(0, 0, 0, 0.55);
}

.widget-settings-drag-strip {
    position: absolute;
    top: 6px;
    left: 120px;
    right: 120px;
    height: 20px;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.08);
    -webkit-app-region: drag;
    cursor: move;
    pointer-events: auto;
}

.settings-drawer {
    width: 100%;
    display: flex;
    justify-content: center;
    margin-top: 8px;
}

.settings-panel {
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: 16px;
    width: 100%;
    max-height: 92vh;
    display: flex;
    flex-direction: column;
    gap: 20px;
    padding: 24px;
}

.settings-panel header {
    display: flex;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
    align-items: flex-start;
    -webkit-app-region: drag;
}

.panel-heading {
    flex: 1;
    min-width: 240px;
}

.settings-panel header button,
.settings-panel header .pill,
.settings-panel header .panel-actions button {
    -webkit-app-region: no-drag;
}

.panel-heading h2 {
  margin: 0;
}

.panel-heading .panel-subtitle {
    margin: 4px 0 0;
    color: var(--notion-text-muted);
    font-size: 0.85rem;
}

.panel-actions {
  display: flex;
    gap: 8px;
}

.panel-actions button {
  border: none;
    border-radius: 6px;
    padding: 6px 12px;
    background: rgba(255,255,255,0.08);
    color: var(--notion-text);
  cursor: pointer;
}

.panel-actions button:hover {
    background: rgba(255,255,255,0.16);
}

.settings-panel-body {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 18px;
}

.drawer-section {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 14px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.drawer-section-header h3 {
    margin: 0;
    font-size: 1rem;
}

.drawer-section-header p {
    margin: 4px 0 0;
    color: var(--notion-text-muted);
    font-size: 0.85rem;
}

.drawer-grid {
    display: grid;
    gap: 12px;
}

.drawer-grid.two-column {
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}

.drawer-grid .full-span {
    grid-column: 1 / -1;
}

.drawer-grid select {
    width: 100%;
}

.switch.card {
    position: relative;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    background: rgba(255, 255, 255, 0.02);
    transition: border-color 160ms ease, background 160ms ease;
}

.switch.card:hover {
    border-color: rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.04);
}

.switch.card input {
    position: absolute;
    opacity: 0;
    pointer-events: none;
}

.switch.card .slider {
    width: 44px;
    height: 24px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.18);
    flex-shrink: 0;
    position: relative;
    transition: background 160ms ease;
}

.switch.card .slider::after {
    content: '';
    position: absolute;
    top: 3px;
    left: 4px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #fff;
    transition: transform 160ms ease;
}

.switch.card input:checked + .slider {
    background: var(--notion-blue);
}

.switch.card input:checked + .slider::after {
    transform: translateX(18px);
}

.switch.card .label {
    display: flex;
    flex-direction: column;
    gap: 4px;
    font-size: 0.9rem;
    color: var(--notion-text);
}

.switch.card .label small {
    font-size: 0.78rem;
    color: var(--notion-text-muted);
}

.loading-panel {
    align-items: center;
    justify-content: center;
    text-align: center;
}

.settings-panel form {
  flex: 1;
    overflow-y: auto;
  display: flex;
  flex-direction: column;
    gap: 18px;
}

.settings-panel section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.settings-panel section + section {
    border-top: 1px solid rgba(255, 255, 255, 0.08);
    padding-top: 16px;
}

.panel-subtitle.subtle {
  color: rgba(255, 255, 255, 0.6);
  margin-top: -4px;
}

.drawer-feedback {
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 0.85rem;
  margin: 0;
}

.drawer-feedback.success {
  background: rgba(76, 175, 80, 0.18);
  color: #9ce5b3;
}

.drawer-feedback.error {
  background: rgba(229, 57, 53, 0.2);
  color: #ffc1c1;
}

.drawer-actions {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

.drawer-note {
  font-size: 0.85rem;
  color: var(--notion-text-muted);
  background: rgba(255, 255, 255, 0.04);
  border: 1px dashed rgba(255, 255, 255, 0.12);
  border-radius: 8px;
  padding: 12px;
}

.settings-panel label {
    font-size: 0.85rem;
    color: var(--notion-text-muted);
  display: flex;
  flex-direction: column;
    gap: 6px;
}

.settings-panel input,
.settings-panel textarea,
.settings-panel select {
    background: rgba(8, 10, 16, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 8px;
    color: var(--notion-text);
    font-size: 0.9rem;
  padding: 8px 10px;
}

.settings-panel input:focus,
.settings-panel textarea:focus,
.settings-panel select:focus {
    outline: none;
    border-color: rgba(255, 255, 255, 0.35);
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1);
}

.settings-panel button[type='submit'] {
  border: none;
    border-radius: 8px;
    background: var(--notion-blue);
    color: #fff;
    padding: 10px 16px;
    font-weight: 600;
  cursor: pointer;
}

.settings-panel button[type='submit']:hover {
    background: #1d70c2;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}

.resize-handle {
    z-index: 100;
    position: absolute;
    background: transparent;
}

.widget-shell .resize-handle,
.widget-settings-surface .resize-handle {
    position: absolute;
    background: transparent;
}

.widget-shell .resize-handle.edge-left,
.widget-settings-surface .resize-handle.edge-left {
    left: -4px;
    top: 24px;
    bottom: 24px;
    width: 8px;
    cursor: ew-resize;
}

.widget-shell .resize-handle.edge-right,
.widget-settings-surface .resize-handle.edge-right {
    right: -4px;
    top: 24px;
    bottom: 24px;
    width: 8px;
    cursor: ew-resize;
}

.widget-shell .resize-handle.edge-top,
.widget-settings-surface .resize-handle.edge-top {
    top: -4px;
    left: 24px;
    right: 24px;
    height: 8px;
    cursor: ns-resize;
}

.widget-shell .resize-handle.edge-bottom,
.widget-settings-surface .resize-handle.edge-bottom {
    bottom: -4px;
    left: 24px;
    right: 24px;
    height: 8px;
    cursor: ns-resize;
}

.widget-shell .resize-handle.corner,
.widget-settings-surface .resize-handle.corner {
    width: 14px;
    height: 14px;
}

.widget-shell .resize-handle.corner.top-left,
.widget-settings-surface .resize-handle.corner.top-left {
    top: -4px;
    left: -4px;
    cursor: nwse-resize;
}

.widget-shell .resize-handle.corner.top-right,
.widget-settings-surface .resize-handle.corner.top-right {
    top: -4px;
    right: -4px;
    cursor: nesw-resize;
}

.widget-shell .resize-handle.corner.bottom-left,
.widget-settings-surface .resize-handle.corner.bottom-left {
    bottom: -4px;
    left: -4px;
    cursor: nesw-resize;
}

.widget-shell .resize-handle.corner.bottom-right,
.widget-settings-surface .resize-handle.corner.bottom-right {
    bottom: -4px;
    right: -4px;
    cursor: nwse-resize;
}

.inline-error {
    color: var(--notion-red);
    font-size: 12px;
    margin: 0;
}

/* Full-screen view styles */
.fullscreen-app {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: row;
    background: var(--notion-bg);
    overflow: hidden;
    z-index: 1;
}

/* ========================================
   Vertical Navigation Sidebar
   ======================================== */
.nav-sidebar {
    display: flex;
    flex-direction: column;
    width: 200px;
    min-width: 200px;
    background: var(--notion-bg-secondary);
    border-right: 1px solid var(--notion-border);
    /* Subtle lift effect against dark content */
    box-shadow: 1px 0 0 rgba(255, 255, 255, 0.02);
    transition: width 200ms ease, min-width 200ms ease;
    z-index: 10;
    -webkit-app-region: drag;
}

.nav-sidebar.is-collapsed {
    width: 56px;
    min-width: 56px;
}

.nav-sidebar-header {
    display: flex;
    justify-content: flex-end;
    padding: 12px 10px;
    border-bottom: 1px solid var(--notion-border);
}

.nav-collapse-btn {
    -webkit-app-region: no-drag;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    color: var(--notion-text-muted);
    cursor: pointer;
    font-size: 14px;
    transition: all 120ms ease;
}

.nav-collapse-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.nav-sidebar-items {
    display: flex;
    flex-direction: column;
    padding: 8px;
    gap: 2px;
    flex: 1;
}

.nav-item {
    -webkit-app-region: no-drag;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    color: var(--notion-text-muted);
    cursor: pointer;
    font-size: 13px;
    font-weight: 500;
    text-align: left;
    transition: all 100ms ease;
    position: relative;
}

.nav-item:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.nav-item.active {
    background: rgba(35, 131, 226, 0.12);
    color: var(--notion-text);
}

.nav-item.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 20px;
    background: var(--notion-blue);
    border-radius: 0 2px 2px 0;
}

/* Indicate when header is collapsed - nav item can toggle it */
.fullscreen-app.header-collapsed .nav-item.active {
    background: rgba(35, 131, 226, 0.08);
}

.fullscreen-app.header-collapsed .nav-item.active::after {
    content: '';
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 8px;
    color: var(--notion-text-muted);
    opacity: 0.6;
}

.nav-item-icon {
    font-size: 16px;
    width: 22px;
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.nav-item-label {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.nav-sidebar.is-collapsed .nav-item {
    justify-content: center;
    padding: 10px;
}

.nav-sidebar.is-collapsed .nav-sidebar-header {
    justify-content: center;
}

/* Main content area wraps header and content */
.main-content-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-width: 0;
    position: relative;
    background: var(--notion-bg);
}

/* Current view label in header */
/* Header left cluster - projects toggle + organizer buttons */
.header-left-cluster {
    display: flex;
    align-items: center;
    gap: 8px;
}

.header-left-cluster .task-organizer-toolbar {
    margin-left: 8px;
}

/* Legacy current-view-label (kept for compatibility) */
.current-view-label {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 8px;
}

.current-view-label .view-icon {
    font-size: 18px;
}

.current-view-label .view-name {
    font-size: 16px;
    font-weight: 600;
    color: var(--notion-text);
}

.header-collapse-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    background: transparent;
    border: 1px solid transparent;
    border-radius: var(--radius-sm);
    color: var(--notion-text-muted);
    font-size: 10px;
    cursor: pointer;
    transition: all 150ms ease;
    opacity: 0.5;
}

.header-collapse-btn:hover {
    opacity: 1;
    background: var(--notion-bg-hover);
    border-color: var(--notion-border);
    color: var(--notion-text);
}

/* Show header button when collapsed */
.header-show-btn {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 12px;
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-top: none;
    border-radius: 0 0 var(--radius-md) var(--radius-md);
    color: var(--notion-text-muted);
    font-size: 12px;
    cursor: pointer;
    transition: all 150ms ease;
    z-index: 100;
    -webkit-app-region: no-drag;
}

.header-show-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
    padding-bottom: 8px;
}

.header-show-icon {
    font-size: 8px;
}

.header-show-label {
    font-weight: 500;
}

.fullscreen-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 24px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    /* Subtle depth shadow */
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.02);
    flex-shrink: 0;
    min-height: 60px;
    max-height: 80px;
    -webkit-app-region: drag;
    transition: min-height 200ms ease, max-height 200ms ease, padding 200ms ease, opacity 200ms ease, border-color 200ms ease;
    overflow: hidden;
}

.fullscreen-header.is-collapsed {
    min-height: 0;
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
    border-bottom-color: transparent;
    opacity: 0;
    pointer-events: none;
}

.fullscreen-header button,
.fullscreen-header input,
.fullscreen-header select,
.fullscreen-header textarea,
.fullscreen-header a,
.fullscreen-header label {
    -webkit-app-region: no-drag;
}

.fullscreen-toolbar-cluster {
    display: flex;
    align-items: center;
    gap: 12px;
}

.fullscreen-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    padding: 24px;
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
    background: var(--notion-bg);
    /* Subtle inset to create depth against chrome elements */
    box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.15);
}

.fullscreen-content.task-log {
    padding: 24px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.fullscreen-content .task-log-body {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}

.fullscreen-content .task-log-body > .task-list {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
    /* Fullscreen content area is already dark, so remove task-list background */
    background: transparent;
    box-shadow: none;
    border-radius: 0;
    padding: 0;
}

.fullscreen-content .task-log-body > .quick-add-wrapper {
    flex: 0 0 auto;
    margin-top: auto;
}

@media (min-width: 1200px) {
    .fullscreen-content {
        padding: 32px 48px;
    }
}

/* View Mode Switcher */
.view-mode-switcher {
    display: flex;
    gap: 4px;
    background: var(--notion-bg-active);
    padding: 4px;
    border-radius: var(--radius-md);
}

.view-mode-switcher button {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    border: none;
    background: transparent;
    color: var(--notion-text-muted);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 13px;
    transition: all 150ms ease;
}

.view-mode-switcher button:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.view-mode-switcher button.active {
    background: var(--notion-bg-secondary);
    color: var(--notion-text);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.view-mode-switcher .view-icon {
    font-size: 14px;
}

.view-mode-switcher .view-label {
    font-weight: 500;
}

/* Sub-view toggle (within a main view) */
.sub-view-toggle {
    display: flex;
    gap: 4px;
    background: var(--notion-bg);
    padding: 4px;
    border-radius: var(--radius-md);
    border: 1px solid var(--notion-border);
}

.sub-view-toggle button {
    padding: 6px 12px;
    border: none;
    background: transparent;
    color: var(--notion-text-muted);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 12px;
    transition: all 150ms ease;
    white-space: nowrap;
}

.sub-view-toggle button:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.sub-view-toggle button.active {
    background: var(--notion-blue);
    color: white;
}

/* Split View Layout */
.split-view {
    flex: 1;
    display: flex;
    align-items: stretch;
    overflow: hidden;
}

.split-view-sidebar {
    width: 280px;
    min-width: 200px;
    max-width: 400px;
    flex: 0 0 auto;
    border-right: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.split-view-sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    border-bottom: 1px solid var(--notion-border);
}

.split-view-sidebar-header h2 {
    margin: 0;
    font-size: 14px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--notion-text-muted);
}

.split-view-sidebar-content {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
}

.split-view-resizer {
    width: 6px;
    cursor: col-resize;
    background: transparent;
    position: relative;
    flex: 0 0 auto;
}

.split-view-resizer::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 50%;
    width: 2px;
    transform: translateX(-50%);
    background: var(--notion-border);
    opacity: 0.4;
}

.split-view-resizer.is-active::after {
    background: var(--notion-blue);
    opacity: 0.9;
}

.split-view-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.split-view-main-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    flex-shrink: 0;
}

.split-view-main-header h3 {
    margin: 0;
    font-size: 14px;
    font-weight: 600;
    color: var(--notion-text);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 200px;
}

/* Project List */
.project-list {
    list-style: none;
    margin: 0;
    padding: 0;
}

.project-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: background 150ms ease;
    margin-bottom: 4px;
}

.project-item:hover {
    background: var(--notion-bg-hover);
}

.project-item.active {
    background: var(--notion-bg-active);
}

.project-item.is-drop-target {
    background: rgba(35, 131, 226, 0.2);
    box-shadow: inset 0 0 0 1px rgba(35, 131, 226, 0.5);
}

.project-icon {
    font-size: 16px;
    flex-shrink: 0;
}

.project-title {
    flex: 1;
    font-size: 14px;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.project-count {
    font-size: 12px;
    color: var(--notion-text-muted);
    background: var(--notion-bg-active);
    padding: 2px 8px;
    border-radius: 10px;
}

.project-status {
    font-size: 11px;
    color: var(--notion-text-muted);
    background: var(--notion-bg-active);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
}

/* Projects Widget */
.projects-widget {
    flex: 1;
    display: flex;
    flex-direction: column;
}

/* Old projects dashboard header (deprecated, kept for compatibility) */
.projects-dashboard__header {
    display: flex;
    justify-content: space-between;
    gap: 24px;
    flex-wrap: wrap;
}

.projects-dashboard__eyebrow {
    text-transform: uppercase;
    font-size: 11px;
    letter-spacing: 0.08em;
    color: var(--notion-text-muted);
    margin-bottom: 4px;
}

.projects-dashboard__subtitle {
    color: var(--notion-text-muted);
    margin-top: 4px;
}

.projects-button {
    border: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    color: var(--notion-text);
    padding: 8px 16px;
    border-radius: var(--radius-md);
    font-weight: 500;
    cursor: pointer;
    transition: background 150ms ease, color 150ms ease;
}

.projects-button:hover {
    background: var(--notion-bg-hover);
}

.projects-button.ghost {
    background: transparent;
}

.projects-kpis {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 16px;
}

.projects-kpi {
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-lg);
    padding: 16px;
    background: var(--notion-bg);
}

.projects-kpi__label {
    margin: 0;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--notion-text-muted);
}

.projects-kpi__value {
    margin: 4px 0;
    font-size: 28px;
    font-weight: 600;
}

.projects-kpi__helper {
    margin: 0;
    color: var(--notion-text-muted);
    font-size: 13px;
}

.projects-callout {
    border-radius: var(--radius-md);
    padding: 12px 16px;
    font-size: 13px;
    border: 1px solid var(--notion-border);
}

.projects-callout.warning {
    border-color: #f39c12;
    background: rgba(243, 156, 18, 0.08);
    color: #f39c12;
}

.projects-callout.info {
    border-color: #3498db;
    background: rgba(52, 152, 219, 0.08);
    color: #3498db;
}

.projects-toolbar {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    align-items: center;
}

.projects-pill-group {
    display: inline-flex;
    gap: 8px;
    flex-wrap: wrap;
}

.projects-pill {
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text);
    border-radius: 999px;
    padding: 6px 14px;
    font-size: 12px;
    cursor: pointer;
    transition: background 150ms ease, color 150ms ease;
}

.projects-pill.is-active {
    background: var(--notion-bg-active);
    color: var(--notion-text);
}

.projects-search {
    flex: 1;
    min-width: 200px;
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    padding: 8px 12px;
    font-size: 14px;
    background: var(--notion-bg);
    color: var(--notion-text);
}

.projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 16px;
}

.project-card {
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-lg);
    padding: 18px;
    background: var(--notion-bg);
    display: flex;
    flex-direction: column;
    gap: 12px;
    cursor: pointer;
    transition: border 150ms ease, box-shadow 150ms ease;
}

.project-card.is-selected {
    border-color: var(--accent);
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.08);
}

.project-card__header {
    display: flex;
    justify-content: space-between;
    gap: 12px;
}

.project-card__status {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    padding: 4px 8px;
    border-radius: 999px;
    background: var(--notion-bg-active);
    color: var(--notion-text-muted);
}

.project-card__description {
    margin: 0;
    color: var(--notion-text-muted);
    font-size: 13px;
    line-height: 1.5;
    max-height: 4.5em;
    overflow: hidden;
}

.project-card__progress {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 13px;
    color: var(--notion-text-muted);
}

.progress-bar {
    flex: 1;
    height: 6px;
    border-radius: 999px;
    background: var(--notion-bg-active);
    overflow: hidden;
}

.progress-bar__value {
    height: 100%;
    background: var(--accent);
}

.project-card__matrix {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.matrix-pill {
    border-radius: 999px;
    padding: 4px 10px;
    font-size: 11px;
    color: var(--notion-bg);
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.project-card__next {
    border-top: 1px solid var(--notion-border);
    padding-top: 12px;
}

.projects-actions-panel {
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-lg);
    padding: 16px;
    background: var(--notion-bg);
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.projects-actions-header {
    display: flex;
    justify-content: space-between;
    gap: 16px;
    flex-wrap: wrap;
}

.projects-actions-controls {
    display: flex;
    gap: 8px;
    align-items: center;
}

.projects-actions-table {
    width: 100%;
    border-collapse: collapse;
}

.projects-actions-table th,
.projects-actions-table td {
    text-align: left;
    padding: 10px 8px;
    border-bottom: 1px solid var(--notion-border);
    font-size: 13px;
}

.projects-actions-table th {
    text-transform: uppercase;
    font-size: 11px;
    letter-spacing: 0.08em;
    color: var(--notion-text-muted);
}

.projects-actions-table__cta {
    text-align: right;
}

.project-tag-list {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.project-tag {
    background: var(--notion-bg-active);
    border-radius: 999px;
    padding: 3px 8px;
    font-size: 11px;
    color: var(--notion-text);
}

.action-title {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.action-subtle {
    color: var(--notion-text-muted);
    font-size: 12px;
}

.projects-empty {
    padding: 24px;
    text-align: center;
    color: var(--notion-text-muted);
}

.projects-empty.error {
    color: #e74c3c;
}

.projects-empty.compact {
    padding: 16px;
}

/* =====================================================
   Tab Section Wrappers - for bottom controls in all tabs
   ===================================================== */

.writing-tab-section,
.timelog-tab-section,
.projects-tab-section {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}

.writing-tab-section > .writing-widget,
.timelog-tab-section > .timelog-widget-v2,
.projects-tab-section > .projects-widget-v2 {
    flex: 1;
    min-height: 0;
}

.writing-tab-section > .bottom-controls,
.timelog-tab-section > .bottom-controls,
.projects-tab-section > .bottom-controls {
    flex-shrink: 0;
    border-top: 1px solid rgba(255, 255, 255, 0.06);
    margin-top: 0;
    padding: 10px 12px;
}

/* Ensure scroll areas are not affected by app-region */
.timelog-scroll-area,
.projects-list-v2,
.projects-scroll-area,
.writing-scroll-area {
    -webkit-app-region: no-drag;
    -webkit-user-select: auto;
    user-select: auto;
}

/* =====================================================
   Projects Widget V2 - Clean, Project-Focused Design
   ===================================================== */

.projects-widget-v2 {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}

.projects-header-v2 {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    flex-shrink: 0;
}

.projects-header-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.projects-count {
    font-size: 12px;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.projects-refresh-btn {
    width: 32px;
    height: 32px;
    border: none;
    background: rgba(255, 255, 255, 0.04);
    color: var(--notion-text-muted);
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    transition: all 150ms ease;
}

.projects-refresh-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.projects-scroll-area {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    padding: 12px;
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
}

.projects-list-v2 {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.projects-empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 48px 24px;
    text-align: center;
    color: var(--notion-text-muted);
    gap: 12px;
}

.projects-empty-state.compact {
    padding: 24px;
}

.projects-empty-state.error {
    color: #ef4444;
}

.projects-empty-state .empty-icon {
    font-size: 32px;
    opacity: 0.6;
}

.projects-empty-state h3 {
    margin: 0;
    color: var(--notion-text);
    font-size: 16px;
}

.projects-empty-state p {
    margin: 0;
    font-size: 13px;
}

.retry-button {
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.05);
    color: var(--notion-text);
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 13px;
    margin-top: 8px;
    transition: all 150ms ease;
}

.retry-button:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.3);
}

.loading-spinner {
    width: 24px;
    height: 24px;
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-top-color: var(--notion-blue);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Project Card V2 */
.project-card-v2 {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 12px;
    overflow: hidden;
    transition: all 180ms ease;
}

.project-card-v2:hover {
    background: rgba(255, 255, 255, 0.04);
    border-color: rgba(255, 255, 255, 0.1);
}

.project-card-v2.is-expanded {
    border-color: rgba(255, 255, 255, 0.15);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.project-card-v2.is-complete {
    opacity: 0.7;
}

.project-card-v2.is-complete:hover {
    opacity: 1;
}

/* Timeline status colors */
.project-card-v2.timeline-overdue {
    border-left: 3px solid #ef4444;
    background: rgba(239, 68, 68, 0.08);
    border-color: rgba(239, 68, 68, 0.6);
}

.project-card-v2.timeline-due-soon {
    border-left: 3px solid #fbbf24;
    background: rgba(251, 191, 36, 0.1);
    border-color: rgba(251, 191, 36, 0.6);
}

.project-card-v2.timeline-active {
    border-left: 3px solid #22c55e;
    background: rgba(34, 197, 94, 0.08);
}

.project-card-v2.timeline-upcoming {
    border-left: 3px solid #3b82f6;
    background: rgba(59, 130, 246, 0.08);
}

.project-card-v2.timeline-completed {
    border-left: 3px solid #6b7280;
    background: rgba(107, 114, 128, 0.08);
}

.project-card-v2.timeline-no-dates {
    border-left: 3px dashed rgba(255, 255, 255, 0.3);
}

.project-card-header {
    width: 100%;
    display: flex;
    flex-direction: column;
    padding: 14px 16px 10px;
    background: none;
    border: none;
    cursor: pointer;
    text-align: left;
    color: inherit;
    gap: 8px;
}

.project-main-info {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 12px;
}

.project-title-section {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 6px;
    min-width: 0;
}

.project-title-v2 {
    margin: 0;
    font-size: 14px;
    font-weight: 600;
    color: var(--notion-text);
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    line-height: 1.3;
    word-break: break-word;
}

.project-meta-row {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 4px;
}

.project-task-count {
    font-size: 12px;
    color: var(--notion-text-muted);
}

.project-task-count.complete {
    color: #22c55e;
}

.project-task-count.empty {
    color: #fbbf24;
}

/* Show Completed Tasks Toggle */
.show-completed-toggle {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    color: var(--notion-text-muted);
    font-size: 11px;
    cursor: pointer;
    transition: all 150ms ease;
}

.show-completed-toggle:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.show-completed-toggle.active {
    background: rgba(34, 197, 94, 0.15);
    border-color: rgba(34, 197, 94, 0.3);
    color: #4ade80;
}

.show-completed-toggle .toggle-check {
    font-size: 12px;
    opacity: 0.5;
}

.show-completed-toggle.active .toggle-check {
    opacity: 1;
}

.show-completed-toggle .toggle-label {
    font-weight: 500;
}

.project-status-badge {
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.project-right-info {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    justify-content: space-between;
    width: 100%;
}

.project-stats-group {
    display: flex;
    align-items: center;
    gap: 12px;
}

.project-progress-circle {
    width: 40px;
    height: 40px;
    flex-shrink: 0;
    color: #a78bfa;
}

.project-progress-circle.overdue {
    color: #f87171;
}

.project-progress-circle.due-soon {
    color: #fbbf24;
}

.project-progress-circle.active {
    color: #22c55e;
}

.project-progress-circle.upcoming {
    color: #60a5fa;
}

.project-progress-circle.completed {
    color: #9ca3af;
}

.project-progress-circle.no-dates {
    color: rgba(255, 255, 255, 0.5);
}

.project-task-counts {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.task-count-label {
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text);
}

.task-count-open {
    font-size: 11px;
    color: var(--notion-text-muted);
}

.task-count-empty {
    font-size: 12px;
    color: var(--notion-text-muted);
}

.timeline-indicator {
    --timeline-line-color: #a78bfa;
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding: 8px 10px;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.05);
    min-width: 140px;
    max-width: 100%;
    cursor: pointer;
    transition: all 150ms ease;
    border: 1px solid transparent;
    text-align: left;
}

.timeline-indicator:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.15);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.timeline-summary-text {
    font-size: 11px;
    font-weight: 600;
    color: var(--timeline-line-color);
}

.timeline-progress-row {
    display: flex;
    align-items: center;
    gap: 8px;
}

.timeline-range-label {
    font-size: 10px;
    color: rgba(255, 255, 255, 0.6);
    min-width: 42px;
}

.timeline-range-label.overdue {
    color: #fecaca;
}

.timeline-progress-track {
    flex: 1;
    height: 4px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.12);
    overflow: hidden;
    position: relative;
}

.timeline-progress-fill {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    border-radius: inherit;
    background: linear-gradient(90deg, var(--timeline-line-color), rgba(255, 255, 255, 0.8));
    transition: width 220ms ease;
}

.timeline-indicator.overdue {
    background: rgba(239, 68, 68, 0.15);
    --timeline-line-color: #f87171;
}
.timeline-indicator.due-soon {
    background: rgba(251, 191, 36, 0.18);
    --timeline-line-color: #fbbf24;
}
.timeline-indicator.active {
    background: rgba(34, 197, 94, 0.16);
    --timeline-line-color: #22c55e;
}
.timeline-indicator.upcoming {
    background: rgba(59, 130, 246, 0.15);
    --timeline-line-color: #60a5fa;
}
.timeline-indicator.completed {
    background: rgba(107, 114, 128, 0.15);
    --timeline-line-color: #e5e7eb;
}
.timeline-indicator.no-dates {
    background: rgba(255, 255, 255, 0.08);
    --timeline-line-color: rgba(255, 255, 255, 0.5);
}

.expand-chevron {
    font-size: 12px;
    color: var(--notion-text-muted);
    transition: transform 150ms ease;
}

/* Progress bar */
.project-progress-track {
    height: 3px;
    background: rgba(255, 255, 255, 0.06);
    margin: 0 16px;
}

.project-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6, #8b5cf6);
    border-radius: 2px;
    transition: width 300ms ease;
}

.project-card-v2.is-complete .project-progress-fill {
    background: #22c55e;
}

/* Expanded content */
.project-expanded-content {
    padding: 16px;
    padding-top: 12px;
    border-top: 1px solid rgba(255, 255, 255, 0.04);
    display: flex;
    flex-direction: column;
    gap: 14px;
    animation: slideDown 180ms ease;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Timeline section */
.project-timeline-section {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Arrow-style timeline */
.project-timeline-arrow {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 12px;
    padding: 8px 0;
}

.timeline-start-date,
.timeline-end-date {
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text-muted);
    white-space: nowrap;
    min-width: 50px;
}

.timeline-start-date {
    text-align: right;
}

.timeline-end-date {
    text-align: left;
}

.timeline-end-date.overdue {
    color: #f87171;
    font-weight: 700;
}

.timeline-arrow-track {
    flex: 1;
    height: 4px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
    position: relative;
    min-width: 80px;
}

.timeline-arrow-progress {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    border-radius: 2px;
    transition: width 300ms ease;
}

.timeline-arrow-head {
    position: absolute;
    right: -8px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 10px;
    color: rgba(255, 255, 255, 0.3);
    line-height: 1;
}

/* Timeline status colors */
.project-timeline-arrow.active .timeline-arrow-progress {
    background: linear-gradient(90deg, #22c55e, #4ade80);
}
.project-timeline-arrow.active .timeline-arrow-head {
    color: #4ade80;
}

.project-timeline-arrow.due-soon .timeline-arrow-progress {
    background: linear-gradient(90deg, #f59e0b, #fbbf24);
}
.project-timeline-arrow.due-soon .timeline-arrow-head {
    color: #fbbf24;
}

.project-timeline-arrow.upcoming .timeline-arrow-progress {
    background: linear-gradient(90deg, #3b82f6, #60a5fa);
}
.project-timeline-arrow.upcoming .timeline-arrow-head {
    color: #60a5fa;
}

.project-timeline-arrow.overdue .timeline-arrow-progress {
    background: linear-gradient(90deg, #ef4444, #f87171);
}
.project-timeline-arrow.overdue .timeline-arrow-head {
    color: #f87171;
}
.project-timeline-arrow.overdue .timeline-start-date,
.project-timeline-arrow.overdue .timeline-end-date {
    color: #f87171;
}

.project-timeline-arrow.completed .timeline-arrow-progress {
    background: linear-gradient(90deg, #6b7280, #9ca3af);
}
.project-timeline-arrow.completed .timeline-arrow-head {
    color: #9ca3af;
}

/* No deadline set - neutral */
.project-timeline-arrow.no-dates .timeline-arrow-progress,
.project-timeline-arrow:not(.active):not(.due-soon):not(.upcoming):not(.overdue):not(.completed) .timeline-arrow-progress {
    background: linear-gradient(90deg, #6b7280, #9ca3af);
}
.project-timeline-arrow.no-dates .timeline-arrow-head,
.project-timeline-arrow:not(.active):not(.due-soon):not(.upcoming):not(.overdue):not(.completed) .timeline-arrow-head {
    color: #9ca3af;
}

/* Priority breakdown */
.project-priority-breakdown {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.priority-chip {
    font-size: 11px;
    font-weight: 600;
    padding: 4px 10px;
    border-radius: 999px;
}

.priority-chip.do-now {
    background: rgba(34, 197, 94, 0.15);
    color: #4ade80;
}

.priority-chip.deep-work {
    background: rgba(59, 130, 246, 0.15);
    color: #60a5fa;
}

.priority-chip.delegate {
    background: rgba(250, 204, 21, 0.15);
    color: #fde047;
}

/* Next action */
.project-next-action {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 8px;
    padding: 10px 12px;
    cursor: pointer;
    transition: all 150ms ease;
    width: 100%;
    text-align: left;
}

.project-next-action:hover {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(59, 130, 246, 0.3);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.next-action-label {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--notion-text-muted);
    display: block;
    margin-bottom: 6px;
}

.next-action-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.next-action-title {
    font-size: 13px;
    color: var(--notion-text);
    font-weight: 500;
}

.next-action-due {
    font-size: 11px;
    color: var(--notion-text-muted);
}

/* Description */
.project-description-v2 {
    margin: 0;
    font-size: 13px;
    color: var(--notion-text-muted);
    line-height: 1.5;
}

/* Tags */
.project-tags-row {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.project-tag-v2 {
    font-size: 11px;
    padding: 3px 10px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.06);
    color: var(--notion-text-muted);
}

/* Actions row */
.project-actions-row {
    display: flex;
    justify-content: flex-end;
}

.project-open-link {
    font-size: 12px;
    color: var(--notion-blue);
    text-decoration: none;
    padding: 4px 0;
    transition: opacity 150ms ease;
}

.project-open-link:hover {
    opacity: 0.8;
}

/* Projects Toolbar */
.projects-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    gap: 12px;
    flex-shrink: 0;
}

.projects-toolbar-left {
    display: flex;
    align-items: center;
    gap: 8px;
}

.projects-toolbar-right {
    display: flex;
    align-items: center;
    gap: 8px;
}

.projects-filter-select,
.projects-sort-select {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
    font-size: 11px;
    padding: 6px 10px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 150ms ease;
}

.projects-filter-select:hover,
.projects-sort-select:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.2);
}

.projects-filter-select:focus,
.projects-sort-select:focus {
    outline: none;
    border-color: var(--notion-blue);
}

/* View Mode Toggle */
.projects-view-toggle {
    display: flex;
    background: rgba(255, 255, 255, 0.04);
    border-radius: 6px;
    padding: 2px;
}

.projects-view-toggle button {
    background: none;
    border: none;
    color: var(--notion-text-muted);
    font-size: 14px;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    transition: all 150ms ease;
}

.projects-view-toggle button:hover {
    color: var(--notion-text);
    background: rgba(255, 255, 255, 0.06);
}

.projects-view-toggle button.active {
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
}

/* Progress Badge */
.project-progress-badge {
    font-size: 11px;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 6px;
    background: rgba(139, 92, 246, 0.15);
    color: #a78bfa;
}

.project-card-v2.timeline-overdue .project-progress-badge {
    background: rgba(239, 68, 68, 0.2);
    color: #fecaca;
}

.project-card-v2.timeline-due-soon .project-progress-badge {
    background: rgba(251, 191, 36, 0.25);
    color: #fde68a;
}

.project-card-v2.timeline-active .project-progress-badge {
    background: rgba(34, 197, 94, 0.2);
    color: #bbf7d0;
}

.project-card-v2.timeline-upcoming .project-progress-badge {
    background: rgba(59, 130, 246, 0.2);
    color: #bfdbfe;
}

.project-card-v2.timeline-completed .project-progress-badge {
    background: rgba(107, 114, 128, 0.25);
    color: #e5e7eb;
}

.project-card-v2.timeline-no-dates .project-progress-badge {
    background: rgba(255, 255, 255, 0.12);
    color: var(--notion-text-muted);
}

/* Task Toggle */
.project-tasks-toggle {
    display: flex;
    align-items: center;
    gap: 6px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 6px;
    padding: 8px 12px;
    color: var(--notion-text-muted);
    font-size: 12px;
    cursor: pointer;
    transition: all 150ms ease;
    width: 100%;
}

.project-tasks-toggle:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.tasks-toggle-count {
    opacity: 0.6;
    margin-left: auto;
}

/* Project Add Task Section */
.project-add-task-section {
    margin-top: 8px;
}

.project-add-task-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    padding: 10px 14px;
    background: rgba(76, 175, 80, 0.1);
    border: 1px dashed rgba(76, 175, 80, 0.3);
    border-radius: 8px;
    color: rgba(76, 175, 80, 0.9);
    font-size: 13px;
    cursor: pointer;
    transition: all 150ms ease;
}

.project-add-task-btn:hover {
    background: rgba(76, 175, 80, 0.15);
    border-color: rgba(76, 175, 80, 0.5);
    color: #4caf50;
}

.project-add-task-btn .add-task-icon {
    font-size: 16px;
    font-weight: 600;
}

.project-add-task-form {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 12px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
}

.project-add-task-input {
    width: 100%;
    padding: 10px 12px;
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    color: var(--notion-text);
    font-size: 13px;
    outline: none;
    transition: border-color 150ms ease;
}

.project-add-task-input:focus {
    border-color: rgba(76, 175, 80, 0.5);
}

.project-add-task-input::placeholder {
    color: var(--notion-text-muted);
}

.project-add-task-actions {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
}

.project-add-task-submit {
    padding: 8px 16px;
    background: rgba(76, 175, 80, 0.9);
    border: none;
    border-radius: 6px;
    color: white;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
}

.project-add-task-submit:hover:not(:disabled) {
    background: #4caf50;
}

.project-add-task-submit:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.project-add-task-cancel {
    padding: 8px 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    color: var(--notion-text-muted);
    font-size: 12px;
    cursor: pointer;
    transition: all 150ms ease;
}

.project-add-task-cancel:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
}

.project-add-task-cancel:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Project Task Item - New Layout */
.project-task-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 12px;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 8px;
    transition: all 150ms ease;
    position: relative;
}

.project-task-item:hover,
.project-task-item.is-hovered {
    background: rgba(255, 255, 255, 0.06);
}

.project-task-item.is-selected {
    background: rgba(255, 255, 255, 0.08);
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1);
}

.project-task-item.completed {
    opacity: 0.6;
}

.project-task-item.completed .task-title-wrap {
    text-decoration: line-through;
    color: var(--notion-text-muted);
}

/* Task checkbox */
.project-task-item .task-checkbox-btn {
    flex-shrink: 0;
    width: 20px;
    height: 20px;
    border-radius: 4px;
    border: 1.5px solid rgba(255, 255, 255, 0.3);
    background: transparent;
    color: rgba(255, 255, 255, 0.4);
    font-size: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 150ms ease;
    margin-top: 2px;
}

.project-task-item .task-checkbox-btn:hover {
    border-color: rgba(76, 175, 80, 0.6);
    color: rgba(76, 175, 80, 0.8);
}

.project-task-item .task-checkbox-btn.completed {
    background: rgba(76, 175, 80, 0.2);
    border-color: rgba(76, 175, 80, 0.4);
    color: #4caf50;
}

/* Task content - allows wrapping */
.project-task-item .task-content {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.project-task-item .task-title-wrap {
    font-size: 13px;
    color: var(--notion-text);
    line-height: 1.4;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

/* Inline metadata row */
.task-inline-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    align-items: center;
}

/* Status badge - clickable */
.task-status-wrapper {
    position: relative;
}

.task-status-badge {
    padding: 2px 8px;
    background: rgba(139, 92, 246, 0.15);
    border: 1px solid rgba(139, 92, 246, 0.3);
    border-radius: 4px;
    color: rgba(139, 92, 246, 0.9);
    font-size: 11px;
    cursor: pointer;
    transition: all 150ms ease;
}

.task-status-badge:hover {
    background: rgba(139, 92, 246, 0.25);
    border-color: rgba(139, 92, 246, 0.5);
}

/* Status dropdown panel */
.task-status-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 100;
    min-width: 160px;
    background: rgba(30, 30, 35, 0.98);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    overflow: hidden;
    margin-top: 4px;
}

.status-dropdown-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    font-size: 11px;
    color: var(--notion-text-muted);
}

.status-dropdown-close {
    background: none;
    border: none;
    color: var(--notion-text-muted);
    font-size: 16px;
    cursor: pointer;
    padding: 0;
    line-height: 1;
}

.status-dropdown-close:hover {
    color: var(--notion-text);
}

.status-dropdown-options {
    display: flex;
    flex-direction: column;
    padding: 4px;
    max-height: 200px;
    overflow-y: auto;
}

.status-dropdown-option {
    padding: 8px 12px;
    background: transparent;
    border: none;
    border-radius: 4px;
    color: var(--notion-text);
    font-size: 12px;
    text-align: left;
    cursor: pointer;
    transition: all 100ms ease;
}

.status-dropdown-option:hover {
    background: rgba(255, 255, 255, 0.08);
}

.status-dropdown-option.active {
    background: rgba(139, 92, 246, 0.2);
    color: rgb(167, 139, 250);
}

/* Date badge - clickable */
.task-date-wrapper {
    position: relative;
}

.task-date-badge {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.2);
    border-radius: 4px;
    color: rgba(59, 130, 246, 0.9);
    font-size: 11px;
    cursor: pointer;
    transition: all 150ms ease;
}

.task-date-badge:hover {
    background: rgba(59, 130, 246, 0.2);
    border-color: rgba(59, 130, 246, 0.4);
}

.task-date-badge .deadline-indicator {
    font-size: 10px;
}

.task-date-input {
    padding: 2px 6px;
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(59, 130, 246, 0.5);
    border-radius: 4px;
    color: var(--notion-text);
    font-size: 11px;
    outline: none;
    width: 120px;
}

/* Deadline type toggle */
.task-deadline-toggle {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 10px;
    cursor: pointer;
    transition: all 150ms ease;
}

.task-deadline-toggle.hard {
    background: rgba(239, 68, 68, 0.15);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: rgba(239, 68, 68, 0.9);
}

.task-deadline-toggle.hard:hover {
    background: rgba(239, 68, 68, 0.25);
    border-color: rgba(239, 68, 68, 0.5);
}

.task-deadline-toggle.soft {
    background: rgba(59, 130, 246, 0.15);
    border: 1px solid rgba(59, 130, 246, 0.3);
    color: rgba(59, 130, 246, 0.9);
}

.task-deadline-toggle.soft:hover {
    background: rgba(59, 130, 246, 0.25);
    border-color: rgba(59, 130, 246, 0.5);
}

/* Matrix badge in task item */
.task-inline-meta .task-matrix-badge {
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: 500;
}

/* Project Tasks List */
.project-tasks-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding-right: 4px;
}

.tasks-section {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.tasks-section-header {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--notion-text-muted);
    margin-bottom: 4px;
}

.project-task-item {
    display: flex;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: 8px;
    padding: 6px 8px;
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.02);
    transition: background 150ms ease;
    cursor: pointer;
    position: relative;
}

.project-task-item:hover,
.project-task-item.is-hovered {
    background: rgba(255, 255, 255, 0.06);
}

.project-task-item.is-selected {
    background: rgba(59, 130, 246, 0.15);
    border: 1px solid rgba(59, 130, 246, 0.3);
}

.project-task-item .task-checkbox-btn {
    font-size: 12px;
    color: var(--notion-text-muted);
    flex-shrink: 0;
    align-self: flex-start;
    margin-top: 2px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 2px 4px;
    border-radius: 4px;
    transition: all 150ms ease;
}

.project-task-item .task-checkbox-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
}

.project-task-item .task-checkbox-btn.completed {
    color: #22c55e;
}

.project-task-item .task-title {
    flex: 1 1 auto;
    min-width: 120px;
    font-size: 12px;
    color: var(--notion-text);
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    line-height: 1.3;
    transition: color 150ms ease;
}

.project-task-item.is-hovered .task-title {
    color: var(--notion-blue);
    font-weight: 600;
}

.project-task-item .task-meta {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 6px;
    flex-shrink: 1;
    margin-left: auto;
}

.project-task-item .task-due {
    font-size: 10px;
    color: var(--notion-text-muted);
    flex-shrink: 0;
}

.task-deadline-flag {
    font-size: 12px;
    flex-shrink: 0;
    filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.3));
}

.task-deadline-flag.hard {
    color: #f87171;
}

.task-deadline-flag.soft {
    color: #60a5fa;
}

.project-task-item .task-hard-deadline {
    font-size: 10px;
    font-weight: 700;
    color: #f87171;
    background: rgba(239, 68, 68, 0.2);
    padding: 1px 5px;
    border-radius: 3px;
    flex-shrink: 0;
}

/* Task Matrix Badge */
.task-matrix-badge {
    font-size: 9px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 4px;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    flex-shrink: 0;
}

.task-matrix-badge.do-now {
    background: rgba(34, 197, 94, 0.2);
    color: #4ade80;
}

.task-matrix-badge.deep-work {
    background: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
}

.task-matrix-badge.delegate {
    background: rgba(250, 204, 21, 0.2);
    color: #fde047;
}

.task-matrix-badge.trash {
    background: rgba(107, 114, 128, 0.2);
    color: #9ca3af;
}

.project-task-item.completed .task-title {
    color: var(--notion-text-muted);
    text-decoration: line-through;
}

.tasks-section.completed {
    opacity: 0.7;
}

.tasks-more {
    font-size: 11px;
    color: var(--notion-text-muted);
    padding: 4px 8px;
}

/* Task Popup */
.task-popup {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 100;
    background: var(--notion-bg);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    margin-top: 4px;
    animation: popupFadeIn 150ms ease;
}

@keyframes popupFadeIn {
    from {
        opacity: 0;
        transform: translateY(-4px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.task-popup-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.task-popup-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--notion-text);
}

.task-popup-close {
    background: none;
    border: none;
    color: var(--notion-text-muted);
    font-size: 18px;
    cursor: pointer;
    padding: 0;
    line-height: 1;
}

.task-popup-close:hover {
    color: var(--notion-text);
}

.task-popup-body {
    padding: 10px 12px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.task-popup-field-label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--notion-text-muted);
}

.task-popup-input {
    width: 100%;
    padding: 6px 8px;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.15);
    background: rgba(255, 255, 255, 0.04);
    color: var(--notion-text);
    font-size: 12px;
}

.task-popup-field-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 10px;
}

.task-popup-date-row {
    display: flex;
    gap: 6px;
}

.task-popup-clear {
    font-size: 11px;
    padding: 6px 8px;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.15);
    background: rgba(255, 255, 255, 0.04);
    color: var(--notion-text);
    cursor: pointer;
}

.deadline-toggle {
    display: inline-flex;
    background: rgba(255, 255, 255, 0.04);
    border-radius: 6px;
    padding: 2px;
    gap: 2px;
}

.deadline-toggle button {
    border: none;
    background: transparent;
    color: rgba(255, 255, 255, 0.7);
    padding: 4px 10px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    transition: background 150ms ease, color 150ms ease;
}

.deadline-toggle button.active {
    background: rgba(255, 255, 255, 0.12);
    color: var(--notion-text);
}

.matrix-selector {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 6px;
}

.matrix-selector-btn {
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.04);
    border-radius: 6px;
    padding: 6px 8px;
    color: var(--notion-text);
    font-size: 11px;
    cursor: pointer;
    transition: all 150ms ease;
}

.matrix-selector-btn.active {
    background: rgba(59, 130, 246, 0.2);
    border-color: rgba(59, 130, 246, 0.4);
    color: #bfdbfe;
}

.task-popup-feedback {
    font-size: 11px;
    padding: 6px 8px;
    border-radius: 4px;
}

.task-popup-feedback.success {
    background: rgba(34, 197, 94, 0.15);
    color: #86efac;
}

.task-popup-feedback.error {
    background: rgba(239, 68, 68, 0.15);
    color: #fecaca;
}

.task-popup-row {
    display: flex;
    align-items: center;
    gap: 12px;
}

.task-popup-label {
    font-size: 11px;
    color: var(--notion-text-muted);
    min-width: 50px;
}

.task-popup-value {
    font-size: 12px;
    color: var(--notion-text);
}

.task-popup-actions {
    display: flex;
    justify-content: space-between;
    gap: 10px;
    margin-top: 8px;
    padding: 10px 12px;
    border-top: 1px solid rgba(255, 255, 255, 0.06);
}

.task-popup-actions-left,
.task-popup-actions-right {
    display: flex;
    gap: 8px;
    align-items: center;
}

.task-popup-actions button {
    padding: 6px 12px;
    font-size: 11px;
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    color: var(--notion-text);
    cursor: pointer;
    transition: all 150ms ease;
}

.task-popup-actions button.primary {
    background: var(--notion-blue);
    border-color: var(--notion-blue);
    color: white;
}

.task-popup-actions button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.task-popup-actions button:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
}

/* Project Notes Toggle & Entry */
.project-notes-toggle {
    display: flex;
    align-items: center;
    gap: 6px;
    background: rgba(139, 92, 246, 0.1);
    border: 1px solid rgba(139, 92, 246, 0.2);
    border-radius: 6px;
    padding: 8px 12px;
    color: #a78bfa;
    font-size: 12px;
    cursor: pointer;
    transition: all 150ms ease;
    width: 100%;
}

.project-notes-toggle:hover {
    background: rgba(139, 92, 246, 0.15);
    border-color: rgba(139, 92, 246, 0.3);
}

.project-notes-entry {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 8px;
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.notes-entry-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.notes-entry-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text);
}

.notes-entry-hint {
    font-size: 10px;
    color: var(--notion-text-muted);
}

.notes-feedback {
    font-size: 11px;
    padding: 6px 10px;
    border-radius: 4px;
}

.notes-feedback.success {
    background: rgba(34, 197, 94, 0.15);
    color: #4ade80;
}

.notes-feedback.error {
    background: rgba(239, 68, 68, 0.15);
    color: #f87171;
}

.notes-editor-wrapper {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 6px;
    min-height: 100px;
}

.notes-editor-wrapper .rich-editor {
    min-height: 100px;
    padding: 10px;
}

.notes-entry-actions {
    display: flex;
    justify-content: flex-end;
}

.notes-submit-btn {
    padding: 8px 16px;
    font-size: 12px;
    font-weight: 500;
    background: rgba(139, 92, 246, 0.2);
    border: 1px solid rgba(139, 92, 246, 0.3);
    border-radius: 6px;
    color: #a78bfa;
    cursor: pointer;
    transition: all 150ms ease;
}

.notes-submit-btn:hover:not(:disabled) {
    background: rgba(139, 92, 246, 0.3);
    border-color: rgba(139, 92, 246, 0.4);
}

.notes-submit-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Project Date Editor */
.project-date-editor {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 8px;
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.date-editor-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.date-editor-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text);
}

.date-editor-close {
    background: none;
    border: none;
    color: var(--notion-text-muted);
    font-size: 20px;
    line-height: 1;
    cursor: pointer;
    padding: 0 4px;
    transition: color 150ms ease;
}

.date-editor-close:hover {
    color: var(--notion-text);
}

.date-editor-feedback {
    font-size: 11px;
    padding: 6px 10px;
    border-radius: 4px;
}

.date-editor-feedback.success {
    background: rgba(34, 197, 94, 0.15);
    color: #4ade80;
}

.date-editor-feedback.error {
    background: rgba(239, 68, 68, 0.15);
    color: #f87171;
}

.date-editor-fields {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

.date-editor-field {
    flex: 1;
    min-width: 150px;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.date-editor-label {
    font-size: 11px;
    font-weight: 600;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.date-editor-input {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    padding: 6px 8px;
    font-size: 12px;
    color: var(--notion-text);
    transition: border-color 150ms ease;
}

.date-editor-input:focus {
    outline: none;
    border-color: rgba(139, 92, 246, 0.5);
}

.date-editor-actions {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
}

.date-editor-actions button {
    padding: 6px 14px;
    background: rgba(255, 255, 255, 0.06);
    color: var(--notion-text);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 6px;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 150ms ease;
}

.date-editor-actions button:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
}

.date-editor-actions button.primary {
    background: rgba(139, 92, 246, 0.25);
    color: #a78bfa;
    border-color: rgba(139, 92, 246, 0.3);
}

.date-editor-actions button.primary:hover:not(:disabled) {
    background: rgba(139, 92, 246, 0.35);
    border-color: rgba(139, 92, 246, 0.5);
}

.date-editor-actions button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Board View */
.projects-board {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    padding: 4px;
    min-height: 200px;
}

.board-column {
    display: flex;
    flex-direction: column;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 8px;
    min-height: 100px;
}

.board-column-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.column-title {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--notion-text-muted);
}

.column-count {
    font-size: 11px;
    padding: 2px 6px;
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text-muted);
}

.board-column.overdue .column-title {
    color: #f87171;
}

.board-column.completed .column-title {
    color: #22c55e;
}

.board-column-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 8px;
}

.projects-board,
.projects-gantt {
    min-height: 0;
}

.board-card {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 8px;
    padding: 10px 12px;
    transition: all 150ms ease;
}

.board-card:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.15);
}

.board-card.timeline-overdue {
    border-left: 2px solid #ef4444;
}

.board-card.timeline-due-soon {
    border-left: 2px solid #fbbf24;
}

.board-card.timeline-active {
    border-left: 2px solid #22c55e;
}

.board-card.timeline-upcoming {
    border-left: 2px solid #3b82f6;
}

.board-card.timeline-completed {
    border-left: 2px solid #6b7280;
}

.board-card-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 8px;
    margin-bottom: 8px;
}

.board-card-title {
    margin: 0;
    font-size: 12px;
    font-weight: 500;
    color: var(--notion-text);
    line-height: 1.3;
}

.board-card-overdue {
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 4px;
    background: rgba(239, 68, 68, 0.15);
    color: #f87171;
    white-space: nowrap;
}

.board-card-stats {
    display: flex;
    gap: 8px;
    font-size: 10px;
    color: var(--notion-text-muted);
    margin-bottom: 8px;
}

.board-card-progress {
    display: flex;
    align-items: center;
    gap: 8px;
}

.board-card-progress-track {
    flex: 1;
    height: 4px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 2px;
    overflow: hidden;
}

.board-card-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6, #8b5cf6);
    transition: width 300ms ease;
}

.board-card-progress-label {
    font-size: 10px;
    color: var(--notion-text-muted);
    min-width: 28px;
    text-align: right;
}

/* ============================================
   Gantt Chart V2 - Full-Width Timeline Bars
   ============================================ */
.gantt-v2 {
    height: 100%;
    display: flex;
    flex-direction: column;
    background: var(--notion-bg);
    overflow: hidden;
}

.gantt-v2-empty {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    color: var(--notion-text-muted);
}

.gantt-v2-empty .gantt-empty-icon {
    font-size: 48px;
    opacity: 0.5;
}

.gantt-v2-empty h3 {
    margin: 0;
    font-size: 18px;
    color: var(--notion-text);
}

.gantt-v2-empty p {
    margin: 0;
    font-size: 14px;
}

/* Controls */
.gantt-v2-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 12px 16px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    flex-shrink: 0;
    flex-wrap: wrap;
}

/* Gantt Navigation */
.gantt-v2-nav {
    display: flex;
    align-items: center;
    gap: 8px;
}

.gantt-nav-btn {
    padding: 6px 12px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    color: var(--notion-text-secondary);
    font-size: 11px;
    cursor: pointer;
    transition: all 150ms ease;
    white-space: nowrap;
}

.gantt-nav-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.gantt-today-btn {
    padding: 6px 14px;
    background: var(--notion-blue);
    border: none;
    border-radius: 4px;
    color: white;
    font-size: 11px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
}

.gantt-today-btn:hover {
    background: var(--notion-blue-hover, #4f46e5);
}

.gantt-v2-zoom {
    display: flex;
    align-items: center;
    gap: 8px;
}

.gantt-v2-zoom .zoom-label {
    font-size: 12px;
    color: var(--notion-text-muted);
}

/* Legend hint */
.legend-hint {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 10px;
    color: var(--notion-text);
    padding: 4px 8px;
    background: rgba(59, 130, 246, 0.15);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: 4px;
    margin-left: 8px;
}

.legend-hint .hint-dismiss {
    padding: 0;
    width: 14px;
    height: 14px;
    background: transparent;
    border: none;
    color: var(--notion-text-muted);
    font-size: 10px;
    cursor: pointer;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.legend-hint .hint-dismiss:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
}

.gantt-v2-zoom button {
    padding: 6px 14px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text-secondary);
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    transition: all 150ms ease;
}

.gantt-v2-zoom button:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.gantt-v2-zoom button.active {
    background: rgba(59, 130, 246, 0.15);
    border-color: rgba(59, 130, 246, 0.3);
    color: #60a5fa;
}

.gantt-v2-legend {
    display: flex;
    gap: 16px;
}

.gantt-v2-legend .legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--notion-text-muted);
}

.gantt-v2-legend .legend-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.gantt-v2-legend .legend-dot.active {
    background: #22c55e;
}

.gantt-v2-legend .legend-dot.overdue {
    background: #ef4444;
}

.gantt-v2-legend .legend-dot.task {
    background: #a855f7;
    border: 2px solid #fff;
    box-sizing: border-box;
}

/* Timeline Header */
.gantt-v2-header {
    flex-shrink: 0;
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
}

.gantt-v2-timeline-markers {
    position: relative;
    height: 32px;
    overflow: hidden;
}

.gantt-v2-timeline-markers .timeline-marker {
    position: absolute;
    top: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    padding-left: 8px;
    border-left: 1px solid rgba(255, 255, 255, 0.08);
    font-size: 10px;
    color: var(--notion-text-muted);
}

.gantt-v2-timeline-markers .timeline-marker.is-month {
    font-weight: 600;
    color: var(--notion-text-secondary);
}

.gantt-v2-today {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 2px;
    background: #ef4444;
    z-index: 5;
}

.gantt-v2-today .today-label {
    position: absolute;
    top: 4px;
    left: 6px;
    font-size: 9px;
    font-weight: 600;
    color: #ef4444;
    white-space: nowrap;
    text-transform: uppercase;
}

/* Gantt Body */
.gantt-v2-body {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    position: relative;
    min-height: 0;
}

/* Drag Date Indicator */
.gantt-drag-date-indicator {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 2px;
    background: #60a5fa;
    z-index: 100;
    pointer-events: none;
}

.gantt-drag-date-indicator .drag-date-label {
    position: absolute;
    top: 8px;
    left: 8px;
    padding: 4px 10px;
    background: #3b82f6;
    color: white;
    font-size: 11px;
    font-weight: 600;
    border-radius: 4px;
    white-space: nowrap;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Row */
.gantt-v2-row {
    min-height: 52px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
    cursor: pointer;
    transition: background 150ms ease;
}

.gantt-v2-row:hover {
    background: rgba(255, 255, 255, 0.02);
}

.gantt-v2-row.is-selected {
    background: rgba(59, 130, 246, 0.08);
}

.gantt-v2-row.is-dragging {
    background: rgba(59, 130, 246, 0.12);
}

/* Timeline */
.gantt-v2-timeline {
    position: relative;
    height: 52px;
    padding: 8px 12px;
}

/* Task Markers */
.gantt-v2-task-marker {
    position: absolute;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #a855f7;
    border: 2px solid var(--notion-bg);
    z-index: 2;
    cursor: pointer;
    transition: all 150ms ease;
}

.gantt-v2-task-marker:hover {
    transform: translate(-50%, -50%) scale(1.3);
    z-index: 10;
}

.gantt-v2-task-marker.completed {
    background: #6b7280;
    opacity: 0.6;
}

.gantt-v2-task-marker.overdue {
    background: #ef4444;
    animation: pulse-marker 2s infinite;
}

.gantt-v2-task-marker.hard {
    border-color: #fbbf24;
    box-shadow: 0 0 0 2px rgba(251, 191, 36, 0.3);
}

@keyframes pulse-marker {
    0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
    50% { box-shadow: 0 0 0 4px rgba(239, 68, 68, 0); }
}

/* Bar */
.gantt-v2-bar {
    position: absolute;
    top: 8px;
    height: 36px;
    border-radius: 6px;
    border: 2px solid;
    display: flex;
    align-items: center;
    overflow: visible;
    cursor: grab;
    transition: box-shadow 150ms ease, transform 150ms ease;
    z-index: 3;
}

.gantt-v2-bar:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
    transform: translateY(-1px);
}

.gantt-v2-row.is-dragging .gantt-v2-bar {
    cursor: grabbing;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    z-index: 20;
}

/* Progress Fill */
.gantt-v2-bar .bar-progress {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px 0 0 4px;
    pointer-events: none;
}

/* Resize Handles */
.gantt-v2-bar .bar-handle {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 12px;
    cursor: ew-resize;
    z-index: 5;
    opacity: 0;
    transition: opacity 150ms ease;
}

.gantt-v2-bar:hover .bar-handle {
    opacity: 1;
}

.gantt-v2-bar .bar-handle::after {
    content: '';
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 16px;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 2px;
}

.gantt-v2-bar .bar-handle-start {
    left: -6px;
}

.gantt-v2-bar .bar-handle-start::after {
    left: 4px;
}

.gantt-v2-bar .bar-handle-end {
    right: -6px;
}

.gantt-v2-bar .bar-handle-end::after {
    right: 4px;
}

/* Bar Content */
.gantt-v2-bar .bar-content {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 12px;
    white-space: nowrap;
    overflow: hidden;
    position: relative;
    z-index: 1;
    width: 100%;
}

.gantt-v2-bar .bar-emoji {
    font-size: 16px;
    flex-shrink: 0;
}

.gantt-v2-bar .bar-title {
    font-size: 12px;
    font-weight: 600;
    color: white;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
    min-width: 0;
}

.gantt-v2-bar .bar-tasks {
    font-size: 10px;
    color: rgba(255, 255, 255, 0.8);
    background: rgba(0, 0, 0, 0.2);
    padding: 2px 6px;
    border-radius: 3px;
    flex-shrink: 0;
}

.gantt-v2-bar .bar-deadline {
    font-size: 10px;
    font-weight: 500;
    flex-shrink: 0;
}

.gantt-v2-bar .bar-days {
    font-size: 10px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 4px;
    background: rgba(0, 0, 0, 0.25);
    color: rgba(255, 255, 255, 0.9);
    flex-shrink: 0;
}

.gantt-v2-bar .bar-days.overdue {
    background: rgba(239, 68, 68, 0.4);
    color: #fca5a5;
}

.gantt-v2-bar .bar-days.soon {
    background: rgba(251, 191, 36, 0.4);
    color: #fde047;
}

/* No Dates Section */
.gantt-v2-no-dates-section {
    border-top: 1px solid var(--notion-border);
    margin-top: 8px;
    padding: 12px 16px;
}

.gantt-v2-no-dates-section .no-dates-header {
    margin-bottom: 8px;
}

.gantt-v2-no-dates-section .no-dates-label {
    font-size: 11px;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.gantt-v2-no-dates-section .no-dates-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.gantt-v2-no-dates-section .no-dates-item {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    cursor: pointer;
    transition: all 150ms ease;
}

.gantt-v2-no-dates-section .no-dates-item:hover {
    background: var(--notion-bg-hover);
    border-color: var(--notion-text-muted);
}

.gantt-v2-no-dates-section .no-dates-emoji {
    font-size: 14px;
}

.gantt-v2-no-dates-section .no-dates-title {
    font-size: 12px;
    color: var(--notion-text);
}

.gantt-v2-no-dates-section .no-dates-tasks {
    font-size: 10px;
    color: var(--notion-text-muted);
}

/* =====================================================
   Gantt Chart V3 - Notion-style with Sticky Sidebar
   ===================================================== */

.gantt-v3 {
    height: 100%;
    display: flex;
    flex-direction: column;
    background: var(--notion-bg);
    overflow: hidden;
}

/* Controls bar */
.gantt-v3-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 10px 16px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    flex-shrink: 0;
}

.gantt-v3-nav {
    display: flex;
    align-items: center;
    gap: 6px;
}

.gantt-v3-nav .gantt-nav-btn,
.gantt-v3-nav .gantt-today-btn {
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
    transition: background 120ms ease;
    border: 1px solid var(--notion-border);
    background: var(--notion-bg);
    color: var(--notion-text-secondary);
}

.gantt-v3-nav .gantt-nav-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.gantt-v3-nav .gantt-today-btn {
    background: var(--notion-blue);
    border-color: var(--notion-blue);
    color: white;
    font-weight: 500;
}

.gantt-v3-nav .gantt-today-btn:hover {
    background: var(--notion-blue-hover, #4f46e5);
}

.gantt-v3-zoom {
    display: flex;
    align-items: center;
    gap: 4px;
}

.gantt-v3-zoom button {
    padding: 5px 12px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text-secondary);
    border-radius: 4px;
    font-size: 11px;
    cursor: pointer;
    transition: all 120ms ease;
}

.gantt-v3-zoom button:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.gantt-v3-zoom button.active {
    background: rgba(59, 130, 246, 0.15);
    border-color: rgba(59, 130, 246, 0.3);
    color: #60a5fa;
}

/* Main grid container */
.gantt-v3-grid {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}

/* Header row */
.gantt-v3-header {
    display: flex;
    flex-shrink: 0;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
}

.gantt-v3-sidebar-header {
    flex-shrink: 0;
    padding: 8px 12px;
    font-size: 11px;
    font-weight: 600;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-right: 1px solid var(--notion-border);
    display: flex;
    align-items: flex-end;
}

.gantt-v3-timeline-header {
    flex: 1;
    overflow-x: auto;
    overflow-y: hidden;
    scrollbar-width: none;
}

.gantt-v3-timeline-header::-webkit-scrollbar {
    display: none;
}

.gantt-v3-timeline-scroll {
    position: relative;
    min-width: 100%;
}

/* Month headers */
.gantt-v3-months {
    position: relative;
    height: 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
}

.gantt-v3-month {
    position: absolute;
    top: 0;
    height: 100%;
    display: flex;
    align-items: center;
    padding-left: 8px;
    font-size: 11px;
    font-weight: 600;
    color: var(--notion-text-secondary);
    border-left: 1px solid rgba(255, 255, 255, 0.08);
    box-sizing: border-box;
}

/* Day headers */
.gantt-v3-days {
    display: flex;
    height: 22px;
}

.gantt-v3-day {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    color: var(--notion-text-muted);
    border-left: 1px solid rgba(255, 255, 255, 0.03);
    box-sizing: border-box;
}

.gantt-v3-day.is-weekend {
    background: rgba(255, 255, 255, 0.02);
    color: rgba(255, 255, 255, 0.3);
}

.gantt-v3-day.is-today {
    background: rgba(239, 68, 68, 0.15);
    color: #ef4444;
    font-weight: 600;
}

/* Body area */
.gantt-v3-body {
    flex: 1;
    display: flex;
    min-height: 0;
    overflow: hidden;
}

/* Fixed sidebar */
.gantt-v3-sidebar {
    flex-shrink: 0;
    overflow-y: auto;
    overflow-x: hidden;
    border-right: 1px solid var(--notion-border);
    background: var(--notion-bg);
    scrollbar-width: none; /* Hide scrollbar - synced with timeline */
}

.gantt-v3-sidebar::-webkit-scrollbar {
    display: none; /* Hide scrollbar - synced with timeline */
}

.gantt-v3-sidebar-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.03);
    cursor: pointer;
    transition: background 80ms ease;
}

.gantt-v3-sidebar-row:hover {
    background: rgba(255, 255, 255, 0.03);
}

.gantt-v3-sidebar-row.is-selected {
    background: rgba(59, 130, 246, 0.1);
}

.gantt-v3-sidebar-row.is-hovered {
    background: rgba(255, 255, 255, 0.04);
}

.gantt-v3-sidebar-row.no-dates {
    opacity: 0.6;
}

.gantt-v3-emoji {
    font-size: 14px;
    flex-shrink: 0;
}

.gantt-v3-status-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    flex-shrink: 0;
}

.gantt-v3-project-title {
    flex: 1;
    font-size: 12px;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.gantt-v3-task-count {
    font-size: 10px;
    color: var(--notion-text-muted);
    background: rgba(255, 255, 255, 0.06);
    padding: 2px 6px;
    border-radius: 3px;
    flex-shrink: 0;
}

.gantt-v3-no-dates-divider {
    padding: 8px 12px 4px;
    font-size: 10px;
    font-weight: 500;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.3px;
    border-top: 1px solid var(--notion-border);
    margin-top: 4px;
}

/* Timeline area (scrollable) */
.gantt-v3-timeline {
    flex: 1;
    overflow: auto;
    position: relative;
}

.gantt-v3-timeline::-webkit-scrollbar {
    height: 8px;
    width: 8px;
}

.gantt-v3-timeline::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 4px;
}

.gantt-v3-timeline::-webkit-scrollbar-corner {
    background: transparent;
}

/* Grid lines */
.gantt-v3-grid-lines {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
}

.gantt-v3-grid-line {
    position: absolute;
    top: 0;
    bottom: 0;
    border-left: 1px solid rgba(255, 255, 255, 0.03);
    box-sizing: border-box;
}

.gantt-v3-grid-line.is-weekend {
    background: rgba(255, 255, 255, 0.015);
}

.gantt-v3-grid-line.is-month {
    border-left-color: rgba(255, 255, 255, 0.08);
}

/* Today line */
.gantt-v3-today-line {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 2px;
    background: #ef4444;
    z-index: 10;
    pointer-events: none;
}

/* Drag indicator */
.gantt-v3-drag-indicator {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 100;
}

.gantt-v3-drag-date {
    position: absolute;
    top: 8px;
    transform: translateX(-50%);
    padding: 4px 10px;
    background: #3b82f6;
    color: white;
    font-size: 11px;
    font-weight: 500;
    border-radius: 4px;
    white-space: nowrap;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Row styling */
.gantt-v3-row {
    position: relative;
    border-bottom: 1px solid rgba(255, 255, 255, 0.03);
}

.gantt-v3-row.is-hovered {
    background: rgba(255, 255, 255, 0.02);
}

.gantt-v3-row.is-selected {
    background: rgba(59, 130, 246, 0.06);
}

.gantt-v3-row.no-dates {
    background: rgba(255, 255, 255, 0.01);
}

.gantt-v3-no-dates-spacer {
    border-top: 1px solid var(--notion-border);
}

/* Task markers */
.gantt-v3-task-marker {
    position: absolute;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 8px;
    height: 8px;
    background: #a855f7;
    border-radius: 50%;
    border: 2px solid var(--notion-bg);
    cursor: pointer;
    z-index: 5;
    transition: transform 100ms ease;
}

.gantt-v3-task-marker:hover {
    transform: translate(-50%, -50%) scale(1.3);
    z-index: 15;
}

.gantt-v3-task-marker.completed {
    background: #6b7280;
    opacity: 0.5;
}

.gantt-v3-task-marker.overdue {
    background: #ef4444;
}

/* Project bar */
.gantt-v3-bar {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    height: 24px;
    border-radius: 4px;
    border: 1px solid;
    cursor: pointer;
    z-index: 3;
    user-select: none;
}

.gantt-v3-bar:hover {
    z-index: 8;
}

.gantt-v3-bar.is-dragging {
    z-index: 20;
    opacity: 0.9;
}

/* Progress fill */
.gantt-v3-bar-progress {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px 0 0 3px;
    pointer-events: none;
}

/* Resize handles - Notion style */
.gantt-v3-bar-handle {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 8px;
    cursor: ew-resize;
    z-index: 10;
}

.gantt-v3-bar-handle::before {
    content: '';
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 12px;
    background: rgba(255, 255, 255, 0.4);
    border-radius: 1.5px;
    opacity: 0;
    transition: opacity 100ms ease;
}

.gantt-v3-bar:hover .gantt-v3-bar-handle::before,
.gantt-v3-bar.is-dragging .gantt-v3-bar-handle::before {
    opacity: 1;
}

.gantt-v3-bar-handle-start {
    left: 0;
    border-radius: 4px 0 0 4px;
}

.gantt-v3-bar-handle-start::before {
    left: 2px;
}

.gantt-v3-bar-handle-end {
    right: 0;
    border-radius: 0 4px 4px 0;
}

.gantt-v3-bar-handle-end::before {
    right: 2px;
}

/* Move handle (center of bar) */
.gantt-v3-bar-move {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 8px;
    right: 8px;
    cursor: grab;
}

.gantt-v3-bar-move:active {
    cursor: grabbing;
}

/* Bar content */
.gantt-v3-bar-content {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 0 10px;
    pointer-events: none;
}

.gantt-v3-bar-days {
    font-size: 10px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.85);
    background: rgba(0, 0, 0, 0.2);
    padding: 2px 6px;
    border-radius: 3px;
}

.gantt-v3-bar-days.overdue {
    background: rgba(239, 68, 68, 0.4);
    color: #fca5a5;
}

.gantt-v3-bar-days.soon {
    background: rgba(251, 191, 36, 0.4);
    color: #fde047;
}

/* =====================================================
   Time Log Widget V2 - Dark Theme, Clean Design
   ===================================================== */

.timelog-widget-v2 {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}

.timelog-header-v2 {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    flex-shrink: 0;
}

.timelog-header-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.timelog-title {
    font-size: 12px;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.timelog-header-right {
    display: flex;
    align-items: center;
    gap: 8px;
}

.timelog-view-toggle {
    display: flex;
    background: rgba(255, 255, 255, 0.04);
    border-radius: 8px;
    padding: 2px;
}

.timelog-view-btn {
    border: none;
    background: transparent;
    color: var(--notion-text-muted);
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    transition: all 150ms ease;
}

.timelog-view-btn:hover {
    color: var(--notion-text);
}

.timelog-view-btn.active {
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
}

.timelog-refresh-btn {
    width: 32px;
    height: 32px;
    border: none;
    background: rgba(255, 255, 255, 0.04);
    color: var(--notion-text-muted);
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    transition: all 150ms ease;
}

.timelog-refresh-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.timelog-scroll-area {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
}

.timelog-empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 48px 24px;
    text-align: center;
    color: var(--notion-text-muted);
    gap: 12px;
}

.timelog-empty-state .empty-icon {
    font-size: 32px;
    opacity: 0.6;
}

.timelog-empty-state h3 {
    margin: 0;
    color: var(--notion-text);
    font-size: 16px;
}

.timelog-empty-state p {
    margin: 0;
    font-size: 13px;
}

/* Gallery View */
.timelog-gallery {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.timelog-entry-card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 10px;
    padding: 14px 16px;
    display: flex;
    align-items: center;
    gap: 16px;
    transition: all 150ms ease;
}

.timelog-entry-card:hover {
    background: rgba(255, 255, 255, 0.04);
    border-color: rgba(255, 255, 255, 0.1);
}

.timelog-entry-card.is-active {
    border-left: 3px solid #22c55e;
    background: rgba(34, 197, 94, 0.05);
}

.timelog-entry-time-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 60px;
    flex-shrink: 0;
}

.timelog-entry-duration {
    font-size: 18px;
    font-weight: 700;
    color: var(--notion-text);
    font-family: 'JetBrains Mono', monospace;
}

.timelog-entry-range {
    font-size: 11px;
    color: var(--notion-text-muted);
    margin-top: 2px;
}

.timelog-entry-main {
    flex: 1;
    min-width: 0;
}

.timelog-entry-title {
    font-size: 14px;
    font-weight: 500;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.timelog-entry-date {
    font-size: 12px;
    color: var(--notion-text-muted);
    margin-top: 2px;
}

.timelog-entry-actions {
    display: flex;
    gap: 6px;
    opacity: 0;
    transition: opacity 150ms ease;
}

.timelog-entry-card:hover .timelog-entry-actions {
    opacity: 1;
}

.timelog-action-btn {
    width: 28px;
    height: 28px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(255, 255, 255, 0.04);
    color: var(--notion-text-muted);
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 150ms ease;
}

.timelog-action-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
}

.timelog-action-btn.danger:hover {
    background: rgba(239, 68, 68, 0.15);
    border-color: rgba(239, 68, 68, 0.3);
    color: #f87171;
}

/* Timeline View */
.timelog-timeline {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.timelog-day-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.timelog-day-header {
    font-size: 13px;
    font-weight: 600;
    color: var(--notion-text);
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.timelog-day-entries {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding-left: 12px;
    border-left: 2px solid rgba(255, 255, 255, 0.08);
}

.timelog-timeline-entry {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 8px;
    transition: background 150ms ease;
}

.timelog-timeline-entry:hover {
    background: rgba(255, 255, 255, 0.04);
}

.timelog-timeline-entry.is-active {
    background: rgba(34, 197, 94, 0.08);
}

.timelog-timeline-time {
    font-size: 12px;
    font-family: 'JetBrains Mono', monospace;
    color: var(--notion-text-muted);
    min-width: 100px;
}

.timelog-timeline-title {
    flex: 1;
    font-size: 13px;
    color: var(--notion-text);
}

.timelog-timeline-duration {
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text);
    font-family: 'JetBrains Mono', monospace;
    background: rgba(255, 255, 255, 0.06);
    padding: 2px 8px;
    border-radius: 4px;
}

/* Edit form */
.timelog-edit-form {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.timelog-edit-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.timelog-edit-field label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--notion-text-muted);
}

.timelog-edit-field input {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    padding: 8px 12px;
    color: var(--notion-text);
    font-size: 13px;
}

.timelog-edit-field input:focus {
    outline: none;
    border-color: rgba(255, 255, 255, 0.25);
}

.timelog-edit-actions {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
    margin-top: 4px;
}

.timelog-edit-btn {
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    transition: all 150ms ease;
}

.timelog-edit-btn.save {
    background: #22c55e;
    color: #fff;
}

.timelog-edit-btn.save:hover {
    background: #16a34a;
}

.timelog-edit-btn.cancel {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.timelog-edit-btn.cancel:hover {
    background: rgba(255, 255, 255, 0.12);
}

/* Calendar View Layout */
.calendar-shell {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.calendar-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    gap: 12px;
}

.calendar-layout-toggle {
    display: inline-flex;
    padding: 4px;
    gap: 4px;
    background: var(--notion-bg-secondary);
    border-radius: var(--radius-pill);
}

.calendar-layout-toggle button {
    border: none;
    background: transparent;
    color: var(--notion-text-muted);
    padding: 6px 14px;
    border-radius: var(--radius-pill);
    cursor: pointer;
    font-size: 13px;
    transition: all 150ms ease;
}

.calendar-layout-toggle button.active {
    background: var(--notion-blue);
    color: #fff;
}

.calendar-layout-toggle button:not(.active):hover {
    color: var(--notion-text);
}

.calendar-swap-btn {
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text);
    padding: 6px 12px;
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 13px;
    transition: background 150ms ease;
}

.calendar-swap-btn:hover {
    background: var(--notion-bg-hover);
}

.calendar-view {
    flex: 1;
    display: flex;
    overflow: hidden;
}

.calendar-view.is-reversed {
    flex-direction: row-reverse;
}

.calendar-sidebar {
    width: 300px;
    min-width: 280px;
    border-right: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    padding: 20px;
    overflow-y: auto;
}

.calendar-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    padding: 24px;
}

.calendar-sidebar.is-task-panel {
    background: var(--notion-bg);
}

.calendar-main.is-calendar-focus {
    padding: 16px 40px;
}

/* Mini Calendar */
.calendar-resizer {
    width: 6px;
    cursor: col-resize;
    background: transparent;
    position: relative;
    flex: 0 0 auto;
}

.calendar-resizer::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 50%;
    width: 2px;
    transform: translateX(-50%);
    background: var(--notion-border);
    opacity: 0.4;
}

.calendar-resizer.is-active::after {
    background: var(--notion-blue);
    opacity: 0.9;
}

.calendar-mini {
    background: var(--notion-bg);
    border-radius: var(--radius-lg);
    padding: 16px;
    border: 1px solid var(--notion-border);
}

.calendar-mini-large {
    padding: 24px;
}

.calendar-mini-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
}

.calendar-month-year {
    font-size: 14px;
    font-weight: 600;
    color: var(--notion-text);
}

.calendar-nav-btn {
    width: 28px;
    height: 28px;
    border: none;
    background: transparent;
    color: var(--notion-text-muted);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 14px;
    transition: all 150ms ease;
}

.calendar-nav-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.calendar-mini-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 2px;
}

.calendar-day-header {
    text-align: center;
    font-size: 11px;
    font-weight: 500;
    color: var(--notion-text-muted);
    padding: 8px 0;
    text-transform: uppercase;
}

.calendar-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    color: var(--notion-text);
    border-radius: var(--radius-sm);
    cursor: pointer;
    position: relative;
    transition: all 150ms ease;
}

.calendar-day:hover {
    background: var(--notion-bg-hover);
}

.calendar-day.empty {
    cursor: default;
}

.calendar-day.today {
    font-weight: 600;
    color: var(--notion-blue);
}

.calendar-day.selected {
    background: var(--notion-blue);
    color: white;
}

.calendar-day.has-tasks::after {
    content: '';
    position: absolute;
    bottom: 4px;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    height: 4px;
    background: var(--notion-blue);
    border-radius: 50%;
}

.calendar-day.selected.has-tasks::after {
    background: white;
}

.calendar-day.drop-target {
    outline: 2px solid var(--notion-blue);
    outline-offset: 2px;
}

.calendar-day-dot {
    position: absolute;
    bottom: 4px;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    height: 4px;
    background: var(--notion-blue);
    border-radius: 50%;
}

.calendar-today-btn {
    width: 100%;
    margin-top: 16px;
    padding: 8px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 13px;
    transition: all 150ms ease;
}

.calendar-today-btn:hover {
    background: var(--notion-bg-hover);
}

/* ============================================
   Full Calendar Grid View (Notion-style)
   ============================================ */
.calendar-full-view {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.calendar-full-view .calendar-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 20px;
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
    gap: 16px;
    flex-wrap: wrap;
}

.calendar-nav-group {
    display: flex;
    align-items: center;
    gap: 8px;
}

/* Calendar Date Picker Wrapper */
.calendar-date-picker-wrapper {
    position: relative;
}

.calendar-range-label {
    font-size: 16px;
    font-weight: 600;
    color: var(--notion-text);
    min-width: 200px;
    text-align: center;
    background: transparent;
    border: 1px solid transparent;
    border-radius: var(--radius-md);
    padding: 6px 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 150ms ease;
}

.calendar-range-label:hover {
    background: var(--notion-bg-hover);
    border-color: var(--notion-border);
}

.calendar-range-label.is-active {
    background: var(--notion-bg-secondary);
    border-color: var(--notion-blue);
}

.calendar-picker-arrow {
    font-size: 10px;
    color: var(--notion-text-muted);
    transition: transform 200ms ease;
}

.calendar-range-label.is-active .calendar-picker-arrow {
    color: var(--notion-blue);
}

.calendar-picker-dropdown {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-top: 8px;
    z-index: 100;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    border-radius: var(--radius-lg);
    animation: dropdownSlideIn 150ms ease-out;
}

@keyframes dropdownSlideIn {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(-8px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

.calendar-picker-dropdown .calendar-mini {
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
}

.calendar-today-btn-inline {
    padding: 6px 12px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 13px;
    transition: all 150ms ease;
    margin-left: 8px;
}

.calendar-today-btn-inline:hover {
    background: var(--notion-bg-hover);
}

/* ========================================
   Calendar View Range Toggle
   Clean segmented control with slider
   ======================================== */

.calendar-view-range-toggle {
    display: flex;
    align-items: center;
    gap: 2px;
    background: rgba(255, 255, 255, 0.04);
    padding: 3px;
    border-radius: 10px;
    border: 1px solid var(--notion-border);
}

.calendar-view-range-toggle button {
    padding: 6px 14px;
    border: none;
    background: transparent;
    color: var(--notion-text-muted);
    border-radius: 7px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    transition: all 150ms ease;
    white-space: nowrap;
    position: relative;
}

.calendar-view-range-toggle button:hover:not(.active) {
    color: var(--notion-text);
    background: rgba(255, 255, 255, 0.06);
}

.calendar-view-range-toggle button.active {
    background: var(--notion-blue);
    color: white;
    box-shadow: 0 2px 8px rgba(35, 131, 226, 0.3);
}

/* Separator between main buttons and custom */
.calendar-view-range-toggle .calendar-custom-range-toggle {
    display: flex;
    align-items: center;
    gap: 8px;
    padding-left: 8px;
    margin-left: 4px;
    border-left: 1px solid rgba(255, 255, 255, 0.1);
}

.calendar-view-range-toggle .calendar-custom-range-toggle button.active {
    background: linear-gradient(135deg, #8b5cf6, #6366f1);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.35);
}

/* List view options inline */
.calendar-list-view-toggle {
    display: flex;
    align-items: center;
    gap: 6px;
}

.list-view-options {
    display: flex;
    align-items: center;
    gap: 8px;
    padding-left: 8px;
    border-left: 1px solid rgba(255, 255, 255, 0.1);
    margin-left: 4px;
}

/* Custom days slider */
.calendar-custom-days-slider,
.list-days-slider {
    -webkit-appearance: none;
    appearance: none;
    width: 80px;
    height: 4px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 2px;
    outline: none;
    cursor: pointer;
}

.calendar-custom-days-slider::-webkit-slider-thumb,
.list-days-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 14px;
    height: 14px;
    background: var(--notion-blue);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(35, 131, 226, 0.4);
    transition: transform 150ms ease;
}

.calendar-custom-days-slider::-webkit-slider-thumb:hover,
.list-days-slider::-webkit-slider-thumb:hover {
    transform: scale(1.15);
}

.calendar-custom-days-slider::-moz-range-thumb,
.list-days-slider::-moz-range-thumb {
    width: 14px;
    height: 14px;
    background: var(--notion-blue);
    border-radius: 50%;
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 6px rgba(35, 131, 226, 0.4);
}

.list-days-label {
    font-size: 11px;
    font-weight: 600;
    color: var(--notion-text-muted);
    min-width: 24px;
}

.list-columns-btn {
    padding: 4px 8px !important;
    font-size: 14px !important;
}

.calendar-layout-controls {
    display: flex;
    gap: 8px;
}

/* Calendar Inbox Toggles (Overdue/Unscheduled) */
.calendar-inbox-toggles {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-left: auto;
}

.calendar-inbox-toggle {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: transparent;
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 12px;
    color: var(--notion-text-secondary);
    transition: all 150ms ease;
}

.calendar-inbox-toggle:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.calendar-inbox-toggle.is-active {
    background: var(--notion-bg-active);
    border-color: var(--notion-text-muted);
    color: var(--notion-text);
}

.calendar-inbox-toggle.overdue {
    border-color: rgba(239, 68, 68, 0.3);
}

.calendar-inbox-toggle.overdue .toggle-count {
    color: #fca5a5;
}

.calendar-inbox-toggle.overdue.is-active {
    background: rgba(239, 68, 68, 0.15);
    border-color: rgba(239, 68, 68, 0.4);
}

.calendar-inbox-toggle.unscheduled {
    border-color: rgba(148, 163, 184, 0.3);
}

.calendar-inbox-toggle .toggle-count {
    font-weight: 600;
}

.calendar-inbox-toggle .toggle-label {
    font-weight: 500;
}

/* Calendar Inbox Dropdown Panel */
.calendar-inbox-panel {
    position: absolute;
    top: 100%;
    right: 20px;
    z-index: 100;
    margin-top: 4px;
    min-width: 320px;
    max-width: 400px;
    max-height: 400px;
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-lg);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    overflow: hidden;
}

.inbox-panel-content {
    display: flex;
    flex-direction: column;
    max-height: 400px;
}

.inbox-panel-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 16px;
    background: var(--notion-bg);
    border-bottom: 1px solid var(--notion-border);
}

.inbox-panel-icon {
    font-size: 16px;
}

.inbox-panel-title {
    flex: 1;
    font-size: 14px;
    font-weight: 600;
    color: var(--notion-text);
}

.inbox-panel-close {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    color: var(--notion-text-muted);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 150ms ease;
}

.inbox-panel-close:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.inbox-panel-hint {
    padding: 8px 16px;
    font-size: 11px;
    color: var(--notion-text-muted);
    background: var(--notion-bg);
    border-bottom: 1px solid var(--notion-border);
}

.inbox-panel-items {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.inbox-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: background 150ms ease;
}

.inbox-item:hover {
    background: var(--notion-bg-hover);
}

.inbox-item.inbox-project {
    border-left: 3px solid #f59e0b;
}

.inbox-item.inbox-task {
    border-left: 3px solid var(--notion-border);
}

.inbox-item.inbox-task.is-urgent {
    border-left-color: #ef4444;
}

.inbox-item-emoji {
    font-size: 18px;
    flex-shrink: 0;
}

.inbox-item-info {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.inbox-item-title {
    font-size: 13px;
    font-weight: 500;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.inbox-item-meta {
    font-size: 11px;
    color: var(--notion-text-muted);
}

.inbox-item-action {
    padding: 4px 10px;
    background: rgba(59, 130, 246, 0.15);
    border: none;
    border-radius: var(--radius-sm);
    color: #60a5fa;
    font-size: 11px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
    flex-shrink: 0;
}

.inbox-item-action:hover {
    background: rgba(59, 130, 246, 0.25);
}

.inbox-urgent-badge {
    color: #ef4444;
    font-size: 12px;
}

.inbox-panel-more {
    padding: 8px 16px;
    text-align: center;
    font-size: 11px;
    color: var(--notion-text-muted);
}

/* Calendar Bottom Bar */
.calendar-bottom-bar {
    display: flex;
    align-items: flex-end;
    gap: 12px;
    padding: 0;
    background: var(--notion-bg);
    border-top: 1px solid var(--notion-border);
    flex-shrink: 0;
}

.calendar-bottom-bar .dashboard-quick-add-bar {
    flex: 1;
}

.calendar-bottom-bar .capture-note-toggle.is-active {
    background: rgba(59, 130, 246, 0.15);
    border-color: rgba(59, 130, 246, 0.3);
    color: #60a5fa;
}

/* Calendar Notes Slide Panel */
.calendar-notes-panel {
    position: fixed;
    top: 0;
    right: -400px;
    width: 400px;
    height: 100%;
    background: var(--notion-bg-secondary);
    border-left: 1px solid var(--notion-border);
    box-shadow: -4px 0 16px rgba(0, 0, 0, 0.2);
    transition: right 250ms ease;
    z-index: 200;
    display: flex;
    flex-direction: column;
}

.calendar-notes-panel.is-open {
    right: 0;
}

/* Make calendar toolbar position relative for dropdown */
.calendar-full-view .calendar-toolbar {
    position: relative;
}

.calendar-grid-layout {
    flex: 1;
    display: flex;
    overflow: hidden;
}

.calendar-grid-layout.is-reversed {
    flex-direction: row-reverse;
}

.calendar-task-sidebar {
    display: flex;
    flex-direction: column;
    background: var(--notion-bg-secondary);
    border-right: 1px solid var(--notion-border);
    overflow: hidden;
    transition: background 150ms ease, border-color 150ms ease;
}

.calendar-task-sidebar.is-drop-target {
    background: rgba(59, 130, 246, 0.1);
    border-color: rgba(59, 130, 246, 0.5);
}

.calendar-grid-layout.is-reversed .calendar-task-sidebar {
    border-right: none;
    border-left: 1px solid var(--notion-border);
}

.calendar-sidebar-header {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px 16px;
    border-bottom: 1px solid var(--notion-border);
}

.calendar-sidebar-title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.calendar-sidebar-header h3 {
    margin: 0;
    font-size: 14px;
    font-weight: 600;
    color: var(--notion-text);
}

.calendar-sidebar-date {
    font-size: 12px;
    color: var(--notion-text-muted);
}

/* Compact toolbar for sidebars */
.widget-toolbar.is-compact {
    gap: 4px;
    padding: 0;
    background: transparent;
}

.widget-toolbar.is-compact .task-organizer {
    gap: 2px;
}

.widget-toolbar.is-compact .filter-summary-text {
    display: none;
}

/* Sidebar search bar */
.sidebar-search-bar {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
}

.sidebar-search-bar .search-input {
    flex: 1;
}

.sidebar-search-bar .search-results-count {
    font-size: 11px;
    color: var(--notion-text-muted);
    white-space: nowrap;
}

.sidebar-search-bar .search-results-count.has-results {
    color: var(--notion-blue);
}

.sidebar-search-bar .search-results-count.no-results {
    color: var(--notion-red);
}

/* Sidebar organizer panels */
.sidebar-organizer-pane {
    padding: 12px;
    background: var(--notion-bg);
    border-bottom: 1px solid var(--notion-border);
}

.sidebar-organizer-pane .task-organizer-section {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.sidebar-organizer-pane .filter-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.sidebar-organizer-pane .filter-cell {
    flex: 1;
    min-width: 0;
}

.sidebar-organizer-pane .widget-switch {
    flex-wrap: wrap;
}

/* Compact single-row filter layout */
.sidebar-organizer-pane.compact-filters {
    padding: 8px 12px;
}

.sidebar-organizer-pane.compact-filters .task-organizer-section {
    gap: 6px;
}

.filter-row-compact {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px;
}

.filter-row-compact .widget-switch {
    flex-shrink: 0;
}

.filter-row-compact .widget-switch button {
    padding: 4px 8px;
    font-size: 11px;
}

.sidebar-organizer-pane.compact-filters .task-organizer-section-footer {
    padding-top: 6px;
    margin-top: 2px;
}

.sidebar-organizer-pane .task-organizer-section-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 8px;
    border-top: 1px solid var(--notion-border);
    margin-top: 4px;
}

.sidebar-organizer-pane .task-organizer-section-meta {
    font-size: 11px;
    color: var(--notion-text-muted);
    flex: 1;
}

.sidebar-organizer-pane .task-organizer-close {
    background: transparent;
    border: none;
    color: var(--notion-text-muted);
    cursor: pointer;
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    font-size: 12px;
}

.sidebar-organizer-pane .task-organizer-close:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.calendar-task-sidebar .calendar-day-view {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
}

.calendar-task-sidebar .calendar-day-title {
    display: none;
}

.calendar-grid-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: var(--notion-bg);
}

/* Full Calendar Grid */
.calendar-full-grid {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.calendar-grid-header {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
}

.calendar-grid-day-header {
    padding: 12px 8px;
    text-align: center;
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.calendar-grid-body {
    flex: 1;
    display: grid;
    overflow-y: auto;
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
}

.calendar-grid-body.month {
    grid-template-columns: repeat(7, 1fr);
    grid-template-rows: repeat(6, 1fr);
}

.calendar-grid-body.week {
    grid-template-columns: repeat(7, 1fr);
    grid-template-rows: 1fr;
}

.calendar-grid-body.day {
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
}

.calendar-grid-cell {
    border-right: 1px solid var(--notion-border);
    border-bottom: 1px solid var(--notion-border);
    padding: 4px;
    display: flex;
    flex-direction: column;
    min-height: 100px;
    cursor: pointer;
    transition: background 150ms ease, transform 150ms ease, box-shadow 150ms ease;
    overflow: hidden;
    position: relative;
}

.calendar-grid-cell:nth-child(7n) {
    border-right: none;
}

.calendar-grid-cell:hover {
    background: var(--notion-bg-hover);
}

.calendar-grid-cell.is-selected {
    background: rgba(35, 131, 226, 0.1);
}

.calendar-grid-cell.is-other-month {
    opacity: 0.4;
}

.calendar-grid-cell.is-today {
    background: rgba(35, 131, 226, 0.05);
}

.calendar-grid-cell.is-drop-target {
    background: rgba(35, 131, 226, 0.15);
    outline: 2px solid var(--notion-blue);
    outline-offset: -2px;
    transform: scale(1.02) translateY(-2px);
    box-shadow: 0 4px 12px rgba(35, 131, 226, 0.25);
    z-index: 10;
    transition: transform 150ms ease, box-shadow 150ms ease, background 150ms ease;
}

.calendar-cell-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 4px 6px;
    margin-bottom: 4px;
}

.calendar-cell-date {
    font-size: 13px;
    font-weight: 500;
    color: var(--notion-text);
}

.calendar-cell-date.today-badge {
    background: var(--notion-blue);
    color: white;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 12px;
}

.calendar-cell-count {
    font-size: 11px;
    color: var(--notion-text-muted);
    background: var(--notion-bg-secondary);
    padding: 2px 6px;
    border-radius: 8px;
}

.calendar-cell-tasks {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
    overflow-y: auto;
    padding: 0 4px;
}

/* Task chips on calendar */
.calendar-task-chip {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 3px 6px;
    background: var(--notion-bg-secondary);
    border-radius: var(--radius-sm);
    font-size: 11px;
    cursor: pointer;
    transition: all 150ms ease;
    white-space: nowrap;
    overflow: hidden;
    border-left: 3px solid var(--notion-blue);
}

.calendar-task-chip:hover {
    background: var(--notion-bg-active);
}

.calendar-task-chip.is-complete {
    opacity: 0.5;
    border-left-color: #22c55e;
}

.calendar-task-chip.is-complete .calendar-task-title {
    text-decoration: line-through;
}

.calendar-task-chip.is-hard {
    border-left-color: #ef4444;
}

.calendar-task-chip.is-urgent-important {
    border-left-color: #f59e0b;
    background: rgba(245, 158, 11, 0.1);
}

.calendar-task-status {
    flex-shrink: 0;
}

.calendar-task-title {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--notion-text);
}

.calendar-task-more {
    padding: 4px 6px;
    font-size: 11px;
    color: var(--notion-text-muted);
    text-align: center;
    cursor: pointer;
}

.calendar-task-more:hover {
    color: var(--notion-blue);
}

/* Overdue task chip styling */
.calendar-task-chip.is-overdue {
    border-left-color: #ef4444;
    background: rgba(239, 68, 68, 0.1);
}

.calendar-task-chip.is-overdue:hover {
    background: rgba(239, 68, 68, 0.15);
}

.calendar-overdue-badge {
    flex-shrink: 0;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #ef4444;
    color: white;
    border-radius: 50%;
    font-size: 10px;
    font-weight: 700;
}

/* Project chips on calendar */
.calendar-project-chip {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(99, 102, 241, 0.1));
    border: 1px solid rgba(139, 92, 246, 0.3);
    border-radius: var(--radius-sm);
    font-size: 11px;
    cursor: pointer;
    transition: all 150ms ease;
    white-space: nowrap;
    overflow: hidden;
    margin-bottom: 2px;
}

.calendar-project-chip:hover {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.25), rgba(99, 102, 241, 0.2));
    border-color: rgba(139, 92, 246, 0.5);
}

.calendar-project-chip.is-overdue {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.1));
    border-color: rgba(239, 68, 68, 0.4);
}

.calendar-project-chip.is-overdue:hover {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.25), rgba(220, 38, 38, 0.2));
}

.calendar-project-icon {
    font-size: 12px;
    flex-shrink: 0;
}

.calendar-project-title {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--notion-text);
    font-weight: 500;
}

.calendar-project-progress {
    flex-shrink: 0;
    font-size: 10px;
    color: var(--notion-text-secondary);
    background: rgba(255, 255, 255, 0.1);
    padding: 1px 4px;
    border-radius: 3px;
}

/* Calendar cell content (tasks + projects) */
.calendar-cell-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
    overflow-y: auto;
    padding: 0 4px;
    flex: 1;
}

/* Calendar cell counts */
.calendar-cell-counts {
    display: flex;
    gap: 4px;
}

.calendar-cell-count.tasks-count {
    background: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
}

.calendar-cell-count.projects-count {
    background: rgba(139, 92, 246, 0.2);
    color: #a78bfa;
    font-size: 10px;
}

/* ============================================
   Calendar Sidebar - Overdue Section
   ============================================ */
.calendar-overdue-section {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.08), rgba(220, 38, 38, 0.04));
    border: 1px solid rgba(239, 68, 68, 0.2);
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 16px;
}

.calendar-overdue-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    font-weight: 600;
    color: #f87171;
    margin: 0;
    cursor: pointer;
    padding: 8px 0;
    transition: all 150ms ease;
    user-select: none;
}

.calendar-overdue-title:hover {
    color: #fca5a5;
}

.calendar-overdue-section.is-collapsed .calendar-overdue-title {
    margin-bottom: 0;
}

.section-toggle-icon {
    font-size: 10px;
    opacity: 0.7;
    width: 12px;
    text-align: center;
}

.overdue-label {
    flex: 1;
}

.overdue-count {
    background: rgba(239, 68, 68, 0.2);
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 11px;
}

.calendar-overdue-content {
    margin-top: 8px;
}

.overdue-icon {
    font-size: 14px;
}

/* Overdue Projects in Sidebar */
.calendar-overdue-projects {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-bottom: 10px;
}

.calendar-overdue-project-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.2);
    border-radius: 6px;
    cursor: pointer;
    transition: all 150ms ease;
}

.calendar-overdue-project-item:hover {
    background: rgba(239, 68, 68, 0.15);
    border-color: rgba(239, 68, 68, 0.3);
}

.overdue-project-emoji {
    font-size: 16px;
    flex-shrink: 0;
}

.overdue-project-info {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.overdue-project-title {
    font-size: 12px;
    font-weight: 500;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.overdue-project-meta {
    font-size: 10px;
    color: #f87171;
}

.overdue-reschedule-btn {
    flex-shrink: 0;
    padding: 4px 8px;
    background: transparent;
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
    transition: all 150ms ease;
}

.overdue-reschedule-btn:hover {
    background: rgba(239, 68, 68, 0.2);
}

/* Overdue Tasks in Sidebar */
.calendar-overdue-tasks {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.calendar-overdue-task-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 8px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 4px;
    cursor: pointer;
    transition: all 150ms ease;
}

.calendar-overdue-task-item:hover {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.12);
}

.overdue-task-info {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 1px;
}

.overdue-task-title {
    font-size: 12px;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.overdue-task-meta {
    font-size: 10px;
    color: #f87171;
}

.overdue-today-btn {
    flex-shrink: 0;
    padding: 3px 8px;
    background: rgba(59, 130, 246, 0.15);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: 4px;
    font-size: 10px;
    font-weight: 500;
    color: #60a5fa;
    cursor: pointer;
    transition: all 150ms ease;
}

.overdue-today-btn:hover {
    background: rgba(59, 130, 246, 0.25);
    border-color: rgba(59, 130, 246, 0.5);
}

.calendar-overdue-more {
    font-size: 11px;
    color: var(--notion-text-muted);
    text-align: center;
    padding: 6px;
}

/* ============================================
   Calendar Sidebar - Unscheduled Section
   ============================================ */
.calendar-unscheduled-section {
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 16px;
}

.calendar-unscheduled-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    font-weight: 600;
    color: var(--notion-text-secondary);
    margin: 0;
    cursor: pointer;
    padding: 8px 0;
    transition: all 150ms ease;
    user-select: none;
}

.calendar-unscheduled-title:hover {
    color: var(--notion-text);
}

.calendar-unscheduled-section.is-collapsed .calendar-unscheduled-title {
    margin-bottom: 0;
}

.unscheduled-label {
    flex: 1;
}

.unscheduled-count {
    background: rgba(99, 102, 241, 0.2);
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 11px;
    color: #a5b4fc;
}

.calendar-unscheduled-content {
    margin-top: 8px;
}

.unscheduled-icon {
    font-size: 14px;
}

.calendar-unscheduled-hint {
    font-size: 10px;
    color: var(--notion-text-muted);
    margin-bottom: 10px;
}

.calendar-unscheduled-tasks {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
}

.calendar-unscheduled-task-item {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    font-size: 11px;
    color: var(--notion-text);
    cursor: grab;
    transition: all 150ms ease;
    max-width: 100%;
}

.calendar-unscheduled-task-item:hover {
    background: var(--notion-bg-hover);
    border-color: rgba(99, 102, 241, 0.3);
}

.calendar-unscheduled-task-item.is-urgent {
    border-color: rgba(239, 68, 68, 0.3);
    background: rgba(239, 68, 68, 0.05);
}

.unscheduled-task-title {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 150px;
}

.unscheduled-urgent-badge {
    font-size: 10px;
}

.calendar-unscheduled-more {
    font-size: 10px;
    color: var(--notion-text-muted);
    padding: 4px;
    width: 100%;
    text-align: center;
}

/* ============================================
   Calendar Day Projects Section
   ============================================ */
.calendar-day-projects {
    padding: 12px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(99, 102, 241, 0.04));
    border: 1px solid rgba(139, 92, 246, 0.2);
    border-radius: 8px;
    margin-bottom: 12px;
}

.calendar-day-projects-title {
    font-size: 12px;
    font-weight: 600;
    color: #a78bfa;
    margin: 0 0 8px 0;
}

.calendar-day-project-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 10px;
    background: rgba(139, 92, 246, 0.1);
    border-radius: 6px;
    cursor: pointer;
    transition: all 150ms ease;
    margin-bottom: 6px;
}

.calendar-day-project-item:last-child {
    margin-bottom: 0;
}

.calendar-day-project-item:hover {
    background: rgba(139, 92, 246, 0.15);
}

.day-project-emoji {
    font-size: 18px;
}

.day-project-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.day-project-title {
    font-size: 13px;
    font-weight: 500;
    color: var(--notion-text);
}

.day-project-meta {
    font-size: 11px;
    color: var(--notion-text-secondary);
}

/* Day view specific */
.calendar-grid-body.day .calendar-grid-cell {
    min-height: auto;
    flex: 1;
}

.calendar-grid-body.day .calendar-cell-header {
    padding: 12px;
    border-bottom: 1px solid var(--notion-border);
}

.calendar-grid-body.day .calendar-cell-date {
    font-size: 18px;
    font-weight: 600;
}

.calendar-grid-body.day .calendar-cell-tasks {
    padding: 12px;
    gap: 6px;
}

.calendar-grid-body.day .calendar-task-chip {
    padding: 8px 12px;
    font-size: 13px;
}

/* Week view specific */
.calendar-grid-body.week .calendar-grid-cell {
    min-height: 400px;
}

.calendar-grid-body.week .calendar-cell-tasks {
    gap: 4px;
}

.calendar-grid-body.week .calendar-task-chip {
    padding: 4px 8px;
    font-size: 12px;
}

/* List View - 1 Column */
.calendar-full-grid.list {
    --list-days: 7;
    --list-columns: 1;
}

.calendar-grid-body.list {
    display: flex;
    flex-direction: column;
    gap: 0;
    overflow-y: auto;
    scroll-behavior: smooth;
}

.calendar-grid-body.list .calendar-grid-cell {
    min-height: auto;
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    padding: 12px 16px;
    border-bottom: 1px solid var(--notion-border);
    border-right: none;
    flex-shrink: 0;
}

.calendar-grid-body.list .calendar-cell-header {
    width: 100px;
    flex-shrink: 0;
    padding-right: 12px;
    border-right: 1px solid var(--notion-border);
    margin-right: 12px;
}

.calendar-grid-body.list .calendar-cell-date {
    font-size: 12px;
    font-weight: 600;
    display: block;
    line-height: 1.3;
}

.calendar-grid-body.list .calendar-cell-date.today-badge {
    color: var(--notion-blue);
}

.calendar-grid-body.list .calendar-cell-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
    align-content: flex-start;
    padding: 0;
}

.calendar-grid-body.list .calendar-task-chip {
    padding: 6px 10px;
    font-size: 12px;
    white-space: nowrap;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
}

.calendar-grid-body.list .calendar-project-chip {
    padding: 6px 10px;
    font-size: 12px;
    white-space: nowrap;
}

/* List View - 2 Columns (Zigzag: Thu/Fri, Sat/Sun, Mon/Tue...) */
.calendar-full-grid.list.list-2col .calendar-grid-body.list {
    display: grid;
    grid-template-columns: 1fr 1fr;
    overflow-y: auto;
    gap: 0;
}

.calendar-full-grid.list.list-2col .calendar-grid-body.list .calendar-grid-cell {
    border-right: 1px solid var(--notion-border);
}

.calendar-full-grid.list.list-2col .calendar-grid-body.list .calendar-grid-cell:nth-child(2n) {
    border-right: none;
}

.calendar-full-grid.list.list-2col .calendar-grid-body.list .calendar-cell-header {
    width: 90px;
    padding-right: 10px;
    margin-right: 10px;
}

.calendar-full-grid.list.list-2col .calendar-grid-body.list .calendar-cell-date {
    font-size: 11px;
}

/* List View Options in Toolbar */
.calendar-list-view-toggle {
    display: flex;
    align-items: center;
    gap: 0;
}

.list-view-options {
    display: flex;
    align-items: center;
    gap: 8px;
    padding-left: 8px;
    margin-left: 4px;
    border-left: 1px solid var(--notion-border);
}

.list-days-slider {
    width: 60px;
    height: 4px;
    -webkit-appearance: none;
    appearance: none;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
    cursor: pointer;
}

.list-days-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--notion-accent, #6366f1);
    cursor: pointer;
    transition: transform 150ms ease;
}

.list-days-slider::-webkit-slider-thumb:hover {
    transform: scale(1.2);
}

.list-days-slider::-moz-range-thumb {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--notion-accent, #6366f1);
    cursor: pointer;
    border: none;
}

.list-days-label {
    font-size: 11px;
    color: var(--notion-text-secondary);
    min-width: 24px;
}

.list-columns-btn {
    padding: 4px 8px;
    background: transparent;
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    color: var(--notion-text-secondary);
    font-size: 14px;
    cursor: pointer;
    transition: all 150ms ease;
}

.list-columns-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.list-columns-btn.active {
    background: var(--notion-blue);
    border-color: var(--notion-blue);
    color: white;
}

/* Timeline Navigation Bar for List View */
.calendar-timeline-scrubber {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    padding: 10px 16px;
    background: var(--notion-bg-secondary);
    border-top: 1px solid var(--notion-border);
    flex-shrink: 0;
}

.timeline-nav-btn {
    padding: 8px 16px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text-secondary);
    font-size: 12px;
    cursor: pointer;
    transition: all 150ms ease;
    white-space: nowrap;
}

.timeline-nav-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
    border-color: var(--notion-text-muted);
}

.timeline-today-btn {
    padding: 8px 20px;
    background: var(--notion-blue);
    border: none;
    border-radius: 6px;
    color: white;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
}

.timeline-today-btn:hover {
    background: var(--notion-blue-hover, #4f46e5);
    transform: translateY(-1px);
}

.timeline-hint-dismissable {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 10px;
    background: rgba(59, 130, 246, 0.15);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: 4px;
    animation: hintPulse 2s ease-in-out infinite;
}

@keyframes hintPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.timeline-hint-text {
    font-size: 11px;
    color: var(--notion-text);
    white-space: nowrap;
}

.timeline-hint-dismiss {
    padding: 0;
    width: 16px;
    height: 16px;
    background: transparent;
    border: none;
    color: var(--notion-text-muted);
    font-size: 10px;
    cursor: pointer;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 150ms ease;
}

.timeline-hint-dismiss:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
}

/* Custom Day Range View */
.calendar-full-grid.custom {
    --custom-days: 7;
}

.calendar-grid-body.custom {
    grid-template-columns: repeat(var(--custom-days), 1fr);
    grid-template-rows: 1fr;
    gap: 0;
}

.calendar-grid-body.custom .calendar-grid-cell {
    min-height: 300px;
    display: flex;
    flex-direction: column;
}

.calendar-grid-body.custom .calendar-cell-header {
    padding: 8px;
    text-align: center;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    flex-shrink: 0;
}

.calendar-grid-body.custom .calendar-cell-date {
    font-size: 12px;
    font-weight: 600;
    display: block;
}

.calendar-grid-body.custom .calendar-cell-content {
    flex: 1;
    overflow-y: auto;
    padding: 6px;
}

.calendar-grid-body.custom .calendar-task-chip {
    padding: 4px 6px;
    font-size: 11px;
    margin-bottom: 4px;
}

.calendar-grid-body.custom .calendar-project-chip {
    padding: 4px 6px;
    font-size: 11px;
    margin-bottom: 4px;
}

/* Custom day slider */
.calendar-custom-range-toggle {
    display: flex;
    align-items: center;
    gap: 8px;
}

.calendar-custom-days-slider {
    width: 80px;
    height: 4px;
    -webkit-appearance: none;
    appearance: none;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
    cursor: pointer;
}

.calendar-custom-days-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: var(--notion-accent, #6366f1);
    cursor: pointer;
    transition: transform 150ms ease;
}

.calendar-custom-days-slider::-webkit-slider-thumb:hover {
    transform: scale(1.2);
}

.calendar-custom-days-slider::-moz-range-thumb {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: var(--notion-accent, #6366f1);
    cursor: pointer;
    border: none;
}

/* Calendar Day View */
.calendar-day-view {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.calendar-day-view.is-compact .calendar-day-title {
    font-size: 18px;
}

.calendar-day-view.is-compact .calendar-quick-add {
    margin-top: 12px;
}

.calendar-day-title {
    margin: 0 0 8px;
    font-size: 24px;
    font-weight: 600;
    color: var(--notion-text);
}

.calendar-day-subtitle {
    margin: 0 0 16px;
    font-size: 13px;
    color: var(--notion-text-muted);
}

/* Overdue mode styling */
.calendar-day-view.showing-overdue .calendar-day-title {
    color: #f87171;
}

.calendar-day-view.showing-overdue .calendar-day-subtitle {
    color: #fca5a5;
}

/* Unscheduled mode styling */
.calendar-day-view.showing-unscheduled .calendar-day-title {
    color: #60a5fa;
}

.calendar-day-view.showing-unscheduled .calendar-day-subtitle {
    color: #93c5fd;
}

.calendar-tasks {
    flex: 1;
    overflow-y: auto;
    margin-bottom: 16px;
}

.calendar-quick-add {
    flex-shrink: 0;
    padding: 12px 16px;
    border-top: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
}

.calendar-quick-add .quick-add-wrapper {
    margin: 0;
}

.calendar-quick-add .quick-add-input-row {
    background: var(--notion-bg);
    border-radius: var(--radius-md);
}

/* Completion Toast */
.completion-toast {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #4CAF50;
    color: white;
    padding: 20px 40px;
    border-radius: var(--radius-lg);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    z-index: 10000;
    font-size: 18px;
    font-weight: 600;
    text-align: center;
    animation: toastFadeIn 0.3s ease-out;
}

@keyframes toastFadeIn {
    from {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
}

/* ============================================
   Focus Stack Panel - Cross-Window Drop Zone
   ============================================ */
.focus-stack-panel {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 320px;
    max-height: 400px;
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-lg);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    z-index: 9000;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: all 200ms ease;
}

.focus-stack-panel.is-drop-active,
.focus-stack-panel.is-receiving-drag {
    border-color: rgba(168, 85, 247, 0.6);
    box-shadow: 
        0 0 0 2px rgba(168, 85, 247, 0.3),
        0 8px 32px rgba(0, 0, 0, 0.4);
}

.focus-stack-panel.is-drop-active {
    transform: scale(1.02);
}

.focus-stack-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    border-bottom: 1px solid var(--notion-border);
    background: rgba(168, 85, 247, 0.08);
}

.focus-stack-header h4 {
    margin: 0;
    font-size: 14px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--notion-text);
}

.focus-stack-icon {
    font-size: 16px;
}

.focus-stack-count {
    background: rgba(168, 85, 247, 0.25);
    color: #d8b4fe;
    font-size: 11px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 10px;
    min-width: 20px;
    text-align: center;
}

.focus-stack-clear {
    padding: 4px 10px;
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: var(--radius-sm);
    color: var(--notion-text-muted);
    font-size: 12px;
    cursor: pointer;
    transition: all 150ms ease;
}

.focus-stack-clear:hover {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.25);
    color: var(--notion-text);
}

.focus-stack-drop-zone {
    padding: 24px 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    background: rgba(168, 85, 247, 0.1);
    border: 2px dashed rgba(168, 85, 247, 0.4);
    margin: 12px;
    border-radius: var(--radius-md);
    animation: pulseDropZone 1.5s ease-in-out infinite;
}

@keyframes pulseDropZone {
    0%, 100% {
        border-color: rgba(168, 85, 247, 0.4);
        background: rgba(168, 85, 247, 0.1);
    }
    50% {
        border-color: rgba(168, 85, 247, 0.7);
        background: rgba(168, 85, 247, 0.15);
    }
}

.drop-zone-icon {
    font-size: 24px;
}

.drop-zone-text {
    font-size: 13px;
    color: #d8b4fe;
    text-align: center;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.focus-stack-list {
    list-style: none;
    margin: 0;
    padding: 8px;
    overflow-y: auto;
    flex: 1;
    max-height: 280px;
}

.focus-stack-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--radius-sm);
    margin-bottom: 4px;
    transition: all 150ms ease;
}

.focus-stack-item:hover {
    background: rgba(255, 255, 255, 0.06);
}

.focus-stack-item:last-child {
    margin-bottom: 0;
}

.focus-stack-item-title {
    font-size: 13px;
    color: var(--notion-text);
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: 8px;
}

.focus-stack-item-actions {
    display: flex;
    gap: 4px;
}

.focus-stack-item-open,
.focus-stack-item-remove {
    padding: 4px 6px;
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 12px;
    transition: all 150ms ease;
    opacity: 0.6;
}

.focus-stack-item-open:hover,
.focus-stack-item-remove:hover {
    background: rgba(255, 255, 255, 0.1);
    opacity: 1;
}

.focus-stack-empty {
    padding: 20px 16px;
    margin: 0;
    font-size: 13px;
    color: var(--notion-text-muted);
    text-align: center;
}

/* Cross-Window Drag Indicator */
.cross-window-drag-indicator {
    position: fixed;
    top: 16px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, rgba(168, 85, 247, 0.95), rgba(139, 92, 246, 0.95));
    color: white;
    padding: 12px 24px;
    border-radius: var(--radius-lg);
    box-shadow: 0 4px 24px rgba(168, 85, 247, 0.4);
    z-index: 10000;
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 14px;
    animation: dragIndicatorSlide 0.3s ease-out;
}

@keyframes dragIndicatorSlide {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

.drag-indicator-icon {
    font-size: 18px;
}

.drag-indicator-text {
    font-weight: 600;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.drag-indicator-hint {
    font-size: 12px;
    opacity: 0.85;
    padding-left: 12px;
    border-left: 1px solid rgba(255, 255, 255, 0.3);
}

/* Calendar drop target enhancement for cross-window drag */
.calendar-grid-cell.is-cross-window-target {
    transition: transform 150ms ease, box-shadow 150ms ease, background 150ms ease;
}

.calendar-grid-cell.is-cross-window-target:hover {
    background: rgba(168, 85, 247, 0.2) !important;
    outline: 2px solid rgba(168, 85, 247, 0.8) !important;
    outline-offset: -2px;
    transform: scale(1.03) translateY(-3px);
    box-shadow: 0 6px 16px rgba(168, 85, 247, 0.3);
    z-index: 10;
}

/* Project item enhancement for cross-window drag */
.project-item.is-drop-target.is-cross-window-target {
    background: rgba(168, 85, 247, 0.2);
    box-shadow: inset 0 0 0 1px rgba(168, 85, 247, 0.5);
}

/* Cross-window clickable drop targets */
.project-item.is-cross-window-target,
.calendar-grid-cell.is-cross-window-target {
    cursor: pointer;
    position: relative;
}

.project-item.is-cross-window-target {
    background: rgba(168, 85, 247, 0.12);
    border: 1px dashed rgba(168, 85, 247, 0.4);
    animation: crossWindowPulse 1.5s ease-in-out infinite;
}

.calendar-grid-cell.is-cross-window-target {
    background: rgba(168, 85, 247, 0.08) !important;
    outline: 2px dashed rgba(168, 85, 247, 0.5) !important;
    outline-offset: -2px;
}

.calendar-grid-cell.is-cross-window-target:hover {
    background: rgba(168, 85, 247, 0.2) !important;
    outline-color: rgba(168, 85, 247, 0.8) !important;
}

.project-item.is-cross-window-target:hover {
    background: rgba(168, 85, 247, 0.25);
    border-color: rgba(168, 85, 247, 0.7);
}

@keyframes crossWindowPulse {
    0%, 100% {
        border-color: rgba(168, 85, 247, 0.4);
    }
    50% {
        border-color: rgba(168, 85, 247, 0.7);
    }
}

/* Cross-window drop hint text */
.cross-window-drop-hint {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 10px;
    color: #d8b4fe;
    background: rgba(168, 85, 247, 0.3);
    padding: 2px 6px;
    border-radius: 3px;
    white-space: nowrap;
    pointer-events: none;
}

/* Focus stack drop button styling */
.focus-stack-drop-button {
    width: 100%;
    cursor: pointer;
    transition: all 150ms ease;
    border: none;
    text-align: center;
}

.focus-stack-drop-button:hover {
    background: rgba(168, 85, 247, 0.2);
    border-color: rgba(168, 85, 247, 0.6);
    transform: scale(1.02);
}

.focus-stack-drop-button:active {
    transform: scale(0.98);
}

/* Widget Focus Stack Panel */
.widget-focus-stack-panel {
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    margin: 8px;
    padding: 8px;
    font-size: 12px;
}

.widget-focus-stack-panel.is-drop-active {
    border-color: rgba(168, 85, 247, 0.6);
    background: rgba(168, 85, 247, 0.1);
}

.widget-focus-stack-panel .focus-stack-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 6px;
}

.widget-focus-stack-panel .focus-stack-title {
    font-weight: 500;
    color: var(--notion-text-secondary);
}

.widget-focus-stack-panel .focus-stack-clear {
    background: none;
    border: none;
    color: var(--notion-text-tertiary);
    cursor: pointer;
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 10px;
}

.widget-focus-stack-panel .focus-stack-clear:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text-primary);
}

.widget-focus-stack-panel .focus-stack-items {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.widget-focus-stack-panel .focus-stack-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 8px;
    background: var(--notion-bg-primary);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: background 150ms ease;
}

.widget-focus-stack-panel .focus-stack-item:hover {
    background: var(--notion-bg-hover);
}

.widget-focus-stack-panel .focus-stack-item.is-active {
    background: rgba(168, 85, 247, 0.15);
    border-left: 2px solid #a855f7;
}

.widget-focus-stack-panel .focus-stack-item-title {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--notion-text-primary);
}

.widget-focus-stack-panel .focus-stack-item-remove {
    background: none;
    border: none;
    color: var(--notion-text-tertiary);
    cursor: pointer;
    padding: 2px 4px;
    font-size: 10px;
    opacity: 0;
    transition: opacity 150ms ease;
}

.widget-focus-stack-panel .focus-stack-item:hover .focus-stack-item-remove {
    opacity: 1;
}

.widget-focus-stack-panel .focus-stack-item-remove:hover {
    color: #ef4444;
}

.widget-focus-stack-panel .focus-stack-drop-hint {
    text-align: center;
    padding: 8px;
    color: #a855f7;
    font-size: 11px;
    border-top: 1px dashed rgba(168, 85, 247, 0.3);
    margin-top: 6px;
}

/* Widget Focus Drop Zone (shown when dragging) */
.widget-focus-drop-zone {
    position: fixed;
    bottom: 60px;
    left: 50%;
    transform: translateX(-50%);
    min-width: 200px;
    height: 0;
    overflow: hidden;
    transition: height 200ms ease, padding 200ms ease;
    z-index: 9999;
}

.widget-focus-drop-zone.is-active {
    height: auto;
    padding: 16px 24px;
    background: linear-gradient(135deg, rgba(168, 85, 247, 0.95), rgba(139, 92, 246, 0.95));
    border-radius: var(--radius-lg);
    box-shadow: 0 4px 20px rgba(168, 85, 247, 0.4);
}

.widget-focus-drop-zone .focus-drop-zone-content {
    display: flex;
    align-items: center;
    gap: 8px;
    color: white;
    font-weight: 500;
    white-space: nowrap;
}

.widget-focus-drop-zone .focus-drop-icon {
    font-size: 18px;
}

/* Widget cross-window drop overlay */
.widget-surface.is-receiving-drag {
    position: relative;
}

.widget-cross-window-drop-overlay {
    position: absolute;
    inset: 0;
    background: rgba(168, 85, 247, 0.15);
    backdrop-filter: blur(2px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    cursor: pointer;
    border-radius: var(--radius-lg);
}

.widget-cross-window-drop-overlay .drop-overlay-content {
    background: linear-gradient(135deg, rgba(168, 85, 247, 0.95), rgba(139, 92, 246, 0.95));
    color: white;
    padding: 16px 24px;
    border-radius: var(--radius-lg);
    box-shadow: 0 4px 20px rgba(168, 85, 247, 0.4);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    text-align: center;
    max-width: 80%;
    animation: dropOverlayPulse 1.5s ease-in-out infinite;
}

@keyframes dropOverlayPulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 4px 20px rgba(168, 85, 247, 0.4);
    }
    50% {
        transform: scale(1.02);
        box-shadow: 0 6px 24px rgba(168, 85, 247, 0.5);
    }
}

.widget-cross-window-drop-overlay .drop-icon {
    font-size: 28px;
}

.widget-cross-window-drop-overlay .drop-text {
    font-size: 14px;
    font-weight: 500;
}

/* ============================================
   Split View Sub-Toggle (List/Gantt)
   ============================================ */
.split-view-sub-toggle {
    display: flex;
    gap: 4px;
    margin-left: auto;
    margin-right: 12px;
}

.split-view-sub-toggle button {
    padding: 4px 8px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text-muted);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 12px;
    transition: all 150ms ease;
}

.split-view-sub-toggle button:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.split-view-sub-toggle button.active {
    background: var(--notion-bg-active);
    color: var(--notion-text);
    border-color: var(--notion-blue);
}

/* ============================================
   Gantt Chart Styles
   ============================================ */
.gantt-section {
    padding: 24px;
    overflow: auto;
}

.gantt-container {
    min-height: 400px;
    display: flex;
    flex-direction: column;
}

.gantt-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 400px;
    color: var(--notion-text-muted);
    text-align: center;
}

.gantt-empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
}

.gantt-empty h3 {
    margin: 0 0 8px;
    color: var(--notion-text);
}

.gantt-empty p {
    margin: 0;
}

.gantt-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--notion-border);
}

.gantt-zoom-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}

.gantt-zoom-label {
    font-size: 12px;
    color: var(--notion-text-muted);
    margin-right: 4px;
}

.gantt-zoom-controls button {
    padding: 6px 12px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text-muted);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 12px;
    transition: all 150ms ease;
}

.gantt-zoom-controls button:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.gantt-zoom-controls button.active {
    background: var(--notion-blue);
    color: white;
    border-color: var(--notion-blue);
}

.gantt-legend {
    display: flex;
    gap: 16px;
}

.gantt-legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: var(--notion-text-muted);
}

.gantt-legend-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.gantt-legend-dot.active { background: #3b82f6; }
.gantt-legend-dot.overdue { background: #ef4444; }
.gantt-legend-dot.completed { background: #22c55e; }

.gantt-chart {
    flex: 1;
    display: flex;
    flex-direction: column;
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.gantt-header {
    display: flex;
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
}

.gantt-labels-header {
    width: 240px;
    flex-shrink: 0;
    padding: 12px 16px;
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-right: 1px solid var(--notion-border);
}

.gantt-timeline-header {
    flex: 1;
    position: relative;
    height: 40px;
}

.gantt-time-marker {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 11px;
    color: var(--notion-text-muted);
    white-space: nowrap;
}

.gantt-time-marker.is-month {
    font-weight: 500;
}

.gantt-body {
    flex: 1;
    position: relative;
    overflow-y: auto;
    overflow-x: auto;
    touch-action: pan-x pan-y;
    -webkit-overflow-scrolling: touch;
}

.gantt-today-line {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 2px;
    background: #ef4444;
    z-index: 10;
    pointer-events: none;
}

.gantt-today-label {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 10px;
    color: #ef4444;
    white-space: nowrap;
    background: var(--notion-bg);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
}

.gantt-row {
    display: flex;
    border-bottom: 1px solid var(--notion-border);
    cursor: pointer;
    transition: background 150ms ease;
}

.gantt-row:hover,
.gantt-row.is-hovered {
    background: var(--notion-bg-hover);
}

.gantt-row.is-selected {
    background: var(--notion-bg-active);
}

.gantt-label {
    width: 240px;
    flex-shrink: 0;
    padding: 12px 16px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    border-right: 1px solid var(--notion-border);
}

.gantt-project-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.gantt-project-meta {
    font-size: 11px;
    color: var(--notion-text-muted);
}

.gantt-timeline {
    flex: 1;
    position: relative;
    min-height: 48px;
}

.gantt-bar {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    height: 24px;
    border-radius: 4px;
    background: #3b82f6;
    overflow: hidden;
    display: flex;
    align-items: center;
    transition: all 200ms ease;
}

.gantt-bar.active { background: #3b82f6; }
.gantt-bar.upcoming { background: #6b7280; }
.gantt-bar.overdue { background: #ef4444; }
.gantt-bar.completed { background: #22c55e; }

.gantt-bar-progress {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.3);
}

.gantt-bar-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 0 8px;
    font-size: 10px;
    color: white;
    white-space: nowrap;
    position: relative;
    z-index: 1;
}

.gantt-bar-label {
    font-weight: 500;
}

.gantt-bar-days {
    opacity: 0.8;
}

.gantt-no-dates {
    position: absolute;
    top: 50%;
    left: 16px;
    transform: translateY(-50%);
    font-size: 12px;
    color: var(--notion-text-muted);
    font-style: italic;
}

.gantt-task-marker {
    position: absolute;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #f59e0b;
    border: 2px solid var(--notion-bg);
    z-index: 5;
}

.gantt-task-marker.completed {
    background: #22c55e;
}

.gantt-task-marker.hard {
    background: #ef4444;
}

/* ============================================
   Eisenhower Matrix Styles
   ============================================ */
.matrix-section {
    padding: 24px;
    overflow: auto;
}

.eisenhower-matrix {
    display: flex;
    flex-direction: column;
    height: 100%;
    min-height: 600px;
}

.matrix-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--notion-border);
}

.matrix-toolbar-left {
    display: flex;
    align-items: center;
    gap: 16px;
}

.matrix-project-filter,
.timelog-project-filter,
.writing-project-filter {
    padding: 8px 12px;
    border: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    color: var(--notion-text);
    border-radius: var(--radius-md);
    font-size: 13px;
    cursor: pointer;
}

.matrix-show-completed,
.timelog-show-completed {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--notion-text-muted);
    cursor: pointer;
}

.matrix-show-completed input,
.timelog-show-completed input {
    cursor: pointer;
}

.matrix-toolbar-right {
    display: flex;
    align-items: center;
    gap: 16px;
}

.matrix-stats {
    display: flex;
    gap: 16px;
}

.matrix-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 12px;
    border-radius: var(--radius-md);
    background: var(--notion-bg-secondary);
}

.matrix-stat-count {
    font-size: 18px;
    font-weight: 600;
    color: var(--stat-color, var(--notion-text));
}

.matrix-stat-label {
    font-size: 10px;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.matrix-grid {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 16px;
    position: relative;
}

.matrix-axis-label {
    position: absolute;
    font-size: 11px;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    display: flex;
    justify-content: space-between;
}

.matrix-axis-urgent {
    top: -20px;
    left: 0;
    right: 0;
}

.matrix-axis-important {
    top: 0;
    bottom: 0;
    left: -24px;
    writing-mode: vertical-lr;
    transform: rotate(180deg);
}

.matrix-row {
    display: flex;
    gap: 16px;
    flex: 1;
}

.matrix-quadrant {
    flex: 1;
    display: flex;
    flex-direction: column;
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    overflow: hidden;
    transition: all 200ms ease;
}

.matrix-quadrant.is-drop-target {
    border-color: var(--quadrant-color);
    box-shadow: 0 0 0 2px var(--quadrant-color);
}

.matrix-quadrant-header {
    padding: 12px 16px;
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
    border-left: 3px solid var(--quadrant-color);
}

.matrix-quadrant-title {
    display: flex;
    align-items: center;
    gap: 8px;
}

.matrix-quadrant-icon {
    font-size: 16px;
}

.matrix-quadrant-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--notion-text);
}

.matrix-quadrant-count {
    margin-left: auto;
    font-size: 12px;
    color: var(--notion-text-muted);
    background: var(--notion-bg);
    padding: 2px 8px;
    border-radius: 10px;
}

.matrix-quadrant-subtitle {
    font-size: 11px;
    color: var(--notion-text-muted);
    margin-top: 4px;
}

.matrix-quadrant-body {
    flex: 1;
    padding: 12px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
}

.matrix-quadrant-empty {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--notion-text-muted);
    font-size: 13px;
    font-style: italic;
    border: 2px dashed var(--notion-border);
    border-radius: var(--radius-md);
    min-height: 80px;
}

.matrix-task-card {
    padding: 10px 12px;
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    cursor: grab;
    transition: all 150ms ease;
}

.matrix-task-card:hover {
    background: var(--notion-bg-hover);
    border-color: var(--notion-text-muted);
}

.matrix-task-card.is-dragging {
    opacity: 0.5;
}

.matrix-task-card.is-complete {
    opacity: 0.6;
}

.matrix-task-card.is-complete .matrix-task-title {
    text-decoration: line-through;
}

.matrix-task-card.has-hard-deadline {
    border-left: 3px solid #ef4444;
}

.matrix-task-title {
    font-size: 13px;
    font-weight: 500;
    color: var(--notion-text);
    margin-bottom: 6px;
}

.matrix-task-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 11px;
}

.matrix-task-date {
    color: var(--notion-text-muted);
}

.matrix-task-date.is-overdue {
    color: #ef4444;
}

.matrix-task-hard {
    color: #ef4444;
    font-weight: bold;
}

.matrix-task-status {
    color: var(--notion-text-muted);
    background: var(--notion-bg);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
}

.matrix-empty-overlay {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(25, 25, 25, 0.8);
    border-radius: var(--radius-md);
}

.matrix-empty-content {
    text-align: center;
}

.matrix-empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
}

.matrix-empty-content h3 {
    margin: 0 0 8px;
    color: var(--notion-text);
}

.matrix-empty-content p {
    margin: 0;
    color: var(--notion-text-muted);
}

/* ============================================
   Task Time Log View Styles
   ============================================ */
.timelogs-section {
    padding: 24px;
    overflow: auto;
}

.task-timelog-view {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.timelog-view-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 400px;
    color: var(--notion-text-muted);
}

.timelog-view-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--notion-border);
}

.timelog-toolbar-left {
    display: flex;
    align-items: center;
    gap: 16px;
}

.timelog-sort-select {
    padding: 8px 12px;
    border: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    color: var(--notion-text);
    border-radius: var(--radius-md);
    font-size: 13px;
    cursor: pointer;
}

.timelog-toolbar-right {
    display: flex;
    align-items: center;
    gap: 16px;
}

.timelog-view-toggle {
    display: flex;
    gap: 4px;
}

.timelog-view-toggle button {
    padding: 6px 12px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text-muted);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 12px;
    transition: all 150ms ease;
}

.timelog-view-toggle button:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.timelog-view-toggle button.active {
    background: var(--notion-blue);
    color: white;
    border-color: var(--notion-blue);
}

.timelog-view-stats {
    display: flex;
    gap: 24px;
    margin-bottom: 24px;
    padding: 16px;
    background: var(--notion-bg-secondary);
    border-radius: var(--radius-md);
}

.timelog-stat {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.timelog-stat-value {
    font-size: 24px;
    font-weight: 600;
    color: var(--notion-text);
}

.timelog-stat-label {
    font-size: 11px;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.timelog-view-content {
    flex: 1;
    overflow-y: auto;
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
}

.timelog-task-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.timelog-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 300px;
    color: var(--notion-text-muted);
    text-align: center;
}

.timelog-empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
}

.timelog-empty h3 {
    margin: 0 0 8px;
    color: var(--notion-text);
}

.timelog-empty p {
    margin: 0;
}

.timelog-task-card {
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.timelog-task-card.is-complete {
    opacity: 0.7;
}

.timelog-task-header {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    background: var(--notion-bg-secondary);
    cursor: pointer;
    transition: background 150ms ease;
}

.timelog-task-header:hover {
    background: var(--notion-bg-hover);
}

.timelog-task-info {
    flex: 1;
    min-width: 0;
}

.timelog-task-title {
    font-size: 14px;
    font-weight: 500;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.timelog-task-meta {
    display: flex;
    gap: 12px;
    margin-top: 4px;
    font-size: 12px;
    color: var(--notion-text-muted);
}

.timelog-task-stats {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 4px;
    margin-right: 12px;
}

.timelog-task-time {
    display: flex;
    align-items: baseline;
    gap: 4px;
}

.timelog-task-time-value {
    font-size: 16px;
    font-weight: 600;
    color: var(--notion-text);
}

.timelog-task-estimate {
    font-size: 12px;
    color: var(--notion-text-muted);
}

.timelog-task-progress {
    width: 80px;
    height: 4px;
    background: var(--notion-bg);
    border-radius: 2px;
    overflow: hidden;
}

.timelog-task-progress-fill {
    height: 100%;
    background: var(--notion-blue);
    transition: width 300ms ease;
}

.timelog-task-sessions {
    font-size: 11px;
    color: var(--notion-text-muted);
}

.timelog-expand-icon {
    font-size: 12px;
    color: var(--notion-text-muted);
}

.timelog-task-logs {
    padding: 16px;
    background: var(--notion-bg);
    border-top: 1px solid var(--notion-border);
}

.timelog-no-logs {
    color: var(--notion-text-muted);
    font-style: italic;
    font-size: 13px;
}

.timelog-log-entry {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 8px 0;
    border-bottom: 1px solid var(--notion-border);
    font-size: 13px;
}

.timelog-log-entry:last-of-type {
    border-bottom: none;
}

.timelog-log-date {
    width: 80px;
    color: var(--notion-text-muted);
}

.timelog-log-times {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
}

.timelog-log-start,
.timelog-log-end {
    color: var(--notion-text);
}

.timelog-log-separator {
    color: var(--notion-text-muted);
}

.timelog-log-duration {
    font-weight: 500;
    color: var(--notion-text);
}

.timelog-open-task {
    margin-top: 12px;
    padding: 8px 12px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-blue);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 13px;
    transition: all 150ms ease;
}

.timelog-open-task:hover {
    background: var(--notion-bg-hover);
}

/* Timeline View */
.timelog-timeline {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.timelog-day-group {
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.timelog-day-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
}

.timelog-day-date {
    font-size: 14px;
    font-weight: 600;
    color: var(--notion-text);
}

.timelog-day-total {
    font-size: 14px;
    font-weight: 500;
    color: var(--notion-blue);
}

.timelog-day-entries {
    padding: 8px 0;
}

.timelog-timeline-entry {
    display: flex;
    align-items: center;
    padding: 10px 16px;
    cursor: pointer;
    transition: background 150ms ease;
}

.timelog-timeline-entry:hover {
    background: var(--notion-bg-hover);
}

.timelog-timeline-time {
    width: 140px;
    font-size: 13px;
    color: var(--notion-text-muted);
}

.timelog-timeline-task {
    flex: 1;
    font-size: 13px;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.timelog-timeline-duration {
    font-size: 13px;
    font-weight: 500;
    color: var(--notion-text);
}

/* ============================================
   Projects Workspace Styles
   ============================================ */
.projects-workspace {
    flex: 1;
    display: flex;
    overflow: hidden;
}

/* Project Selection Sidebar */
.projects-selector {
    width: 280px;
    min-width: 280px;
    background: linear-gradient(180deg, var(--notion-bg-secondary) 0%, var(--notion-bg) 100%);
    border-right: 1px solid var(--notion-border);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.projects-selector-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    border-bottom: 1px solid var(--notion-border);
}

.projects-selector-header h3 {
    margin: 0;
    font-size: 14px;
    font-weight: 600;
    color: var(--notion-text);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.projects-selector-list {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.project-selector-item {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding: 12px;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 10px;
    cursor: pointer;
    text-align: left;
    margin-bottom: 4px;
    transition: all 150ms ease;
}

.project-selector-item:hover {
    background: var(--notion-bg-hover);
    border-color: var(--notion-border);
}

.project-selector-item.active {
    background: rgba(99, 102, 241, 0.12);
    border-color: rgba(99, 102, 241, 0.3);
}

.project-selector-main {
    display: flex;
    align-items: center;
    gap: 10px;
}

.project-selector-item .project-emoji {
    font-size: 20px;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.project-selector-info {
    flex: 1;
    min-width: 0;
}

.project-name {
    display: block;
    font-size: 14px;
    font-weight: 500;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.project-meta {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--notion-text-secondary);
    margin-top: 2px;
}

.urgent-badge {
    display: inline-flex;
    align-items: center;
    gap: 2px;
    padding: 1px 5px;
    background: rgba(239, 68, 68, 0.15);
    border-radius: 4px;
    color: #fca5a5;
    font-size: 10px;
}

.project-deadline {
    font-size: 10px;
    color: var(--notion-text-muted);
    padding: 2px 6px;
    background: var(--notion-bg-active);
    border-radius: 4px;
    align-self: flex-start;
    margin-left: 38px;
}

.project-progress-mini {
    height: 3px;
    background: var(--notion-bg-active);
    border-radius: 2px;
    overflow: hidden;
    margin-left: 38px;
}

.project-progress-mini .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #6366f1, #8b5cf6);
    border-radius: 2px;
    transition: width 300ms ease;
}

/* Project Workspace Main Area */
.project-workspace-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-width: 0;
}

.project-workspace-header {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 16px 20px;
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
    flex-wrap: wrap;
}

.project-title-section {
    display: flex;
    align-items: center;
    gap: 12px;
}

.project-emoji-large {
    font-size: 32px;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--notion-bg-active);
    border-radius: 10px;
}

.project-title-info h2 {
    margin: 0 0 4px 0;
    font-size: 18px;
    font-weight: 600;
    color: var(--notion-text);
}

.project-quick-stats {
    display: flex;
    gap: 16px;
}

.project-quick-stats .stat {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.project-quick-stats .stat-value {
    font-size: 16px;
    font-weight: 600;
    color: var(--notion-text);
}

.project-quick-stats .stat-label {
    font-size: 10px;
    color: var(--notion-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.project-quick-stats .progress-stat .stat-value {
    color: #a5b4fc;
}

.project-alerts-section {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.project-alert {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
}

.alert-overdue {
    background: rgba(239, 68, 68, 0.15);
    color: #fca5a5;
}

.alert-upcoming {
    background: rgba(245, 158, 11, 0.15);
    color: #fcd34d;
}

.alert-urgent {
    background: rgba(239, 68, 68, 0.15);
    color: #fca5a5;
}

.project-workspace-panel-toggles {
    display: flex;
    gap: 4px;
    margin-left: auto;
    background: var(--notion-bg-active);
    padding: 4px;
    border-radius: 8px;
}

.project-workspace-panel-toggles .panel-toggle-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: transparent;
    border: none;
    border-radius: 6px;
    color: var(--notion-text-secondary);
    font-size: 13px;
    cursor: pointer;
    transition: all 150ms ease;
}

.project-workspace-panel-toggles .panel-toggle-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.project-workspace-panel-toggles .panel-toggle-btn.active {
    background: var(--notion-bg-secondary);
    color: var(--notion-text);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.project-workspace-panel-toggles .panel-toggle-icon {
    font-size: 14px;
}

/* Project Content Area */
.project-workspace-content {
    flex: 1;
    display: flex;
    overflow: hidden;
    min-height: 0;
}

.project-main-panel {
    flex: 1;
    overflow: auto;
    min-width: 0;
}

.project-calendar-view {
    height: 100%;
    overflow: auto;
}

/* Project Notes Sidebar */
.project-notes-panel {
    width: 320px;
    min-width: 320px;
    background: var(--notion-bg-secondary);
    border-left: 1px solid var(--notion-border);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.project-notes-header {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    border-bottom: 1px solid var(--notion-border);
}

.project-notes-header h4 {
    margin: 0;
    font-size: 13px;
    font-weight: 600;
    color: var(--notion-text);
}

.project-notes-content {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
}

.project-notes-content .writing-widget {
    background: transparent;
    padding: 0;
}

.project-notes-content .log-surface {
    background: transparent;
    border: none;
    box-shadow: none;
}

/* Project Quick Add Bar */
.project-quick-add-bar {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 20px;
    background: var(--notion-bg-secondary);
    border-top: 1px solid var(--notion-border);
}

.project-quick-add-bar.is-collapsed {
    padding: 8px 20px;
}

.project-quick-add-bar .quick-add-toggle {
    flex-shrink: 0;
}

.project-quick-add-bar .quick-add-content {
    flex: 1;
    min-width: 0;
}

/* Empty State */
.project-workspace-empty {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px;
}

.empty-state {
    text-align: center;
    max-width: 400px;
}

.empty-icon {
    font-size: 64px;
    display: block;
    margin-bottom: 16px;
    opacity: 0.6;
}

.empty-state h3 {
    margin: 0 0 8px 0;
    font-size: 20px;
    font-weight: 600;
    color: var(--notion-text);
}

.empty-state p {
    margin: 0 0 24px 0;
    color: var(--notion-text-secondary);
    font-size: 14px;
}

.project-overview-stats {
    display: flex;
    justify-content: center;
    gap: 32px;
}

.overview-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.overview-stat-value {
    font-size: 28px;
    font-weight: 700;
    color: var(--notion-text);
}

.overview-stat-label {
    font-size: 12px;
    color: var(--notion-text-secondary);
    margin-top: 4px;
}

.loading-state {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 1;
    color: var(--notion-text-secondary);
    font-size: 14px;
    padding: 20px;
}

/* ============================================
   Projects Dashboard (mirrors Tasks Dashboard)
   ============================================ */
.projects-dashboard {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* Projects Filter Toolbar */
.projects-filter-toolbar {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 12px 16px;
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
    flex-shrink: 0;
}

.projects-search {
    position: relative;
    flex: 1;
    max-width: 300px;
}

.projects-search-input {
    width: 100%;
    padding: 8px 32px 8px 12px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text);
    font-size: 13px;
    transition: all 150ms ease;
}

.projects-search-input:focus {
    outline: none;
    border-color: rgba(99, 102, 241, 0.5);
    background: var(--notion-bg);
}

.projects-search-input::placeholder {
    color: var(--notion-text-muted);
}

.projects-search-clear {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    color: var(--notion-text-muted);
    font-size: 12px;
    cursor: pointer;
    border-radius: 4px;
    transition: all 150ms ease;
}

.projects-search-clear:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.projects-filters {
    display: flex;
    align-items: center;
    gap: 8px;
}

.projects-filter-select {
    padding: 6px 10px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text);
    font-size: 12px;
    cursor: pointer;
    transition: all 150ms ease;
}

.projects-filter-select:hover {
    border-color: rgba(99, 102, 241, 0.4);
}

.projects-filter-select:focus {
    outline: none;
    border-color: rgba(99, 102, 241, 0.5);
}

.projects-sort-dir-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text);
    font-size: 14px;
    cursor: pointer;
    transition: all 150ms ease;
}

.projects-sort-dir-btn:hover {
    background: var(--notion-bg-hover);
    border-color: rgba(99, 102, 241, 0.4);
}

.projects-completed-toggle {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: var(--notion-text-secondary);
    cursor: pointer;
    padding: 6px 10px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    transition: all 150ms ease;
}

.projects-completed-toggle:hover {
    border-color: rgba(99, 102, 241, 0.4);
}

.projects-completed-toggle input {
    accent-color: #6366f1;
}

.projects-count {
    font-size: 12px;
    color: var(--notion-text-muted);
    margin-left: auto;
}

/* Projects organizer toolbar - uses same icon button style as Tasks */
.projects-organizer-toolbar {
    display: flex;
    align-items: center;
    gap: 4px;
}

.projects-organizer-toolbar .task-organizer-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 6px;
    color: var(--notion-text-muted);
    font-size: 14px;
    cursor: pointer;
    transition: all 100ms ease;
}

.projects-organizer-toolbar .task-organizer-icon:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
    border-color: var(--notion-border);
}

.projects-organizer-toolbar .task-organizer-icon.is-active {
    background: rgba(99, 102, 241, 0.15);
    border-color: rgba(99, 102, 241, 0.4);
    color: #a5b4fc;
}

.projects-dashboard-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-width: 0;
}

.projects-dashboard .dashboard-panels-container {
    flex: 1;
    overflow: hidden;
}

.projects-dashboard .dashboard-panels {
    height: 100%;
    display: flex;
    gap: 1px;
    background: var(--notion-border);
}

.projects-dashboard .dashboard-panel {
    background: var(--notion-bg);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-height: 0;
}

.projects-dashboard .dashboard-panel .panel-content {
    flex: 1;
    overflow: auto;
    min-height: 0;
}

/* Tasks Bottom Bar Layout */
.tasks-bottom-bar {
    display: flex;
    align-items: flex-end;
    gap: 12px;
    padding: 8px 16px;
    background: var(--notion-bg-secondary);
    border-top: 1px solid var(--notion-border);
    /* Subtle lift effect above content */
    box-shadow: 0 -1px 0 rgba(255, 255, 255, 0.02);
    flex-shrink: 0;
}

.tasks-bottom-bar .dashboard-quick-add-bar {
    flex: 1;
}

/* Projects Bottom Bar Layout */
.projects-bottom-bar {
    display: flex;
    align-items: flex-end;
    gap: 12px;
    padding: 0;
}

.projects-bottom-bar .dashboard-quick-add-bar {
    flex: 1;
}

/* Capture Note Toggle Button */
.capture-note-toggle {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: 8px;
    color: var(--notion-text-secondary);
    font-size: 13px;
    cursor: pointer;
    transition: all 150ms ease;
    white-space: nowrap;
}

.capture-note-toggle:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
    border-color: rgba(99, 102, 241, 0.3);
}

.capture-note-toggle.is-active {
    background: rgba(99, 102, 241, 0.15);
    border-color: rgba(99, 102, 241, 0.4);
    color: #a5b4fc;
}

.capture-note-icon {
    font-size: 16px;
}

/* Fullscreen Chatbot Overlay */
.fullscreen-chatbot-overlay {
    position: fixed;
    top: 60px;
    right: 16px;
    width: 420px;
    max-height: calc(100vh - 80px);
    z-index: 150;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.05);
    animation: chatbotSlideIn 200ms ease-out;
}

.fullscreen-chatbot-overlay .chatbot-panel {
    height: 100%;
    max-height: calc(100vh - 80px);
    border-radius: 12px;
}

@keyframes chatbotSlideIn {
    from {
        opacity: 0;
        transform: translateY(-10px) scale(0.98);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Slide-in Notes Panel from Right */
.notes-slide-panel {
    position: fixed;
    top: 0;
    right: 0;
    width: 400px;
    height: 100vh;
    background: var(--notion-bg);
    border-left: 1px solid var(--notion-border);
    box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    transform: translateX(100%);
    transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 100;
}

.notes-slide-panel.is-open {
    transform: translateX(0);
}

.notes-panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    flex-shrink: 0;
}

.notes-panel-header h4 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: var(--notion-text);
}

.notes-panel-footer {
    flex-shrink: 0;
    padding: 12px 16px;
    border-top: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
}

.notes-panel-close {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 16px;
    background: var(--notion-bg-hover);
    border: 1px solid var(--notion-border);
    border-radius: 8px;
    color: var(--notion-text-muted);
    font-size: 14px;
    cursor: pointer;
    transition: all 150ms ease;
}

.notes-panel-close:hover {
    background: var(--notion-bg-active);
    color: var(--notion-text);
    border-color: var(--notion-text-muted);
}

.notes-panel-close .close-icon {
    font-size: 16px;
}

.notes-panel-close .close-label {
    font-weight: 500;
}

.notes-panel-content {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
}

.notes-panel-content .writing-widget {
    background: transparent;
    padding: 0;
    height: 100%;
}

.notes-panel-content .log-surface {
    background: transparent;
    border: none;
    box-shadow: none;
    height: 100%;
}

/* ============================================
   ProjectList Panel Styles (mirrors TaskList)
   ============================================ */
.project-list {
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.project-list-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    border-bottom: 1px solid var(--notion-border);
    flex-shrink: 0;
    background: var(--notion-bg-secondary);
}

.project-count {
    font-size: 12px;
    color: var(--notion-text-secondary);
}

.show-completed-toggle {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--notion-text-secondary);
    cursor: pointer;
}

.show-completed-toggle input {
    cursor: pointer;
}

.project-list-items {
    flex: 1;
    overflow-y: auto;
    padding: 0;
}

/* Project list item container */
.project-list-item {
    border-top: 1px solid rgba(255, 255, 255, 0.04);
    background: transparent;
    transition: background 100ms ease;
}

.project-list-item:first-child {
    border-top-color: transparent;
}

.project-list-item:hover {
    background: var(--notion-bg-hover);
}

.project-list-item.is-expanded {
    background: var(--notion-bg-secondary);
}

.project-list-item.is-selected {
    background: rgba(148, 163, 184, 0.16);
    border-left: 3px solid rgba(99, 102, 241, 0.7);
}

/* Project header row - the main clickable area */
.project-header-row {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 12px 14px;
    cursor: pointer;
}

/* NEW: 2-Row Layout for Project Header */
.project-header-two-row {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px 14px;
    cursor: pointer;
}

.project-row-1 {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

.project-row-1-left {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
    min-width: 0;
}

.project-row-1-right {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
}

.project-row-2 {
    display: flex;
    align-items: center;
    gap: 16px;
    padding-left: 32px;
}

/* Circular Progress for 2-row layout */
.project-progress-circle {
    position: relative;
    width: 36px;
    height: 36px;
    flex-shrink: 0;
    color: #a78bfa;
}

.project-progress-circle.overdue {
    color: #f87171;
}

.project-progress-circle.complete {
    color: #22c55e;
}

.project-progress-circle .progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 9px;
    font-weight: 700;
    color: currentColor;
}

/* Task counts for 2-row layout */
.project-task-counts {
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 70px;
}

.task-count-done {
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text);
}

.task-count-left {
    font-size: 11px;
    color: var(--notion-text-muted);
}

/* Actions info for 2-row layout */
.project-actions-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
    min-width: 0;
}

/* Deadline section for 2-row layout */
.project-deadline-section {
    flex-shrink: 0;
    min-width: 100px;
    text-align: right;
}

.project-header-left {
    display: flex;
    align-items: center;
    gap: 8px;
    min-width: 200px;
    flex-shrink: 0;
}

.project-header-center {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
    min-width: 0;
}

.project-header-right {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-shrink: 0;
}

.expand-toggle {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    color: var(--notion-text-muted);
    font-size: 10px;
    cursor: pointer;
    flex-shrink: 0;
    border-radius: 4px;
    transition: all 100ms ease;
}

.expand-toggle:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.project-list-item .project-emoji {
    font-size: 20px;
    flex-shrink: 0;
}

.project-title-block {
    display: flex;
    align-items: center;
    gap: 8px;
    min-width: 0;
}

.project-list-item .project-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.project-status-badge {
    font-size: 10px;
    color: var(--notion-text-secondary);
    padding: 2px 6px;
    background: var(--notion-bg-active);
    border-radius: 4px;
    flex-shrink: 0;
}

/* Next Action & Overdue Action in center */
.next-action,
.overdue-action,
.no-action {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    white-space: nowrap;
    overflow: hidden;
}

.action-label {
    color: var(--notion-text-muted);
    flex-shrink: 0;
}

.action-label.overdue {
    color: #fca5a5;
}

.action-label.muted {
    color: var(--notion-text-muted);
    font-style: italic;
}

.action-task {
    color: var(--notion-text);
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
}

.overdue-action .action-task {
    color: #fca5a5;
}

.action-date {
    color: var(--notion-text-secondary);
    font-size: 11px;
    flex-shrink: 0;
}

.action-date.overdue {
    color: #fca5a5;
    font-weight: 500;
}

/* Project Deadline Info */
.project-deadline-info {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 2px;
    min-width: 90px;
}

.project-deadline-info.overdue {
    color: #fca5a5;
}

.project-deadline-info.no-deadline .deadline-date {
    color: var(--notion-text-muted);
}

.deadline-date {
    font-size: 12px;
    font-weight: 500;
    color: var(--notion-text);
}

.deadline-date.muted {
    color: var(--notion-text-muted);
    font-weight: 400;
}

.deadline-days {
    font-size: 11px;
    color: var(--notion-text-secondary);
}

.deadline-days.overdue {
    color: #fca5a5;
    font-weight: 600;
}

.deadline-days.soon {
    color: #fcd34d;
    font-weight: 500;
}

/* Progress compact */
.project-progress-compact {
    display: flex;
    align-items: center;
    gap: 8px;
    min-width: 80px;
}

.progress-bar-mini {
    width: 40px;
    height: 4px;
    background: var(--notion-bg-active);
    border-radius: 2px;
    overflow: hidden;
}

.progress-bar-mini .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #6366f1, #8b5cf6);
    border-radius: 2px;
    transition: width 300ms ease;
}

.progress-label {
    font-size: 11px;
    color: var(--notion-text-secondary);
}

/* Open workspace button */
.open-workspace-btn {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--notion-bg-active);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text-muted);
    cursor: pointer;
    font-size: 14px;
    transition: all 150ms ease;
}

.open-workspace-btn:hover {
    background: rgba(99, 102, 241, 0.15);
    border-color: rgba(99, 102, 241, 0.3);
    color: #a5b4fc;
}

/* Expanded content section */
.project-expanded-content {
    padding: 12px 14px 14px 42px;
    border-top: 1px solid var(--notion-border);
}

/* Notes & Links Section */
.project-notes-links-section {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 16px;
}

.notes-toggle-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 6px;
    color: var(--notion-text-muted);
    font-size: 12px;
    cursor: pointer;
    transition: all 150ms ease;
    width: 100%;
    text-align: left;
}

.notes-toggle-btn:hover {
    background: rgba(255, 255, 255, 0.06);
    color: var(--notion-text);
}

.notes-toggle-btn .toggle-icon {
    font-size: 10px;
}

.notes-links-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    padding: 12px;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 6px;
    animation: fadeIn 150ms ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-4px); }
    to { opacity: 1; transform: translateY(0); }
}

.notes-area,
.links-area {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.section-label {
    font-size: 11px;
    font-weight: 600;
    color: var(--notion-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.project-notes-input,
.project-links-input {
    width: 100%;
    min-height: 60px;
    padding: 8px 10px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text);
    font-size: 12px;
    font-family: inherit;
    resize: vertical;
    transition: all 150ms ease;
}

.project-notes-input::placeholder,
.project-links-input::placeholder {
    color: var(--notion-text-muted);
}

.project-notes-input:focus,
.project-links-input:focus {
    outline: none;
    border-color: rgba(99, 102, 241, 0.5);
    background: var(--notion-bg-secondary);
}

/* Project dates bar */
.project-dates-bar {
    display: flex;
    gap: 20px;
    padding: 8px 12px;
    background: var(--notion-bg);
    border-radius: 6px;
    margin-bottom: 12px;
}

.project-dates-bar .date-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
}

.project-dates-bar .date-label {
    color: var(--notion-text-muted);
}

.project-dates-bar .date-value {
    color: var(--notion-text);
    font-weight: 500;
}

.project-dates-bar .date-value.overdue {
    color: #fca5a5;
}

/* Tasks section header */
.tasks-section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 8px;
    flex-wrap: wrap;
    gap: 8px;
}

.tasks-section-actions {
    display: flex;
    align-items: center;
    gap: 8px;
}

.tasks-count {
    font-size: 12px;
    color: var(--notion-text-secondary);
}

.open-full-view-btn {
    font-size: 11px;
    padding: 4px 10px;
    background: transparent;
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    color: var(--notion-text-secondary);
    cursor: pointer;
    transition: all 150ms ease;
}

.open-full-view-btn:hover {
    background: rgba(99, 102, 241, 0.1);
    border-color: rgba(99, 102, 241, 0.3);
    color: #a5b4fc;
}

/* Next action badge in task list */
.next-action-badge {
    font-size: 9px;
    padding: 2px 5px;
    background: rgba(99, 102, 241, 0.2);
    border-radius: 3px;
    color: #a5b4fc;
    font-weight: 600;
    letter-spacing: 0.5px;
}

.project-task-row.is-next-action {
    background: rgba(99, 102, 241, 0.08);
    border-radius: 4px;
}

/* Project Tasks Section (expanded) */
.project-tasks-section {
    padding-left: 28px;
}

.project-tasks-list {
    display: flex;
    flex-direction: column;
    gap: 1px;
}

.project-task-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 10px;
    border-radius: 4px;
    transition: background 100ms ease;
}

.project-task-row:hover {
    background: var(--notion-bg-hover);
}

.project-task-row.is-complete {
    opacity: 0.5;
}

.project-tasks-section .task-checkbox {
    width: 16px;
    height: 16px;
    border: 1.5px solid var(--notion-border);
    border-radius: 4px;
    background: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    color: var(--notion-text);
    flex-shrink: 0;
    transition: all 100ms ease;
}

.project-tasks-section .task-checkbox:hover {
    border-color: var(--notion-text-muted);
}

.project-tasks-section .task-checkbox.checked {
    background: #22c55e;
    border-color: #22c55e;
    color: white;
}

.project-task-row .task-title {
    flex: 1;
    font-size: 13px;
    color: var(--notion-text);
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.project-task-row .task-title:hover {
    color: var(--notion-blue);
}

.task-flag {
    font-size: 11px;
    cursor: help;
}

.project-task-row .task-date {
    font-size: 11px;
    color: var(--notion-text-secondary);
    cursor: help;
}

.project-task-row .task-date.overdue {
    color: #fca5a5;
    font-weight: 500;
}

.project-task-row .task-status {
    font-size: 10px;
    padding: 2px 6px;
    background: var(--notion-bg-active);
    border-radius: 4px;
    color: var(--notion-text-secondary);
}

.no-tasks {
    padding: 16px;
    text-align: center;
    color: var(--notion-text-muted);
    font-size: 12px;
}

.project-quick-add {
    margin-top: 10px;
}

.project-quick-add input {
    width: 100%;
    padding: 8px 12px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text);
    font-size: 13px;
    transition: all 150ms ease;
}

.project-quick-add input::placeholder {
    color: var(--notion-text-muted);
}

.project-quick-add input:focus {
    outline: none;
    border-color: rgba(99, 102, 241, 0.5);
    background: var(--notion-bg-secondary);
}

/* Enhanced Quick Add with Priority */
.project-quick-add.enhanced {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.project-quick-add .quick-add-row {
    display: flex;
    gap: 8px;
    align-items: center;
}

.project-quick-add .quick-add-row input[type="text"] {
    flex: 1;
}

.project-quick-add .quick-add-date-input {
    width: 130px;
    flex-shrink: 0;
    padding: 7px 8px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text);
    font-size: 12px;
    cursor: pointer;
}

.project-quick-add .quick-add-date-input::-webkit-calendar-picker-indicator {
    filter: invert(0.7);
    cursor: pointer;
}

.project-quick-add .quick-add-date-input:focus {
    outline: none;
    border-color: rgba(99, 102, 241, 0.5);
}

.project-quick-add .quick-add-submit-btn {
    padding: 7px 14px;
    background: rgba(99, 102, 241, 0.2);
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: 6px;
    color: #a5b4fc;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
    white-space: nowrap;
}

.project-quick-add .quick-add-submit-btn:hover {
    background: rgba(99, 102, 241, 0.3);
    border-color: rgba(99, 102, 241, 0.5);
}

.project-quick-add .quick-add-priority-buttons {
    display: flex;
    gap: 4px;
}

.project-quick-add .priority-toggle {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(255, 255, 255, 0.03);
    color: var(--notion-text-muted);
    cursor: pointer;
    font-size: 14px;
    transition: all 150ms ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.project-quick-add .priority-toggle:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.project-quick-add .priority-toggle.urgent.active {
    background: rgba(239, 68, 68, 0.2);
    border-color: rgba(239, 68, 68, 0.4);
    color: #f87171;
}

.project-quick-add .priority-toggle.important.active {
    background: rgba(234, 179, 8, 0.2);
    border-color: rgba(234, 179, 8, 0.4);
    color: #fbbf24;
}

.project-quick-add .quick-add-priority-indicator {
    padding-left: 12px;
}

/* Task Groups */
.project-tasks-grouped {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.task-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.task-group-header {
    padding: 4px 8px;
}

.task-group-header.collapsible {
    display: flex;
    align-items: center;
    gap: 6px;
    background: none;
    border: none;
    cursor: pointer;
    color: inherit;
    width: 100%;
    text-align: left;
    padding: 6px 8px;
    border-radius: 4px;
    transition: background 150ms ease;
}

.task-group-header.collapsible:hover {
    background: rgba(255, 255, 255, 0.04);
}

.task-group-header .toggle-icon {
    font-size: 10px;
    color: var(--notion-text-muted);
}

.task-group-header .group-label {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--notion-text-muted);
}

.task-group-header .group-label.completed {
    color: #22c55e;
}

.task-group.completed-tasks {
    opacity: 0.7;
}

.task-group.completed-tasks:hover {
    opacity: 1;
}

/* Updated Task Row */
.project-task-row {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 10px;
    border-radius: 6px;
    background: transparent;
    cursor: pointer;
    transition: all 150ms ease;
    position: relative;
}

.project-task-row:hover {
    background: var(--notion-bg-hover);
}

.project-task-row.is-next-action {
    background: rgba(59, 130, 246, 0.08);
    border-left: 3px solid #3b82f6;
}

.project-task-row.is-popup-open {
    background: rgba(139, 92, 246, 0.1);
    border: 1px solid rgba(139, 92, 246, 0.3);
}

.project-task-row.is-complete {
    opacity: 0.6;
}

.project-task-row.is-complete:hover {
    opacity: 1;
}

/* Task Checkbox */
.project-task-row .task-checkbox {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: 2px solid rgba(255, 255, 255, 0.3);
    background: transparent;
    cursor: pointer;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 150ms ease;
}

.project-task-row .task-checkbox:hover {
    border-color: #22c55e;
    background: rgba(34, 197, 94, 0.1);
}

.project-task-row .task-checkbox .checkbox-circle {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: transparent;
}

.project-task-row .task-checkbox:hover .checkbox-circle {
    background: rgba(34, 197, 94, 0.5);
}

.project-task-row .task-checkbox.checked {
    border-color: #22c55e;
    background: #22c55e;
}

.project-task-row .task-checkbox.checked .checkbox-check {
    color: white;
    font-size: 12px;
    font-weight: bold;
}

/* Task Title */
.project-task-row .task-title {
    flex: 1;
    font-size: 13px;
    color: var(--notion-text);
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.project-task-row .task-title.completed {
    text-decoration: line-through;
    color: var(--notion-text-muted);
}

/* Task Meta */
.project-task-row .task-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
}

/* Priority Badges - Match task list colors */
.priority-badge {
    font-size: 10px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 4px;
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.priority-badge.do-now {
    background: rgba(239, 68, 68, 0.2);
    color: #f87171;
}

.priority-badge.delegate {
    background: rgba(249, 115, 22, 0.2);
    color: #fb923c;
}

.priority-badge.deep-work {
    background: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
}

.priority-badge.trash {
    background: rgba(148, 163, 184, 0.15);
    color: #94a3b8;
}

/* Next Action Badge */
.next-action-badge {
    font-size: 9px;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 3px;
    background: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Task Date - Inline next to name */
.project-task-row .task-date-inline {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    color: var(--notion-text-muted);
    flex-shrink: 0;
}

.project-task-row .task-date-inline .date-short {
    font-weight: 500;
}

.project-task-row .task-date-inline .date-relative {
    opacity: 0.8;
}

.project-task-row .task-date-inline.overdue {
    color: #f87171;
}

.project-task-row .task-date-inline.overdue .date-relative {
    font-weight: 600;
}

.project-task-row .task-date-inline.completed {
    opacity: 0.6;
}

/* Deadline type indicator */
.project-task-row .deadline-type {
    font-size: 10px;
    flex-shrink: 0;
    opacity: 0.8;
}

.project-task-row .deadline-type.hard {
    filter: drop-shadow(0 0 2px rgba(239, 68, 68, 0.5));
}

.project-task-row .deadline-type.soft {
    opacity: 0.6;
}

/* Priority Checks (instead of badges) */
.priority-checks {
    display: flex;
    gap: 4px;
}

.priority-check {
    font-size: 12px;
    opacity: 0.25;
    transition: opacity 150ms ease;
}

.priority-check.active {
    opacity: 1;
}

.priority-check.urgent.active {
    color: #f87171;
    text-shadow: 0 0 4px rgba(239, 68, 68, 0.4);
}

.priority-check.important.active {
    color: #fbbf24;
    text-shadow: 0 0 4px rgba(234, 179, 8, 0.4);
}

/* Old Task Date - keeping for compatibility */
.project-task-row .task-date {
    font-size: 11px;
    color: var(--notion-text-muted);
}

.project-task-row .task-date.overdue {
    color: #f87171;
    font-weight: 600;
}

.project-task-row .task-date.completed {
    color: var(--notion-text-muted);
    opacity: 0.7;
}

/* Clickable Actions in Header */
.overdue-action.clickable,
.next-action.clickable {
    display: flex;
    align-items: center;
    gap: 6px;
    background: transparent;
    border: none;
    cursor: pointer;
    text-align: left;
    padding: 4px 8px;
    border-radius: 4px;
    transition: all 150ms ease;
    max-width: 100%;
}

.overdue-action.clickable:hover,
.next-action.clickable:hover {
    background: rgba(255, 255, 255, 0.06);
}

/* Action date inline - goes between label and title */
.action-date-inline {
    font-size: 11px;
    color: var(--notion-text-muted);
    flex-shrink: 0;
}

.action-date-inline.overdue {
    color: #f87171;
    font-weight: 600;
}

/* Task Edit Popup */
.task-edit-popup {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: 4px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    z-index: 100;
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    animation: popupSlideIn 150ms ease;
}

@keyframes popupSlideIn {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
}

.task-edit-popup .popup-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.task-edit-popup .popup-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--notion-text);
}

.task-edit-popup .popup-close {
    background: none;
    border: none;
    color: var(--notion-text-muted);
    font-size: 18px;
    cursor: pointer;
    padding: 0 4px;
}

.task-edit-popup .popup-close:hover {
    color: var(--notion-text);
}

.task-edit-popup .popup-body {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.task-edit-popup .popup-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.task-edit-popup .popup-field label {
    font-size: 11px;
    font-weight: 600;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.task-edit-popup .popup-input {
    padding: 6px 10px;
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    color: var(--notion-text);
    font-size: 13px;
}

.task-edit-popup .popup-input:focus {
    outline: none;
    border-color: rgba(139, 92, 246, 0.5);
}

.task-edit-popup .date-input-row {
    display: flex;
    gap: 8px;
    align-items: center;
}

.task-edit-popup .date-input-row input {
    flex: 1;
}

.task-edit-popup .clear-date {
    padding: 4px 8px;
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.2);
    border-radius: 4px;
    color: #f87171;
    font-size: 11px;
    cursor: pointer;
}

.task-edit-popup .priority-toggles {
    display: flex;
    gap: 8px;
}

.task-edit-popup .priority-btn {
    flex: 1;
    padding: 8px 12px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    color: var(--notion-text-muted);
    font-size: 12px;
    cursor: pointer;
    transition: all 150ms ease;
}

.task-edit-popup .priority-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.task-edit-popup .priority-btn.urgent.active {
    background: rgba(239, 68, 68, 0.15);
    border-color: rgba(239, 68, 68, 0.4);
    color: #f87171;
}

.task-edit-popup .priority-btn.important.active {
    background: rgba(234, 179, 8, 0.15);
    border-color: rgba(234, 179, 8, 0.4);
    color: #fbbf24;
}

.task-edit-popup .priority-result {
    margin-top: 6px;
}

.task-edit-popup .popup-feedback {
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 12px;
}

.task-edit-popup .popup-feedback.success {
    background: rgba(34, 197, 94, 0.15);
    color: #4ade80;
}

.task-edit-popup .popup-feedback.error {
    background: rgba(239, 68, 68, 0.15);
    color: #f87171;
}

.task-edit-popup .popup-actions {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
}

.task-edit-popup .popup-actions button {
    padding: 6px 14px;
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 6px;
    color: var(--notion-text);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
}

.task-edit-popup .popup-actions button:hover {
    background: rgba(255, 255, 255, 0.1);
}

.task-edit-popup .popup-actions button.primary {
    background: rgba(139, 92, 246, 0.2);
    border-color: rgba(139, 92, 246, 0.3);
    color: #a78bfa;
}

.task-edit-popup .popup-actions button.primary:hover {
    background: rgba(139, 92, 246, 0.3);
}

.task-edit-popup .popup-actions button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.project-list-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--notion-text-muted);
}

.project-list-empty .empty-icon {
    font-size: 48px;
    margin-bottom: 12px;
    opacity: 0.5;
}

/* ============================================
   Project Workspace View (Full Project Mode)
   ============================================ */
.project-workspace {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: var(--notion-bg);
}

.project-workspace-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px 20px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
}

.back-to-projects-btn {
    padding: 8px 14px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text-secondary);
    font-size: 13px;
    cursor: pointer;
    transition: all 150ms ease;
}

.back-to-projects-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.project-workspace-title {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1;
}

.project-emoji-large {
    font-size: 32px;
}

.project-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.project-info h2 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
    color: var(--notion-text);
}

.project-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 12px;
}

.project-meta .project-status {
    padding: 3px 8px;
    background: rgba(99, 102, 241, 0.15);
    border-radius: 4px;
    color: #a5b4fc;
    font-weight: 500;
}

/* Project Editing Controls */
.project-status-select {
    padding: 4px 10px;
    background: rgba(99, 102, 241, 0.15);
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: 4px;
    color: #a5b4fc;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
}

.project-status-select:hover {
    background: rgba(99, 102, 241, 0.25);
}

.project-status-select:focus {
    outline: none;
    border-color: rgba(99, 102, 241, 0.5);
}

.project-dates-row {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-top: 4px;
}

.project-date-label {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--notion-text-secondary);
}

.project-date-input {
    padding: 4px 8px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    color: var(--notion-text);
    font-size: 11px;
    cursor: pointer;
    transition: all 150ms ease;
}

.project-date-input:hover {
    border-color: rgba(99, 102, 241, 0.4);
}

.project-date-input:focus {
    outline: none;
    border-color: rgba(99, 102, 241, 0.5);
    background: var(--notion-bg-secondary);
}

.project-date-input.is-overdue {
    border-color: rgba(239, 68, 68, 0.4);
    color: #f87171;
}

.deadline-badge {
    padding: 3px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 500;
}

.deadline-badge.overdue {
    background: rgba(239, 68, 68, 0.15);
    color: #f87171;
}

.deadline-badge.soon {
    background: rgba(251, 191, 36, 0.15);
    color: #fbbf24;
}

.project-meta .project-task-count {
    color: var(--notion-text-secondary);
}

.project-meta .project-deadline {
    color: var(--notion-text);
    display: flex;
    align-items: center;
    gap: 6px;
}

.project-meta .project-deadline.overdue {
    color: #fca5a5;
}

.project-meta .deadline-days {
    color: var(--notion-text-secondary);
}

.project-meta .deadline-days.overdue {
    color: #fca5a5;
    font-weight: 600;
}

.project-meta .deadline-days.soon {
    color: #fcd34d;
    font-weight: 500;
}

/* Project Notes & Links Bar */
.project-workspace-notes-bar {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    padding: 12px 20px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg);
}

.project-workspace-notes-bar .notes-section,
.project-workspace-notes-bar .links-section {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.project-workspace-notes-bar .collapsible-header {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 10px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text-secondary);
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 150ms ease;
    width: 100%;
    text-align: left;
}

.project-workspace-notes-bar .collapsible-header:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.project-workspace-notes-bar .collapse-icon {
    font-size: 10px;
    color: var(--notion-text-muted);
}

.project-workspace-notes-bar .notes-section.is-collapsed,
.project-workspace-notes-bar .links-section.is-collapsed {
    /* Keep header visible */
}

.project-workspace-notes-bar label {
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text-secondary);
}

/* Workspace Task Toolbar */
.workspace-task-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 16px;
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
    gap: 16px;
}

.workspace-panel-toggles {
    display: flex;
    gap: 4px;
}

.workspace-panel-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid transparent;
    border-radius: 6px;
    color: var(--notion-text-muted);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
}

.workspace-panel-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.workspace-panel-btn.active {
    background: rgba(99, 102, 241, 0.15);
    border-color: rgba(99, 102, 241, 0.3);
    color: #a5b4fc;
}

.workspace-task-filters {
    display: flex;
    gap: 4px;
}

.filter-toggle-btn {
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid transparent;
    border-radius: 6px;
    color: var(--notion-text-muted);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
}

.filter-toggle-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.filter-toggle-btn.active {
    background: rgba(99, 102, 241, 0.15);
    border-color: rgba(99, 102, 241, 0.3);
    color: #a5b4fc;
}

/* Workspace Toolbar Layout */
.workspace-toolbar-left {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
}

.workspace-toolbar-right {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
}

/* Search Input */
.workspace-search-wrapper {
    position: relative;
    width: 180px;
}

.workspace-search-input {
    width: 100%;
    padding: 6px 28px 6px 10px;
    font-size: 12px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text);
}

.workspace-search-input:focus {
    outline: none;
    border-color: rgba(99, 102, 241, 0.5);
    background: rgba(255, 255, 255, 0.06);
}

.workspace-search-input::placeholder {
    color: var(--notion-text-muted);
}

.workspace-search-clear {
    position: absolute;
    right: 6px;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    color: var(--notion-text-muted);
    font-size: 10px;
    cursor: pointer;
    border-radius: 3px;
}

.workspace-search-clear:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
}

/* Organizer Buttons */
.workspace-organizer-btns {
    display: flex;
    gap: 4px;
}

.workspace-org-btn {
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 6px 10px;
    font-size: 12px;
    font-weight: 500;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid transparent;
    border-radius: 6px;
    color: var(--notion-text-muted);
    cursor: pointer;
    transition: all 150ms ease;
}

.workspace-org-btn svg {
    width: 14px;
    height: 14px;
    opacity: 0.6;
}

.workspace-org-btn .org-icon {
    font-size: 14px;
    opacity: 0.6;
}

.workspace-org-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.workspace-org-btn:hover svg,
.workspace-org-btn:hover .org-icon {
    opacity: 1;
}

.workspace-org-btn.active {
    background: rgba(99, 102, 241, 0.15);
    border-color: rgba(99, 102, 241, 0.3);
    color: #a5b4fc;
}

.workspace-org-btn.active svg {
    opacity: 1;
}

.workspace-org-btn.highlighted:not(.active) {
    color: #a5b4fc;
}

.workspace-org-btn.highlighted:not(.active)::after {
    content: '';
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: #a5b4fc;
    margin-left: 2px;
}

/* Completed Toggle Button */
.completed-toggle-btn {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 10px;
    font-size: 12px;
    font-weight: 500;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid transparent;
    border-radius: 6px;
    color: var(--notion-text-muted);
    cursor: pointer;
    transition: all 150ms ease;
}

.completed-toggle-btn .toggle-check {
    font-size: 11px;
    opacity: 0.5;
}

.completed-toggle-btn .toggle-count {
    font-size: 11px;
    opacity: 0.7;
}

.completed-toggle-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.completed-toggle-btn.active {
    background: rgba(34, 197, 94, 0.15);
    border-color: rgba(34, 197, 94, 0.3);
    color: #86efac;
}

.completed-toggle-btn.active .toggle-check {
    opacity: 1;
}

/* Organizer Dropdown Panels */
.workspace-organizer-dropdown {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 16px;
    background: var(--notion-bg);
    border-bottom: 1px solid var(--notion-border);
}

.organizer-section {
    display: flex;
    align-items: center;
    gap: 8px;
}

.organizer-label {
    font-size: 11px;
    font-weight: 500;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.workspace-organizer-dropdown .widget-switch {
    display: flex;
    gap: 2px;
    padding: 2px;
    background: rgba(255, 255, 255, 0.04);
    border-radius: 6px;
}

.workspace-organizer-dropdown .widget-switch button {
    padding: 4px 10px;
    font-size: 11px;
    font-weight: 500;
    background: transparent;
    border: none;
    border-radius: 4px;
    color: var(--notion-text-muted);
    cursor: pointer;
    transition: all 100ms ease;
}

.workspace-organizer-dropdown .widget-switch button:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.workspace-organizer-dropdown .widget-switch button.active {
    background: rgba(99, 102, 241, 0.2);
    color: #a5b4fc;
}

.workspace-organizer-dropdown .widget-switch button.active.do-now {
    background: rgba(239, 68, 68, 0.2);
    color: #fca5a5;
}

.workspace-organizer-dropdown .widget-switch button.active.deep-work {
    background: rgba(99, 102, 241, 0.2);
    color: #a5b4fc;
}

.workspace-organizer-dropdown .widget-switch button.active.delegate {
    background: rgba(251, 191, 36, 0.2);
    color: #fcd34d;
}

.workspace-organizer-dropdown .widget-switch button.active.defer {
    background: rgba(156, 163, 175, 0.2);
    color: #d1d5db;
}

.organizer-close {
    margin-left: auto;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    background: transparent;
    border: none;
    color: var(--notion-text-muted);
    border-radius: 4px;
    cursor: pointer;
}

.organizer-close:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
}

/* Next Action in Workspace */
.workspace-next-action {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 12px;
    background: rgba(99, 102, 241, 0.08);
    border-radius: 6px;
    flex: 1;
    min-width: 0;
    max-width: 400px;
    margin: 0 auto;
}

.next-action-label {
    font-size: 11px;
    font-weight: 600;
    color: #a5b4fc;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    flex-shrink: 0;
}

.next-action-title {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: var(--notion-text);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    min-width: 0;
}

.next-action-due {
    font-size: 11px;
    color: var(--notion-text-muted);
    flex-shrink: 0;
}

.priority-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    flex-shrink: 0;
}

.priority-dot.do-now {
    background: #ef4444;
}

.priority-dot.deep-work {
    background: #6366f1;
}

.priority-dot.delegate {
    background: #fbbf24;
}

/* Back button positioning */
.project-workspace-header {
    justify-content: space-between;
}

.back-to-projects-btn {
    margin-left: auto;
    flex-shrink: 0;
}

/* Collapsible Section Header for Contacts */
.collapsible-section-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px;
    width: 100%;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid var(--notion-border);
    border-radius: 8px;
    color: var(--notion-text-secondary);
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 150ms ease;
    text-align: left;
}

.collapsible-section-header:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--notion-text);
}

.collapsible-section-header .collapse-icon {
    font-size: 10px;
    color: var(--notion-text-muted);
}

.collapsible-section-header .section-title {
    flex: 1;
}

.project-workspace-notes,
.project-workspace-links {
    width: 100%;
    min-height: 80px;
    padding: 10px 12px;
    background: var(--notion-bg-secondary);
    border: 1px solid var(--notion-border);
    border-radius: 8px;
    color: var(--notion-text);
    font-size: 13px;
    font-family: inherit;
    resize: vertical;
    transition: all 150ms ease;
}

.project-workspace-notes::placeholder,
.project-workspace-links::placeholder {
    color: var(--notion-text-muted);
}

.project-workspace-notes:focus,
.project-workspace-links:focus {
    outline: none;
    border-color: rgba(99, 102, 241, 0.5);
    background: var(--notion-bg);
}

/* ========================================
   Project Contacts Section
   Matches dashboard panel styling
   ======================================== */

.project-contacts-section {
    margin-top: 0;
    border-radius: 0;
    border: none;
    border-top: 1px solid var(--notion-border);
    background: var(--notion-bg);
    display: flex;
    flex-direction: column;
}

.project-contacts-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background: linear-gradient(90deg, rgba(139, 92, 246, 0.4), transparent);
    background-size: 4px 100%;
    background-repeat: no-repeat;
    background-color: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
}

.project-contacts-title {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.project-contacts-title h4 {
    margin: 0;
    font-size: 13px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 6px;
}

.project-contacts-title p {
    margin: 0;
    color: var(--notion-text-muted);
    font-size: 11px;
}

.project-contacts-actions {
    display: flex;
    gap: 6px;
}

.project-contacts-body {
    width: 100%;
    overflow-x: auto;
    max-height: 280px;
    overflow-y: auto;
}

.project-contacts-table-wrapper {
    min-width: 100%;
}

.project-contacts-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
}

.project-contacts-table th,
.project-contacts-table td {
    text-align: left;
    padding: 10px 14px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.project-contacts-table th {
    font-weight: 600;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    font-size: 10px;
    letter-spacing: 0.08em;
    background: var(--notion-bg-secondary);
    position: sticky;
    top: 0;
    z-index: 1;
}

.project-contacts-table tbody tr {
    transition: background 120ms ease;
}

.project-contacts-table tbody tr:hover {
    background: rgba(255, 255, 255, 0.03);
}

.contact-cell {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

.contact-name-cell {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.contact-name {
    font-weight: 500;
    color: var(--notion-text);
}

.contact-role-pill {
    background: rgba(139, 92, 246, 0.2);
    color: #c4b5fd;
    border-radius: 999px;
    padding: 2px 8px;
    font-size: 10px;
    letter-spacing: 0.04em;
    font-weight: 500;
    width: fit-content;
}

.contact-email-cell {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.contact-email-cell a {
    color: var(--notion-blue);
    text-decoration: none;
    transition: color 120ms ease;
}

.contact-email-cell a:hover {
    color: #60a5fa;
    text-decoration: underline;
}

.contact-email-cell .icon-button.subtle {
    border: 1px solid transparent;
    background: transparent;
    padding: 3px 6px;
    border-radius: 4px;
    font-size: 12px;
    color: var(--notion-text-muted);
    cursor: pointer;
    transition: all 120ms ease;
}

.contact-email-cell .icon-button.subtle:hover {
    border-color: rgba(255, 255, 255, 0.15);
    background: rgba(255, 255, 255, 0.05);
    color: var(--notion-text);
}

.contact-notes {
    max-width: 200px;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    color: var(--notion-text-muted);
    font-size: 12px;
}

.ghost-button {
    border: 1px solid rgba(255, 255, 255, 0.12);
    background: transparent;
    color: var(--notion-text-muted);
    padding: 5px 10px;
    border-radius: var(--radius-sm);
    font-size: 11px;
    font-weight: 500;
    cursor: pointer;
    transition: all 120ms ease;
}

.ghost-button:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.2);
    color: var(--notion-text);
}

.ghost-button:disabled {
    opacity: 0.4;
    cursor: default;
}

.panel.panel-error {
    border-color: rgba(244, 63, 94, 0.45);
    background: rgba(244, 63, 94, 0.1);
    color: #fecdd3;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

/* Project Workspace Views */
.project-workspace-views {
    flex: 1;
    overflow: hidden;
    padding: 16px;
}

.project-workspace-views .dashboard-panels {
    height: 100%;
    display: flex;
    gap: 1px;
    background: var(--notion-border);
    border-radius: 10px;
    overflow: hidden;
}

.project-workspace-views .dashboard-panel {
    flex: 1;
    background: var(--notion-bg);
    display: flex;
    flex-direction: column;
    min-width: 0;
    overflow: hidden;
}

.project-workspace-views .panel-header {
    padding: 12px 14px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
}

.project-workspace-views .panel-title {
    display: flex;
    align-items: center;
    gap: 8px;
}

.project-workspace-views .panel-title .panel-icon {
    font-size: 16px;
}

.project-workspace-views .panel-title h3 {
    margin: 0;
    font-size: 14px;
    font-weight: 600;
    color: var(--notion-text);
}

.project-workspace-views .panel-content {
    flex: 1;
    overflow: auto;
    min-height: 0;
}

/* Project Workspace Quick Add */
.project-workspace-quick-add {
    padding: 12px 20px;
    border-top: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
}

.project-workspace-quick-add .quick-add {
    background: transparent;
    padding: 0;
}

/* ============================================
   ProjectKanban Styles
   ============================================ */
.project-kanban {
    height: 100%;
    overflow: hidden;
}

.project-kanban-columns {
    display: flex;
    gap: 12px;
    height: 100%;
    padding: 12px;
    overflow-x: auto;
}

.project-kanban-column {
    width: 280px;
    min-width: 280px;
    display: flex;
    flex-direction: column;
    background: var(--notion-bg-secondary);
    border-radius: 10px;
    overflow: hidden;
}

.project-kanban-column.is-drop-target {
    background: rgba(99, 102, 241, 0.1);
    box-shadow: inset 0 0 0 2px rgba(99, 102, 241, 0.3);
}

.project-kanban-column .column-header {
    padding: 12px;
    border-bottom: 3px solid;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.column-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--notion-text);
}

.column-count {
    font-size: 12px;
    color: var(--notion-text-secondary);
    padding: 2px 8px;
    background: var(--notion-bg-active);
    border-radius: 10px;
}

.column-content {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.column-empty {
    padding: 20px;
    text-align: center;
    color: var(--notion-text-muted);
    font-size: 12px;
}

.project-kanban-card {
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 150ms ease;
}

.project-kanban-card:hover {
    border-color: rgba(99, 102, 241, 0.3);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.project-kanban-card.is-selected {
    border-color: rgba(99, 102, 241, 0.5);
    background: rgba(99, 102, 241, 0.05);
}

.project-kanban-card.is-dragging {
    opacity: 0.5;
}

.project-kanban-card .card-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.project-kanban-card .project-emoji {
    font-size: 18px;
}

.project-kanban-card .project-title {
    font-size: 14px;
    font-weight: 500;
    color: var(--notion-text);
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.project-kanban-card .project-description {
    font-size: 12px;
    color: var(--notion-text-secondary);
    margin: 0 0 8px 0;
    line-height: 1.4;
}

.project-kanban-card .card-stats {
    display: flex;
    gap: 8px;
    margin-bottom: 8px;
}

.project-kanban-card .card-stats .stat {
    font-size: 11px;
    color: var(--notion-text-secondary);
}

.project-kanban-card .card-stats .stat.urgent {
    color: #fca5a5;
}

.project-kanban-card .card-stats .stat.overdue {
    color: #fcd34d;
}

.project-kanban-card .card-progress {
    display: flex;
    align-items: center;
    gap: 8px;
}

.project-kanban-card .progress-bar {
    flex: 1;
    height: 4px;
    background: var(--notion-bg-active);
    border-radius: 2px;
    overflow: hidden;
}

.project-kanban-card .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #6366f1, #8b5cf6);
    border-radius: 2px;
}

.project-kanban-card .progress-text {
    font-size: 11px;
    font-weight: 500;
    color: #a5b4fc;
}

.project-kanban-card .card-dates {
    font-size: 11px;
    color: var(--notion-text-muted);
    margin-top: 8px;
}

.project-kanban-card .card-tags {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    margin-top: 8px;
}

.project-kanban-card .tag {
    font-size: 10px;
    padding: 2px 6px;
    background: var(--notion-bg-active);
    border-radius: 4px;
    color: var(--notion-text-secondary);
}

/* ============================================
   Notion-Style Gantt Timeline (scoped)
   ============================================ */
.notion-gantt {
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: var(--notion-bg);
}

/* Toolbar */
.notion-gantt-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 16px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    flex-shrink: 0;
    gap: 16px;
}

.notion-gantt-toolbar .toolbar-left,
.notion-gantt-toolbar .toolbar-right {
    display: flex;
    align-items: center;
    gap: 12px;
}

.notion-gantt .gantt-nav {
    display: flex;
    gap: 4px;
}

.notion-gantt .gantt-nav button {
    padding: 6px 10px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 6px;
    color: var(--notion-text-secondary);
    font-size: 13px;
    cursor: pointer;
    transition: all 100ms ease;
}

.notion-gantt .gantt-nav button:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.notion-gantt .gantt-group-select {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: var(--notion-text-secondary);
}

.notion-gantt .gantt-group-select select {
    padding: 5px 8px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    color: var(--notion-text);
    font-size: 12px;
}

.notion-gantt .gantt-stats {
    font-size: 12px;
    color: var(--notion-text-secondary);
}

.notion-gantt .gantt-scale {
    display: flex;
    gap: 2px;
    background: var(--notion-bg);
    border-radius: 6px;
    padding: 2px;
}

.notion-gantt .gantt-scale button {
    padding: 5px 10px;
    background: transparent;
    border: none;
    border-radius: 4px;
    color: var(--notion-text-secondary);
    font-size: 11px;
    cursor: pointer;
    transition: all 100ms ease;
}

.notion-gantt .gantt-scale button:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.notion-gantt .gantt-scale button.active {
    background: rgba(99, 102, 241, 0.15);
    color: #a5b4fc;
}

/* Container */
.notion-gantt .gantt-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
}

/* Fixed Sidebar Header */
.notion-gantt .gantt-sidebar-header {
    position: absolute;
    top: 0;
    left: 0;
    height: 70px;
    z-index: 20;
    background: var(--notion-bg-secondary);
    border-right: 1px solid var(--notion-border);
    border-bottom: 1px solid var(--notion-border);
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    padding: 10px 12px;
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text-secondary);
    text-transform: uppercase;
    transition: width 200ms ease;
}

.notion-gantt .gantt-sidebar-header.is-collapsed {
    justify-content: center;
    padding: 10px 8px;
}

.notion-gantt .sidebar-collapse-btn {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    color: var(--notion-text-secondary);
    font-size: 12px;
    cursor: pointer;
    transition: all 100ms ease;
}

.notion-gantt .sidebar-collapse-btn:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
    border-color: rgba(99, 102, 241, 0.4);
}

/* Scrollable Header */
.notion-gantt .gantt-chart-header {
    height: 70px;
    overflow-x: auto;
    overflow-y: hidden;
    flex-shrink: 0;
    border-bottom: 1px solid var(--notion-border);
    scrollbar-width: none;
    transition: margin-left 200ms ease;
}

.notion-gantt .gantt-chart-header::-webkit-scrollbar {
    display: none;
}

.notion-gantt .gantt-header-scroll {
    display: flex;
    flex-direction: column;
    min-width: max-content;
}

/* Month row */
.notion-gantt .gantt-month-row {
    display: flex;
    height: 30px;
    position: relative;
}

.notion-gantt .gantt-month {
    position: absolute;
    height: 30px;
    display: flex;
    align-items: center;
    padding: 0 12px;
    font-size: 13px;
    font-weight: 600;
    color: var(--notion-text);
    border-right: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
}

/* Day row */
.notion-gantt .gantt-day-row {
    display: flex;
    height: 40px;
    background: var(--notion-bg);
}

.notion-gantt .gantt-day {
    display: flex;
    align-items: center;
    justify-content: center;
    border-right: 1px solid rgba(255, 255, 255, 0.04);
    flex-shrink: 0;
}

.notion-gantt .gantt-day.is-weekend {
    background: rgba(0, 0, 0, 0.15);
}

.notion-gantt .gantt-day .day-number {
    font-size: 12px;
    color: var(--notion-text-secondary);
}

.notion-gantt .gantt-day.is-today .day-number {
    color: white;
}

.notion-gantt .gantt-day .today-badge {
    background: #f97316;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
}

/* Body */
.notion-gantt .gantt-body {
    flex: 1;
    display: flex;
    overflow: hidden;
}

/* Fixed Sidebar */
.notion-gantt .gantt-sidebar {
    flex-shrink: 0;
    overflow-y: auto;
    overflow-x: hidden;
    border-right: 1px solid var(--notion-border);
    background: var(--notion-bg);
    transition: width 200ms ease;
}

.notion-gantt .gantt-sidebar.is-collapsed {
    overflow-x: hidden;
}

.notion-gantt .gantt-row-sidebar.is-collapsed {
    justify-content: center;
    padding: 0 8px;
    cursor: pointer;
}

.notion-gantt .gantt-row-sidebar.is-collapsed:hover {
    background: var(--notion-bg-hover);
}

.notion-gantt .gantt-row-sidebar.is-collapsed .project-emoji {
    font-size: 16px;
}

/* Group Header */
.notion-gantt .gantt-group-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 16px;
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text);
}

.notion-gantt .gantt-group-header:hover {
    background: var(--notion-bg-hover);
}

.notion-gantt .gantt-group-header .collapse-icon {
    font-size: 10px;
    color: var(--notion-text-muted);
}

.notion-gantt .gantt-group-header .group-count {
    color: var(--notion-text-secondary);
    font-weight: 400;
    margin-left: auto;
}

/* Row Sidebar */
.notion-gantt .gantt-row-sidebar {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
    transition: background 100ms ease;
}

.notion-gantt .gantt-row-sidebar:hover {
    background: var(--notion-bg-hover);
}

.notion-gantt .gantt-row-sidebar.is-selected {
    background: rgba(99, 102, 241, 0.1);
}

.notion-gantt .gantt-row-sidebar .project-emoji {
    font-size: 14px;
    flex-shrink: 0;
}

.notion-gantt .gantt-row-sidebar .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
}

.notion-gantt .gantt-row-sidebar .project-name {
    flex: 1;
    font-size: 13px;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    cursor: pointer;
}

.notion-gantt .gantt-row-sidebar .project-name:hover {
    color: var(--notion-blue);
}

.notion-gantt .gantt-row-sidebar .date-range {
    font-size: 10px;
    color: var(--notion-text-muted);
    flex-shrink: 0;
}

.notion-gantt .gantt-row-sidebar .days-left {
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 4px;
    background: rgba(99, 102, 241, 0.15);
    color: #a5b4fc;
    flex-shrink: 0;
}

.notion-gantt .gantt-row-sidebar .days-left.urgent {
    background: rgba(251, 191, 36, 0.15);
    color: #fcd34d;
}

.notion-gantt .gantt-row-sidebar .days-left.overdue {
    background: rgba(239, 68, 68, 0.15);
    color: #fca5a5;
}

/* Scrollable Chart */
.notion-gantt .gantt-chart {
    flex: 1;
    overflow: auto;
}

.notion-gantt .gantt-chart-scroll {
    position: relative;
    min-height: 100%;
}

/* Today line */
.notion-gantt .gantt-today-line {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 2px;
    background: #f97316;
    z-index: 10;
    pointer-events: none;
}

/* Grid columns */
.notion-gantt .gantt-grid {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
}

.notion-gantt .gantt-grid-col {
    position: absolute;
    top: 0;
    bottom: 0;
    border-right: 1px solid rgba(255, 255, 255, 0.04);
}

.notion-gantt .gantt-grid-col.is-weekend {
    background: rgba(0, 0, 0, 0.1);
}

.notion-gantt .gantt-grid-col.is-month-start {
    border-right-color: var(--notion-border);
}

/* Group header row in chart */
.notion-gantt .gantt-group-header-row {
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
}

/* Row chart */
.notion-gantt .gantt-row-chart {
    position: relative;
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
    display: flex;
    align-items: center;
}

.notion-gantt .gantt-row-chart.is-selected {
    background: rgba(99, 102, 241, 0.05);
}

/* Gantt Bar */
.notion-gantt .gantt-bar {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    height: 24px;
    background: var(--bar-color, #6366f1);
    border-radius: 4px;
    cursor: pointer;
    overflow: hidden;
    transition: all 150ms ease;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    display: flex;
    align-items: center;
}

.notion-gantt .gantt-bar:hover {
    transform: translateY(-50%) scale(1.02);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    z-index: 5;
}

.notion-gantt .gantt-bar.is-overdue {
    outline: 2px solid #ef4444;
    outline-offset: -2px;
}

/* Progress fill */
.notion-gantt .gantt-bar-progress {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.25);
    border-radius: 4px 0 0 4px;
}

/* Bar label */
.notion-gantt .gantt-bar-label {
    position: relative;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0 10px;
    height: 100%;
    font-size: 11px;
    color: white;
    white-space: nowrap;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.notion-gantt .gantt-bar-label .bar-dates {
    font-weight: 500;
}

.notion-gantt .gantt-bar-label .bar-days {
    opacity: 0.9;
}

.notion-gantt .gantt-bar-label .bar-days.overdue {
    color: #fca5a5;
}

.notion-gantt .gantt-bar-label .bar-stats {
    opacity: 0.8;
    padding: 2px 6px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 3px;
}

/* Empty state */
.notion-gantt .gantt-empty {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    color: var(--notion-text-muted);
}

.notion-gantt .gantt-empty .empty-icon {
    font-size: 48px;
    opacity: 0.5;
}

/* ============================================
   Timeline V4 - Notion-style with Sticky Titles
   ============================================ */
.timeline-v4 {
    height: 100%;
    display: flex;
    flex-direction: column;
    background: var(--notion-bg);
    overflow: hidden;
}

.timeline-v4-empty {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    color: var(--notion-text-muted);
}

.timeline-v4-empty .empty-icon {
    font-size: 48px;
    opacity: 0.5;
}

/* Controls */
.timeline-v4-controls {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 16px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    flex-shrink: 0;
    flex-wrap: wrap;
}

.timeline-v4-controls .today-btn {
    padding: 6px 14px;
    background: var(--notion-blue);
    border: none;
    border-radius: 4px;
    color: white;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
}

.timeline-v4-controls .today-btn:hover {
    background: var(--notion-blue-hover, #4f46e5);
}

/* Zoom controls */
.timeline-v4-controls .zoom-controls {
    display: flex;
    align-items: center;
    gap: 2px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    padding: 2px;
}

.timeline-v4-controls .zoom-btn {
    width: 26px;
    height: 26px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    border-radius: 3px;
    color: var(--notion-text-secondary);
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: background 80ms ease;
}

.timeline-v4-controls .zoom-btn:hover:not(:disabled) {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.timeline-v4-controls .zoom-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.timeline-v4-controls .zoom-select {
    padding: 4px 8px;
    background: transparent;
    border: none;
    color: var(--notion-text);
    font-size: 11px;
    cursor: pointer;
    min-width: 80px;
    text-align: center;
}

.timeline-v4-controls .zoom-select:focus {
    outline: none;
}

.timeline-v4-controls .control-group {
    display: flex;
    align-items: center;
    gap: 6px;
}

.timeline-v4-controls .control-group label {
    font-size: 11px;
    color: var(--notion-text-muted);
}

.timeline-v4-controls .control-group select {
    padding: 5px 8px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    color: var(--notion-text);
    font-size: 11px;
    cursor: pointer;
}

.timeline-v4-controls .control-group select:hover {
    border-color: var(--notion-text-muted);
}

.timeline-v4-controls .toggle-btn {
    padding: 6px 12px;
    background: var(--notion-bg);
    border: 1px solid var(--notion-border);
    border-radius: 4px;
    color: var(--notion-text-secondary);
    font-size: 12px;
    cursor: pointer;
}

.timeline-v4-controls .toggle-btn:hover {
    background: var(--notion-bg-hover);
}

.timeline-v4-controls .toggle-btn.active {
    background: rgba(99, 102, 241, 0.15);
    border-color: rgba(99, 102, 241, 0.3);
    color: #a5b4fc;
}

.timeline-v4-controls .project-count {
    margin-left: auto;
    font-size: 12px;
    color: var(--notion-text-muted);
}

/* Main area */
.timeline-v4-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}

/* Header */
.timeline-v4-header {
    flex-shrink: 0;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
}

.timeline-v4-header-scroll {
    overflow-x: auto;
    overflow-y: hidden;
    scrollbar-width: none;
}

.timeline-v4-header-scroll::-webkit-scrollbar {
    display: none;
}

/* Primary header row (years, months, weeks depending on zoom) */
.timeline-v4-header .primary-header-row {
    height: 24px;
    background: rgba(255, 255, 255, 0.02);
}

.timeline-v4-header .primary-header-cell {
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 600;
    color: var(--notion-text-secondary);
    border-left: 1px solid var(--notion-border);
    background: rgba(255, 255, 255, 0.02);
    box-sizing: border-box;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.timeline-v4-header .primary-header-cell:first-child {
    border-left: none;
}

/* Secondary header row (months, weeks, days depending on zoom) */
.timeline-v4-header .secondary-header-row {
    height: 24px;
    background: var(--notion-bg-secondary);
}

.timeline-v4-header .secondary-header-cell {
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    color: var(--notion-text-muted);
    border-left: 1px solid rgba(255, 255, 255, 0.04);
    box-sizing: border-box;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.timeline-v4-header .secondary-header-cell.is-weekend {
    background: rgba(0, 0, 0, 0.08);
    color: rgba(255, 255, 255, 0.4);
}

.timeline-v4-header .secondary-header-cell.is-today {
    background: rgba(249, 115, 22, 0.2);
    color: rgba(249, 160, 100, 0.95);
    font-weight: 600;
}

/* Body */
.timeline-v4-body {
    flex: 1;
    min-height: 0;
    overflow: hidden;
}

/* Chart area */
.timeline-v4-chart {
    height: 100%;
    overflow: auto;
}

.timeline-v4-chart::-webkit-scrollbar {
    height: 8px;
    width: 8px;
}

.timeline-v4-chart::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 4px;
}

.timeline-v4-chart::-webkit-scrollbar-corner {
    background: transparent;
}

.timeline-v4-chart-inner {
    position: relative;
    min-height: 100%;
}

/* Grid */
.timeline-v4 .timeline-grid {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
}

.timeline-v4 .grid-line {
    position: absolute;
    top: 0;
    bottom: 0;
    border-left: 1px solid rgba(255, 255, 255, 0.03);
    box-sizing: border-box;
}

.timeline-v4 .grid-line.is-weekend {
    background: rgba(0, 0, 0, 0.06);
}

.timeline-v4 .grid-line.is-month {
    border-left-color: var(--notion-border);
}

/* Today line */
.timeline-v4 .today-line {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 2px;
    background: rgba(249, 115, 22, 0.7);
    z-index: 10;
    pointer-events: none;
}

/* Groups */
.timeline-v4 .timeline-group {
    border-bottom: 1px solid var(--notion-border);
}

.timeline-v4 .timeline-group:last-child {
    border-bottom: none;
}

.timeline-v4 .timeline-group-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    height: 32px;
    background: rgba(255, 255, 255, 0.02);
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
    font-size: 12px;
    font-weight: 500;
    color: var(--notion-text-secondary);
    cursor: pointer;
    user-select: none;
    transition: background 80ms ease;
}

.timeline-v4 .timeline-group-header:hover {
    background: rgba(255, 255, 255, 0.04);
}

.timeline-v4 .timeline-group-header.is-collapsed {
    background: rgba(255, 255, 255, 0.01);
    border-bottom-color: transparent;
}

.timeline-v4 .timeline-group-header .collapse-icon {
    font-size: 9px;
    color: var(--notion-text-muted);
    width: 12px;
}

.timeline-v4 .timeline-group-header .group-label {
    font-weight: 500;
}

.timeline-v4 .timeline-group-header .group-count {
    font-size: 10px;
    color: var(--notion-text-muted);
    background: rgba(255, 255, 255, 0.06);
    padding: 2px 6px;
    border-radius: 3px;
}

/* Row */
.timeline-v4 .timeline-row {
    position: relative;
    border-bottom: 1px solid rgba(255, 255, 255, 0.03);
}

.timeline-v4 .timeline-row.is-selected {
    background: rgba(99, 102, 241, 0.08);
}

.timeline-v4 .timeline-row.is-dragging {
    background: rgba(99, 102, 241, 0.12);
    z-index: 10;
}

/* The bar - NO animations/transitions */
.timeline-v4 .timeline-bar {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    height: 28px;
    border-radius: 4px;
    cursor: pointer;
    overflow: visible; /* Allow content to overflow */
    user-select: none;
}

/* Progress fill */
.timeline-v4 .bar-progress {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.2);
    pointer-events: none;
}

/* Resize handles */
.timeline-v4 .resize-handle {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 10px;
    cursor: ew-resize;
    z-index: 10;
}

.timeline-v4 .resize-handle::after {
    content: '';
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 14px;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 1.5px;
    opacity: 0;
    transition: opacity 80ms;
}

.timeline-v4 .timeline-bar:hover .resize-handle::after {
    opacity: 1;
}

.timeline-v4 .resize-start {
    left: 0;
}

.timeline-v4 .resize-start::after {
    left: 3px;
}

.timeline-v4 .resize-end {
    right: 0;
}

.timeline-v4 .resize-end::after {
    right: 3px;
}

/* Move handle */
.timeline-v4 .move-handle {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 10px;
    right: 10px;
    cursor: grab;
}

.timeline-v4 .move-handle:active {
    cursor: grabbing;
}

/* Bar content with sticky title */
.timeline-v4 .bar-content {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 0 10px;
    pointer-events: auto;
    cursor: pointer;
    white-space: nowrap;
    z-index: 5;
    z-index: 50; /* High z-index so text can overflow other bars */
}

.timeline-v4 .bar-emoji {
    font-size: 14px;
    flex-shrink: 0;
}

.timeline-v4 .bar-title {
    font-size: 12px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
    /* No overflow hidden - let it extend as long as needed */
}

.timeline-v4 .bar-days {
    font-size: 10px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.8);
    background: rgba(0, 0, 0, 0.35);
    padding: 2px 6px;
    border-radius: 3px;
    flex-shrink: 0;
}

.timeline-v4 .bar-days.overdue {
    background: rgba(180, 50, 50, 0.5);
    color: rgba(255, 180, 180, 0.9);
}

.timeline-v4 .bar-days.active {
    background: rgba(30, 140, 70, 0.4);
    color: rgba(180, 255, 200, 0.9);
}

.timeline-v4 .bar-days.upcoming {
    background: rgba(50, 100, 180, 0.4);
    color: rgba(180, 200, 255, 0.9);
}

.timeline-v4 .bar-days.completed {
    background: rgba(80, 90, 100, 0.4);
    color: rgba(200, 200, 200, 0.8);
}

.timeline-v4 .bar-stats {
    font-size: 10px;
    color: rgba(255, 255, 255, 0.6);
    background: rgba(0, 0, 0, 0.25);
    padding: 2px 5px;
    border-radius: 3px;
    flex-shrink: 0;
}

/* No dates placeholder */
.timeline-v4 .no-dates-label {
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 12px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px dashed rgba(255, 255, 255, 0.15);
    border-radius: 4px;
    cursor: pointer;
}

.timeline-v4 .no-dates-label:hover {
    background: rgba(255, 255, 255, 0.08);
}

.timeline-v4 .no-dates-label .bar-emoji {
    font-size: 14px;
}

.timeline-v4 .no-dates-label .bar-title {
    font-size: 12px;
    color: var(--notion-text-secondary);
    text-shadow: none;
}

.timeline-v4 .no-dates-label .no-dates-hint {
    font-size: 10px;
    color: var(--notion-text-muted);
}

/* Timeline bar selected state */
.timeline-v4 .timeline-bar.is-info-open {
    outline: 2px solid rgba(99, 102, 241, 0.6);
    outline-offset: 2px;
    z-index: 20;
}

/* Project Info Card */
.project-info-card {
    position: fixed;
    z-index: 1000;
    width: 300px;
    background: rgba(20, 20, 20, 0.98);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 12px;
    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.3);
    overflow: hidden;
    animation: infoCardIn 150ms ease;
}

@keyframes infoCardIn {
    from {
        opacity: 0;
        transform: translateY(-8px) scale(0.96);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@supports (backdrop-filter: blur(16px)) {
    .project-info-card {
        background: rgba(18, 18, 18, 0.85);
        backdrop-filter: blur(16px);
    }
}

.info-card-header {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.info-card-emoji {
    font-size: 28px;
    line-height: 1;
    flex-shrink: 0;
}

.info-card-title-group {
    flex: 1;
    min-width: 0;
}

.info-card-title {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: var(--notion-text);
    line-height: 1.3;
    word-break: break-word;
}

.info-card-status {
    display: inline-block;
    margin-top: 6px;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 500;
    color: white;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.info-card-close {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    color: var(--notion-text-muted);
    font-size: 12px;
    cursor: pointer;
    border-radius: 4px;
    transition: all 100ms ease;
    flex-shrink: 0;
}

.info-card-close:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
}

.info-card-dates {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.02);
}

.info-card-date {
    flex: 1;
    min-width: 80px;
}

.info-card-date .date-label {
    display: block;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--notion-text-muted);
    margin-bottom: 2px;
}

.info-card-date .date-value {
    display: block;
    font-size: 13px;
    font-weight: 500;
    color: var(--notion-text);
}

.info-card-date.overdue .date-value {
    color: #f87171;
}

.info-card-date.active .date-value {
    color: #60a5fa;
}

.info-card-stats {
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.info-card-stat {
    margin-bottom: 12px;
}

.info-card-stat .stat-value {
    font-size: 20px;
    font-weight: 700;
    color: var(--notion-text);
}

.info-card-stat .stat-label {
    font-size: 11px;
    color: var(--notion-text-muted);
    margin-left: 6px;
}

.stat-bar {
    height: 4px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
    margin-top: 8px;
    overflow: hidden;
}

.stat-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6, #60a5fa);
    border-radius: 2px;
    transition: width 300ms ease;
}

.info-card-stat-row {
    display: flex;
    gap: 16px;
}

.info-card-stat-item {
    flex: 1;
    text-align: center;
}

.info-card-stat-item .stat-num {
    display: block;
    font-size: 18px;
    font-weight: 600;
    color: var(--notion-text);
}

.info-card-stat-item .stat-desc {
    display: block;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    color: var(--notion-text-muted);
}

.info-card-stat-item.urgent .stat-num {
    color: #fbbf24;
}

.info-card-stat-item.overdue .stat-num {
    color: #f87171;
}

.info-card-actions {
    padding: 12px 16px;
    display: flex;
    gap: 8px;
}

.info-card-action {
    flex: 1;
    padding: 10px 16px;
    border: none;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 100ms ease;
}

.info-card-action.primary {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.8), rgba(139, 92, 246, 0.8));
    color: white;
}

.info-card-action.primary:hover {
    background: linear-gradient(135deg, rgba(99, 102, 241, 1), rgba(139, 92, 246, 1));
    transform: translateY(-1px);
}

/* ============================================
   ProjectHealth V4 - 2x2 Quadrant Grid Layout
   ============================================ */
.project-health-v4 {
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: var(--notion-bg);
    min-height: 0;
}

/* V4 Summary Row */
.health-v4-summary {
    display: flex;
    align-items: center;
    gap: 24px;
    padding: 16px 24px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    flex-shrink: 0;
}

.summary-score-ring {
    position: relative;
    width: 80px;
    height: 80px;
    flex-shrink: 0;
}

.summary-score-ring .score-svg {
    width: 100%;
    height: 100%;
}

.summary-score-ring .score-text {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.summary-score-ring .score-num {
    font-size: 22px;
    font-weight: 700;
    color: var(--notion-text);
    line-height: 1;
}

.summary-score-ring .score-lbl {
    font-size: 9px;
    color: var(--notion-text-secondary);
    text-transform: uppercase;
    margin-top: 2px;
}

.summary-counts {
    display: flex;
    gap: 16px;
    flex: 1;
}

.summary-count {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 16px;
    background: var(--notion-bg);
    border-radius: 8px;
    border-left: 3px solid;
    min-width: 70px;
}

.summary-count .count-icon {
    font-size: 14px;
}

.summary-count .count-num {
    font-size: 20px;
    font-weight: 700;
    color: var(--notion-text);
    line-height: 1;
    margin: 4px 0 2px;
}

.summary-count .count-lbl {
    font-size: 10px;
    color: var(--notion-text-muted);
}

/* 2x2 Grid Container */
.health-v4-grid {
    flex: 1;
    min-height: 0;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 1px;
    background: var(--notion-border);
    overflow: hidden;
}

/* Individual Quadrant */
.health-quadrant {
    display: flex;
    flex-direction: column;
    background: var(--notion-bg);
    overflow: hidden;
}

.quadrant-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px;
    border-bottom: 1px solid var(--notion-border);
    background: linear-gradient(90deg, var(--quadrant-color) 0%, transparent 100%);
    background-size: 4px 100%;
    background-repeat: no-repeat;
    flex-shrink: 0;
}

.quadrant-icon {
    font-size: 12px;
}

.quadrant-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--notion-text);
}

.quadrant-count {
    font-size: 11px;
    color: var(--notion-text-muted);
    background: rgba(255, 255, 255, 0.08);
    padding: 2px 8px;
    border-radius: 10px;
    margin-left: auto;
}

.quadrant-content {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    padding: 10px;
}

.quadrant-empty {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    font-size: 12px;
    color: var(--notion-text-muted);
}

/* 2-Column Cards Grid inside quadrant */
.quadrant-cards {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
}

/* V4 Card */
.health-card-v4 {
    background: var(--notion-bg-secondary);
    border-radius: 8px;
    border-left: 3px solid var(--card-color, var(--notion-border));
    cursor: pointer;
    transition: all 150ms ease;
    overflow: hidden;
}

.health-card-v4:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transform: translateY(-1px);
}

.health-card-v4.is-selected {
    box-shadow: 0 0 0 2px var(--card-color);
}

.health-card-v4.is-expanded {
    grid-column: span 2;
}

.health-card-v4 .card-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
}

.health-card-v4 .card-emoji {
    font-size: 16px;
    flex-shrink: 0;
}

.health-card-v4 .card-info {
    flex: 1;
    min-width: 0;
}

.health-card-v4 .card-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
}

.health-card-v4 .card-meta {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 2px;
    font-size: 10px;
}

.health-card-v4 .card-progress {
    color: var(--notion-text-secondary);
    font-weight: 500;
}

.health-card-v4 .card-deadline {
    color: var(--notion-text-muted);
}

.health-card-v4 .card-deadline.overdue {
    color: #fca5a5;
}

.health-card-v4 .card-momentum {
    font-size: 11px;
}

.health-card-v4 .card-tasks {
    font-size: 10px;
    color: var(--notion-text-muted);
    white-space: nowrap;
    flex-shrink: 0;
}

.health-card-v4 .card-reasons {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    padding: 0 12px 8px;
}

.health-card-v4 .reason-tag {
    font-size: 9px;
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.06);
    border-radius: 3px;
    color: var(--notion-text-muted);
}

/* V4 Expanded Card */
.health-card-v4 .card-expanded {
    padding: 10px 12px;
    border-top: 1px solid var(--notion-border);
    background: rgba(0, 0, 0, 0.1);
    animation: v4ExpandCard 200ms ease-out;
}

@keyframes v4ExpandCard {
    from {
        opacity: 0;
        max-height: 0;
    }
    to {
        opacity: 1;
        max-height: 200px;
    }
}

.health-card-v4 .expanded-row {
    display: flex;
    flex-wrap: wrap;
    gap: 6px 12px;
    font-size: 11px;
    margin-bottom: 8px;
}

.health-card-v4 .expanded-label {
    color: var(--notion-text-muted);
}

.health-card-v4 .expanded-value {
    color: var(--notion-text);
    font-weight: 600;
}

.health-card-v4 .expanded-value.danger {
    color: #fca5a5;
}

.health-card-v4 .expanded-next {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 10px;
    padding: 6px 8px;
    background: var(--notion-bg);
    border-radius: 4px;
    margin-bottom: 8px;
}

.health-card-v4 .next-label {
    color: var(--notion-text-muted);
    flex-shrink: 0;
}

.health-card-v4 .next-task {
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.health-card-v4 .expanded-btn {
    width: 100%;
    padding: 6px 10px;
    background: rgba(99, 102, 241, 0.12);
    border: 1px solid rgba(99, 102, 241, 0.25);
    border-radius: 4px;
    color: #a5b4fc;
    font-size: 10px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
}

.health-card-v4 .expanded-btn:hover {
    background: rgba(99, 102, 241, 0.2);
}

/* V4 Empty State */
.health-v4-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
    padding: 40px;
}

.health-v4-empty .empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
}

.health-v4-empty h3 {
    margin: 0 0 8px;
    font-size: 18px;
    font-weight: 600;
    color: var(--notion-text);
}

.health-v4-empty p {
    margin: 0;
    font-size: 14px;
    color: var(--notion-text-secondary);
}

/* V4 Responsive */
@media (max-width: 800px) {
    .health-v4-grid {
        grid-template-columns: 1fr;
        grid-template-rows: repeat(4, 1fr);
    }
    
    .quadrant-cards {
        grid-template-columns: 1fr;
    }
    
    .health-card-v4.is-expanded {
        grid-column: span 1;
    }
}

@media (min-width: 1400px) {
    .quadrant-cards {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* ============================================
   ProjectHealth V6 - Calm 2x2 Grid Layout
   ============================================ */
.project-health-v6 {
    height: 100%;
    display: flex;
    flex-direction: column;
    background: var(--notion-bg);
    overflow-y: auto;
    padding: 20px;
    gap: 20px;
}

/* Top Section: Timeline Left + Health Right */
.health-v6-top {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 20px;
    flex-shrink: 0;
}

/* Timeline Panel */
.top-timeline-panel {
    background: var(--notion-bg-secondary);
    border-radius: 16px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    min-height: 180px;
}

.panel-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--notion-text);
    margin: 0 0 16px;
}

.timeline-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.timeline-row {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 14px;
    background: var(--notion-bg);
    border-radius: 10px;
    cursor: pointer;
    transition: all 150ms ease;
    border-left: 4px solid var(--notion-border);
}

.timeline-row:hover {
    background: var(--notion-bg-hover);
    transform: translateX(4px);
}

.timeline-row.urgency-critical {
    border-left-color: #ef4444;
    background: rgba(239, 68, 68, 0.06);
}

.timeline-row.urgency-warning {
    border-left-color: #fbbf24;
    background: rgba(251, 191, 36, 0.05);
}

.row-date {
    font-size: 13px;
    font-weight: 600;
    color: var(--notion-text-secondary);
    min-width: 70px;
    flex-shrink: 0;
}

.timeline-row.urgency-critical .row-date {
    color: #fca5a5;
}

.row-label {
    flex: 1;
    font-size: 14px;
    font-weight: 500;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.timeline-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 32px;
    text-align: center;
    flex: 1;
}

.timeline-empty .empty-icon {
    font-size: 32px;
}

.timeline-empty .empty-text {
    font-size: 15px;
    color: var(--notion-text-muted);
}

/* Health Panel */
.top-health-panel {
    background: var(--notion-bg-secondary);
    border-radius: 16px;
    padding: 24px 32px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    min-width: 220px;
}

.health-chart-container {
    width: 140px;
    height: 140px;
}

.health-pie-chart {
    width: 100%;
    height: 100%;
}

.health-pie-chart .pie-segment {
    transition: opacity 150ms ease;
}

.health-pie-chart .pie-center-num {
    font-size: 28px;
    font-weight: 700;
    fill: var(--notion-text);
}

.health-pie-chart .pie-center-label {
    font-size: 10px;
    fill: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.health-score-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 14px 28px;
    background: var(--notion-bg);
    border-radius: 12px;
}

.health-score-value {
    font-size: 42px;
    font-weight: 700;
    color: var(--notion-text);
    line-height: 1;
}

.health-score-label {
    font-size: 12px;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    margin-top: 6px;
    letter-spacing: 0.5px;
}

/* Health Legend */
.health-legend {
    display: flex;
    flex-direction: column;
    gap: 6px;
    width: 100%;
    padding-top: 8px;
    border-top: 1px solid rgba(255, 255, 255, 0.06);
}

.legend-row {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 6px 8px;
    border-radius: 6px;
    transition: background 150ms ease;
}

.legend-row:hover {
    background: rgba(255, 255, 255, 0.04);
}

.legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--legend-color);
    flex-shrink: 0;
}

.legend-count {
    font-size: 16px;
    font-weight: 700;
    color: var(--notion-text);
    min-width: 24px;
}

.legend-label {
    font-size: 14px;
    color: var(--notion-text-muted);
}

/* 2x2 Quadrant Grid */
.health-v6-grid {
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding-bottom: 20px;
}

.grid-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

/* Individual Quadrant */
.health-quadrant {
    background: var(--q-bg);
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    border: 1px solid rgba(255, 255, 255, 0.06);
    transition: all 200ms ease;
}

.health-quadrant.is-collapsed {
    flex: 0 0 auto;
}

.quadrant-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 14px 18px;
    background: var(--q-bg-solid);
    border: none;
    cursor: pointer;
    transition: background 150ms ease;
    width: 100%;
    text-align: left;
    border-radius: 16px 16px 0 0;
    flex-shrink: 0;
    position: sticky;
    top: 0;
    z-index: 10;
}

.health-quadrant.is-collapsed .quadrant-header {
    border-radius: 16px;
}

.quadrant-header:hover {
    background: rgba(255, 255, 255, 0.12);
}

.quadrant-chevron {
    font-size: 11px;
    color: var(--notion-text-muted);
    transition: transform 200ms ease;
}

.quadrant-chevron.collapsed {
    transform: rotate(-90deg);
}

.quadrant-icon {
    font-size: 14px;
}

.quadrant-label {
    font-size: 15px;
    font-weight: 600;
    color: var(--q-color);
}

.quadrant-count {
    font-size: 13px;
    font-weight: 600;
    color: var(--notion-text-secondary);
    background: rgba(255, 255, 255, 0.1);
    padding: 4px 12px;
    border-radius: 12px;
    margin-left: auto;
}

.quadrant-content {
    padding: 12px 16px 16px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.quadrant-empty {
    padding: 24px;
    text-align: center;
    font-size: 14px;
    color: var(--notion-text-muted);
}

/* V6 Project Cards */
.health-card-v6 {
    background: var(--notion-bg);
    border-radius: 12px;
    cursor: pointer;
    transition: all 150ms ease;
}

.health-card-v6:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
}

.health-card-v6.is-selected {
    box-shadow: 0 0 0 2px var(--q-color);
}

.health-card-v6.is-expanded {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

/* Card Header */
.health-card-v6 .card-header-row {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px 10px;
}

.health-card-v6 .card-emoji {
    font-size: 22px;
    flex-shrink: 0;
}

.health-card-v6 .card-title-area {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.health-card-v6 .card-title {
    font-size: 15px;
    font-weight: 600;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.health-card-v6 .card-deadline {
    font-size: 12px;
    color: var(--notion-text-muted);
}

.health-card-v6 .card-deadline.overdue {
    color: #fca5a5;
    font-weight: 500;
}

.health-card-v6 .card-deadline.soon {
    color: #fcd34d;
}

.health-card-v6 .card-open-btn {
    padding: 8px 14px;
    background: rgba(99, 102, 241, 0.1);
    border: 1px solid rgba(99, 102, 241, 0.2);
    border-radius: 8px;
    color: #a5b4fc;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
    white-space: nowrap;
    flex-shrink: 0;
}

.health-card-v6 .card-open-btn:hover {
    background: rgba(99, 102, 241, 0.2);
}

/* Progress Bar Section */
.health-card-v6 .card-progress-section {
    padding: 0 16px 12px;
}

.health-card-v6 .progress-bar-container {
    height: 6px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 3px;
    overflow: hidden;
    margin-bottom: 10px;
}

.health-card-v6 .progress-bar-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 300ms ease;
}

.health-card-v6 .progress-stats {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
}

.health-card-v6 .stat-item {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 13px;
}

.health-card-v6 .stat-item .stat-value {
    font-weight: 600;
    color: var(--notion-text);
}

.health-card-v6 .stat-item .stat-label {
    color: var(--notion-text-muted);
}

.health-card-v6 .stat-item .stat-icon {
    font-size: 14px;
}

.health-card-v6 .stat-item.overdue .stat-value {
    color: #fca5a5;
}

.health-card-v6 .stat-item.overdue .stat-label {
    color: #fca5a5;
}

.health-card-v6 .stat-item.momentum {
    margin-left: auto;
}

/* Next Action Row */
.health-card-v6 .card-next-action {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 16px;
    background: rgba(0, 0, 0, 0.12);
    border-top: 1px solid rgba(255, 255, 255, 0.04);
    font-size: 13px;
}

.health-card-v6 .next-bullet {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    flex-shrink: 0;
}

.health-card-v6 .next-label {
    color: var(--notion-text-muted);
    flex-shrink: 0;
    font-weight: 500;
}

.health-card-v6 .next-task {
    color: var(--notion-text);
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Expanded Section */
.health-card-v6 .card-expanded-section {
    padding: 0 16px 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    animation: fadeSlide 200ms ease-out;
}

@keyframes fadeSlide {
    from {
        opacity: 0;
        transform: translateY(-8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Notes Section */
.health-card-v6 .notes-section {
    background: rgba(255, 255, 255, 0.04);
    border-radius: 8px;
    padding: 12px;
}

.health-card-v6 .notes-section.empty {
    padding: 16px;
    text-align: center;
}

.health-card-v6 .notes-header {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 8px;
}

.health-card-v6 .notes-icon {
    font-size: 14px;
}

.health-card-v6 .notes-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--notion-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.health-card-v6 .notes-content {
    font-size: 14px;
    color: var(--notion-text);
    line-height: 1.5;
    white-space: pre-wrap;
}

.health-card-v6 .notes-placeholder {
    font-size: 13px;
    color: var(--notion-text-muted);
    font-style: italic;
}

/* Insight Section */
.health-card-v6 .insight-section {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 12px;
    background: rgba(251, 191, 36, 0.08);
    border-radius: 8px;
    border-left: 3px solid #fbbf24;
}

.health-card-v6 .insight-icon {
    font-size: 16px;
    flex-shrink: 0;
}

.health-card-v6 .insight-text {
    font-size: 14px;
    color: var(--notion-text);
    line-height: 1.4;
}

/* Mini Stats Grid */
.health-card-v6 .mini-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    gap: 8px;
}

.health-card-v6 .mini-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 10px 8px;
    background: rgba(255, 255, 255, 0.04);
    border-radius: 8px;
    text-align: center;
}

.health-card-v6 .mini-label {
    font-size: 11px;
    color: var(--notion-text-muted);
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.health-card-v6 .mini-value {
    font-size: 15px;
    font-weight: 600;
    color: var(--notion-text);
}

/* V6 Empty State */
.health-v6-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
    padding: 40px;
}

.health-v6-empty .empty-icon {
    font-size: 56px;
    margin-bottom: 20px;
}

.health-v6-empty h3 {
    margin: 0 0 10px;
    font-size: 20px;
    font-weight: 600;
    color: var(--notion-text);
}

.health-v6-empty p {
    margin: 0;
    font-size: 15px;
    color: var(--notion-text-secondary);
}

/* V6 Responsive */
@media (max-width: 900px) {
    .project-health-v6 {
        padding: 16px;
        gap: 16px;
    }
    
    .health-v6-top {
        grid-template-columns: 1fr;
    }
    
    .top-health-panel {
        flex-direction: row;
        justify-content: space-around;
    }
    
    .grid-row {
        grid-template-columns: 1fr;
    }
}

/* V5 Cards */
.health-card-v5 {
    background: var(--notion-bg-secondary);
    border-radius: 8px;
    border-left: 3px solid var(--card-color, var(--notion-border));
    cursor: pointer;
    transition: all 150ms ease;
    overflow: hidden;
}

.health-card-v5:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transform: translateY(-1px);
}

.health-card-v5.is-selected {
    box-shadow: 0 0 0 2px var(--card-color);
}

.health-card-v5 .card-main {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
}

.health-card-v5 .card-emoji {
    font-size: 18px;
    flex-shrink: 0;
}

.health-card-v5 .card-content {
    flex: 1;
    min-width: 0;
}

.health-card-v5 .card-title-row {
    display: flex;
    align-items: center;
    gap: 8px;
}

.health-card-v5 .card-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--notion-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
}

.health-card-v5 .card-progress-badge {
    font-size: 11px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 4px;
    background: rgba(34, 197, 94, 0.15);
    color: #22c55e;
    flex-shrink: 0;
}

.health-card-v5 .card-stats {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 4px;
    font-size: 11px;
    color: var(--notion-text-muted);
}

.health-card-v5 .stat {
    display: flex;
    align-items: center;
    gap: 3px;
}

.health-card-v5 .stat-value {
    font-weight: 600;
    color: var(--notion-text-secondary);
}

.health-card-v5 .stat-divider {
    opacity: 0.5;
}

.health-card-v5 .stat-total {
    opacity: 0.7;
}

.health-card-v5 .stat-icon {
    font-size: 10px;
}

.health-card-v5 .stat.overdue {
    color: #fca5a5;
}

.health-card-v5 .stat.overdue .stat-value {
    color: #fca5a5;
}

.health-card-v5 .stat.warning {
    color: #fcd34d;
}

.health-card-v5 .card-action-btn {
    padding: 6px 12px;
    background: rgba(99, 102, 241, 0.12);
    border: 1px solid rgba(99, 102, 241, 0.25);
    border-radius: 6px;
    color: #a5b4fc;
    font-size: 11px;
    font-weight: 500;
    cursor: pointer;
    transition: all 150ms ease;
    white-space: nowrap;
    flex-shrink: 0;
}

.health-card-v5 .card-action-btn:hover {
    background: rgba(99, 102, 241, 0.25);
}

/* Next Action Row */
.health-card-v5 .card-next-action {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 14px;
    background: rgba(0, 0, 0, 0.15);
    border-top: 1px solid var(--notion-border);
    font-size: 11px;
}

.health-card-v5 .next-icon {
    color: var(--card-color);
    font-size: 8px;
}

.health-card-v5 .next-text {
    color: var(--notion-text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Insight Row (expanded) */
.health-card-v5 .card-insight {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 10px 14px;
    background: rgba(251, 191, 36, 0.08);
    border-top: 1px solid var(--notion-border);
    font-size: 11px;
    animation: fadeSlideIn 200ms ease-out;
}

@keyframes fadeSlideIn {
    from {
        opacity: 0;
        transform: translateY(-4px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.health-card-v5 .insight-icon {
    font-size: 12px;
    flex-shrink: 0;
}

.health-card-v5 .insight-text {
    color: var(--notion-text);
    line-height: 1.4;
}

/* V5 Empty State */
.health-v5-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
    padding: 40px;
}

.health-v5-empty .empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
}

.health-v5-empty h3 {
    margin: 0 0 8px;
    font-size: 18px;
    font-weight: 600;
    color: var(--notion-text);
}

.health-v5-empty p {
    margin: 0;
    font-size: 14px;
    color: var(--notion-text-secondary);
}

/* V5 Responsive */
@media (max-width: 600px) {
    .health-v5-header {
        flex-direction: column;
        gap: 16px;
        padding: 16px;
    }
    
    .header-chart {
        width: 80px;
        height: 80px;
    }
    
    .header-legend {
        justify-content: center;
    }
    
    .health-timeline {
        padding: 12px 16px;
    }
    
    .timeline-item {
        padding: 6px 10px;
    }
    
    .column-content {
        padding: 8px 12px;
    }
}

/* ============================================
   Writing Log View Styles
   ============================================ */
/* Done/Completed Tasks Section (fullscreen view) */
.done-section {
    padding: 0;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.done-section-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 12px 24px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    flex-shrink: 0;
}

.done-section-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: #4ade80;
}

.done-count {
    font-size: 12px;
    color: var(--notion-text-muted);
    padding: 3px 8px;
    background: rgba(34, 197, 94, 0.15);
    border-radius: 999px;
}

.done-search {
    flex: 1;
    max-width: 300px;
    margin-left: auto;
}

.done-tasks-list {
    flex: 1;
    overflow-y: auto;
    padding: 16px 24px;
}

.done-tasks-list .task-list {
    max-width: 800px;
}

.done-tasks-list .task-group-header {
    background: rgba(34, 197, 94, 0.08);
    border-color: rgba(34, 197, 94, 0.2);
}

.done-tasks-list .task-group-title {
    color: #4ade80;
}

/* Done Widget Section (in widget header toggle) */
.done-widget-section {
    padding: 16px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.done-widget-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding-bottom: 12px;
    margin-bottom: 8px;
    border-bottom: 1px solid var(--notion-border);
}

.done-widget-header .done-count {
    font-size: 12px;
    color: #4ade80;
}

.done-widget-list {
    flex: 1;
    overflow-y: auto;
}

.done-widget-list .task-list {
    max-width: 100%;
}

/* Writing Section */
.writing-section {
    padding: 0;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.writing-section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 24px;
    border-bottom: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    flex-shrink: 0;
}

.writing-section-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: var(--notion-text);
}

.writing-log-view {
    display: flex;
    flex-direction: column;
    flex: 1;
    overflow: auto;
    padding: 24px;
}

.writing-view-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 400px;
    color: var(--notion-text-muted);
    text-align: center;
}

.writing-empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
}

.writing-view-empty h3 {
    margin: 0 0 8px;
    color: var(--notion-text);
}

.writing-view-empty p {
    margin: 0;
}

.writing-view-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--notion-border);
}

.writing-toolbar-left {
    display: flex;
    align-items: center;
    gap: 16px;
}

.writing-sort-select {
    padding: 8px 12px;
    border: 1px solid var(--notion-border);
    background: var(--notion-bg-secondary);
    color: var(--notion-text);
    border-radius: var(--radius-md);
    font-size: 13px;
    cursor: pointer;
}

.writing-toolbar-right {
    display: flex;
    align-items: center;
    gap: 16px;
}

.writing-view-toggle {
    display: flex;
    gap: 4px;
}

.writing-view-toggle button {
    padding: 6px 12px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text-muted);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 12px;
    transition: all 150ms ease;
}

.writing-view-toggle button:hover {
    background: var(--notion-bg-hover);
    color: var(--notion-text);
}

.writing-view-toggle button.active {
    background: var(--notion-blue);
    color: white;
    border-color: var(--notion-blue);
}

.writing-view-content {
    flex: 1;
    overflow-y: auto;
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
}

.writing-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 300px;
    color: var(--notion-text-muted);
    text-align: center;
}

.writing-empty h3 {
    margin: 0 0 8px;
    color: var(--notion-text);
}

.writing-empty p {
    margin: 0;
}

/* By Project View */
.writing-by-project {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.writing-project-group {
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.writing-project-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--notion-bg-secondary);
    border-bottom: 1px solid var(--notion-border);
}

.writing-project-info {
    display: flex;
    align-items: center;
    gap: 8px;
}

.writing-project-icon {
    font-size: 16px;
}

.writing-project-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--notion-text);
}

.writing-project-count {
    font-size: 12px;
    color: var(--notion-text-muted);
    background: var(--notion-bg);
    padding: 2px 8px;
    border-radius: 10px;
}

.writing-compose-btn {
    padding: 6px 12px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 12px;
    transition: all 150ms ease;
}

.writing-compose-btn:hover {
    background: var(--notion-bg-hover);
    border-color: var(--notion-blue);
}

.writing-compose-btn.project {
    background: var(--notion-bg);
}

.writing-project-tasks {
    padding: 8px;
}

/* Task Cards */
.writing-task-card {
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    margin-bottom: 8px;
    overflow: hidden;
}

.writing-task-card:last-child {
    margin-bottom: 0;
}

.writing-task-card.is-complete {
    opacity: 0.7;
}

.writing-task-header {
    display: flex;
    align-items: center;
    padding: 10px 12px;
    background: var(--notion-bg);
    cursor: pointer;
    transition: background 150ms ease;
}

.writing-task-header:hover {
    background: var(--notion-bg-hover);
}

.writing-task-info {
    flex: 1;
    min-width: 0;
}

.writing-task-title {
    font-size: 13px;
    font-weight: 500;
    color: var(--notion-text);
}

.writing-task-projects {
    display: flex;
    gap: 6px;
    margin-top: 4px;
}

.writing-project-badge {
    font-size: 10px;
    color: var(--notion-text-muted);
    background: var(--notion-bg-secondary);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
}

.writing-task-actions {
    display: flex;
    align-items: center;
    gap: 8px;
}

.writing-expand-icon {
    font-size: 12px;
    color: var(--notion-text-muted);
}

.writing-task-details {
    padding: 12px;
    background: var(--notion-bg-secondary);
    border-top: 1px solid var(--notion-border);
}

.writing-task-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-bottom: 12px;
    font-size: 12px;
    color: var(--notion-text-muted);
}

.writing-meta-item {
    display: flex;
    align-items: center;
    gap: 4px;
}

.writing-task-notes {
    margin-bottom: 12px;
}

.writing-notes-label {
    font-size: 11px;
    color: var(--notion-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 6px;
}

.writing-notes-content {
    font-size: 13px;
    color: var(--notion-text);
    line-height: 1.5;
    white-space: pre-wrap;
}

.writing-task-footer {
    display: flex;
    justify-content: flex-end;
}

.writing-open-task {
    padding: 6px 12px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-blue);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 12px;
    transition: all 150ms ease;
}

.writing-open-task:hover {
    background: var(--notion-bg-hover);
}

/* By Task View */
.writing-by-task {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* Compose View */
.writing-compose {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.writing-compose-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--notion-border);
}

.writing-compose-back {
    padding: 8px 16px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 13px;
    transition: all 150ms ease;
}

.writing-compose-back:hover {
    background: var(--notion-bg-hover);
}

.writing-compose-target {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.writing-compose-type {
    font-size: 12px;
    color: var(--notion-text-muted);
}

.writing-compose-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--notion-text);
}

.writing-feedback {
    padding: 12px 16px;
    border-radius: var(--radius-md);
    margin-bottom: 16px;
    font-size: 13px;
}

.writing-feedback.success {
    background: rgba(34, 197, 94, 0.2);
    color: #22c55e;
    border: 1px solid rgba(34, 197, 94, 0.3);
}

.writing-feedback.error {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.writing-compose-editor {
    flex: 1;
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    overflow: hidden;
    margin-bottom: 16px;
}

.writing-compose-editor .rich-body-editor {
    min-height: 300px;
}

.writing-compose-actions {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
}

.writing-cancel-btn {
    padding: 10px 20px;
    border: 1px solid var(--notion-border);
    background: transparent;
    color: var(--notion-text);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 14px;
    transition: all 150ms ease;
}

.writing-cancel-btn:hover:not(:disabled) {
    background: var(--notion-bg-hover);
}

.writing-cancel-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.writing-submit-btn {
    padding: 10px 20px;
    border: none;
    background: var(--notion-blue);
    color: white;
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 150ms ease;
}

.writing-submit-btn:hover:not(:disabled) {
    background: #1a6fc9;
}

.writing-submit-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* =====================================
   SEARCH INPUT COMPONENT
   ===================================== */

.search-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-md);
    transition: all 180ms ease;
}

.search-input-wrapper:hover {
    background: rgba(255, 255, 255, 0.06);
    border-color: var(--notion-text-muted);
}

.search-input-wrapper:focus-within {
    background: rgba(255, 255, 255, 0.08);
    border-color: var(--notion-blue);
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

.search-input-wrapper.has-value {
    border-color: var(--notion-blue);
    background: rgba(59, 130, 246, 0.06);
}

.search-input-wrapper.search-input-compact {
    padding: 5px 10px;
}

.search-input-wrapper.search-input-compact .search-input {
    font-size: 12px;
}

.search-input-wrapper.search-input-compact .search-input-icon {
    font-size: 12px;
}

.search-input-icon {
    font-size: 14px;
    opacity: 0.5;
    flex-shrink: 0;
    user-select: none;
}

.search-input-wrapper:focus-within .search-input-icon,
.search-input-wrapper.has-value .search-input-icon {
    opacity: 0.8;
}

.search-input {
    flex: 1;
    min-width: 0;
    background: transparent;
    border: none;
    outline: none;
    font-size: 13px;
    color: var(--notion-text);
    font-family: inherit;
}

.search-input::placeholder {
    color: var(--notion-text-muted);
    opacity: 0.6;
}

.search-input-clear {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    padding: 0;
    border: none;
    background: rgba(255, 255, 255, 0.1);
    color: var(--notion-text);
    border-radius: 50%;
    cursor: pointer;
    font-size: 14px;
    line-height: 1;
    opacity: 0.6;
    transition: all 150ms ease;
    flex-shrink: 0;
}

.search-input-clear:hover {
    opacity: 1;
    background: rgba(239, 68, 68, 0.3);
    color: #fca5a5;
}

.search-input-shortcut {
    font-size: 10px;
    color: var(--notion-text-muted);
    opacity: 0.4;
    padding: 2px 5px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 3px;
    flex-shrink: 0;
    user-select: none;
}

.search-input-wrapper:focus-within .search-input-shortcut {
    display: none;
}

/* Search results count badge */
.search-results-count {
    font-size: 11px;
    color: var(--notion-text-muted);
    padding: 4px 10px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--radius-sm);
    margin-left: 8px;
}

.search-results-count.has-results {
    color: var(--notion-blue);
    background: rgba(59, 130, 246, 0.12);
}

.search-results-count.no-results {
    color: #f87171;
    background: rgba(239, 68, 68, 0.12);
}

/* Highlighted search match in text */
.search-highlight {
    background: rgba(250, 204, 21, 0.35);
    color: inherit;
    padding: 0 2px;
    border-radius: 2px;
}

/* Search toolbar row */
.search-toolbar {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 0;
    flex-wrap: wrap;
}

.search-toolbar .search-input-wrapper {
    flex: 1;
    min-width: 180px;
}

/* Task list with search - show empty state when no matches */
.task-list-search-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 40px 20px;
    color: var(--notion-text-muted);
    text-align: center;
}

.task-list-search-empty .search-empty-icon {
    font-size: 32px;
    opacity: 0.5;
}

.task-list-search-empty .search-empty-text {
    font-size: 14px;
    opacity: 0.8;
}

.task-list-search-empty .search-empty-query {
    font-weight: 600;
    color: var(--notion-text);
    font-style: italic;
}

.task-list-search-empty .search-clear-btn {
    padding: 6px 14px;
    font-size: 12px;
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid var(--notion-border);
    border-radius: var(--radius-sm);
    color: var(--notion-text);
    cursor: pointer;
    transition: all 150ms ease;
}

.task-list-search-empty .search-clear-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--notion-blue);
}

/* Fullscreen search bar */
.fullscreen-search-bar {
    display: flex;
    align-items: center;
    gap: 10px;
    flex: 1;
    max-width: 400px;
}

.fullscreen-search-bar .search-input-wrapper {
    flex: 1;
}

/* TimeLog search */
.timelog-search-bar {
    padding: 0 12px 12px;
}

.timelog-search-bar .search-input-wrapper {
    width: 100%;
}

/* ===================================================
   Mass Edit Toolbar
   =================================================== */

.mass-edit-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%);
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: var(--radius-md);
  margin-bottom: 12px;
  gap: 12px;
  flex-wrap: wrap;
  position: sticky;
  top: 0;
  z-index: 100;
  backdrop-filter: blur(8px);
}

.mass-edit-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.mass-edit-count {
  display: flex;
  align-items: center;
  gap: 8px;
}

.mass-edit-checkbox input[type="checkbox"] {
  width: 16px;
  height: 16px;
  cursor: pointer;
  accent-color: var(--notion-blue);
}

.mass-edit-label {
  font-size: 13px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.9);
}

.mass-edit-hint {
  font-weight: 400;
  color: rgba(255, 255, 255, 0.6);
  font-size: 12px;
}

.mass-edit-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.mass-edit-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-sm);
  color: rgba(255, 255, 255, 0.9);
  cursor: pointer;
  transition: all 150ms ease;
}

.mass-edit-btn:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.25);
}

.mass-edit-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.mass-edit-btn.mass-edit-clear {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.3);
  color: #fca5a5;
}

.mass-edit-btn.mass-edit-clear:hover {
  background: rgba(239, 68, 68, 0.2);
  border-color: rgba(239, 68, 68, 0.5);
}

.mass-edit-deadline-toggle {
  display: flex;
  gap: 4px;
}

.mass-edit-btn.deadline-hard {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.25);
}

.mass-edit-btn.deadline-hard:hover {
  background: rgba(239, 68, 68, 0.2);
  border-color: rgba(239, 68, 68, 0.4);
}

.mass-edit-btn.deadline-soft {
  background: rgba(59, 130, 246, 0.1);
  border-color: rgba(59, 130, 246, 0.25);
}

.mass-edit-btn.deadline-soft:hover {
  background: rgba(59, 130, 246, 0.2);
  border-color: rgba(59, 130, 246, 0.4);
}

.mass-edit-dropdown-container {
  position: relative;
}

.mass-edit-dropdown {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  min-width: 200px;
  background: var(--notion-bg);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-md);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  z-index: 200;
  overflow: hidden;
}

.mass-edit-dropdown-header {
  padding: 10px 12px;
  font-size: 12px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.6);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.03);
}

.mass-edit-dropdown-content {
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  max-height: 300px;
  overflow-y: auto;
}

.mass-edit-dropdown-option {
  display: block;
  width: 100%;
  text-align: left;
  padding: 8px 10px;
  font-size: 13px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: rgba(255, 255, 255, 0.9);
  cursor: pointer;
  transition: background 100ms ease;
}

.mass-edit-dropdown-option:hover {
  background: rgba(255, 255, 255, 0.1);
}

.mass-edit-dropdown-action {
  display: block;
  width: 100%;
  text-align: center;
  padding: 8px 10px;
  margin-top: 4px;
  font-size: 12px;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-sm);
  color: rgba(255, 255, 255, 0.6);
  cursor: pointer;
  transition: all 100ms ease;
}

.mass-edit-dropdown-action:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.9);
}

.mass-edit-dropdown-action.clear {
  color: #fca5a5;
  border-color: rgba(239, 68, 68, 0.2);
}

.mass-edit-dropdown-action.clear:hover {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.4);
}

.mass-edit-dropdown.priority-dropdown .mass-edit-dropdown-content.priority-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
}

.mass-edit-priority-option {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px 8px;
  font-size: 12px;
  font-weight: 500;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-sm);
  color: rgba(255, 255, 255, 0.9);
  cursor: pointer;
  transition: all 150ms ease;
}

.mass-edit-priority-option:hover {
  transform: scale(1.02);
}

.mass-edit-priority-option.matrix-do-now {
  background: rgba(239, 68, 68, 0.15);
  border-color: rgba(239, 68, 68, 0.3);
}

.mass-edit-priority-option.matrix-do-now:hover {
  background: rgba(239, 68, 68, 0.25);
  border-color: rgba(239, 68, 68, 0.5);
}

.mass-edit-priority-option.matrix-schedule {
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.3);
}

.mass-edit-priority-option.matrix-schedule:hover {
  background: rgba(59, 130, 246, 0.25);
  border-color: rgba(59, 130, 246, 0.5);
}

.mass-edit-priority-option.matrix-delegate {
  background: rgba(234, 179, 8, 0.15);
  border-color: rgba(234, 179, 8, 0.3);
}

.mass-edit-priority-option.matrix-delegate:hover {
  background: rgba(234, 179, 8, 0.25);
  border-color: rgba(234, 179, 8, 0.5);
}

.mass-edit-priority-option.matrix-eliminate {
  background: rgba(148, 163, 184, 0.15);
  border-color: rgba(148, 163, 184, 0.3);
}

.mass-edit-priority-option.matrix-eliminate:hover {
  background: rgba(148, 163, 184, 0.25);
  border-color: rgba(148, 163, 184, 0.5);
}

.mass-edit-loading {
  position: absolute;
  right: 12px;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.6);
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

/* ========================================
   Sub-view Picker (2x2 grid for task views)
   ======================================== */

.sub-view-picker {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 4px;
  padding: 4px;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-md);
}

.sub-view-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  padding: 8px 14px;
  background: transparent;
  border: 1px solid transparent;
  border-radius: var(--radius-sm);
  color: rgba(255, 255, 255, 0.6);
  cursor: pointer;
  transition: all 150ms ease;
  min-width: 72px;
}

.sub-view-btn:hover {
  background: rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.9);
}

.sub-view-btn.active {
  background: rgba(59, 130, 246, 0.2);
  border-color: rgba(59, 130, 246, 0.4);
  color: #bfdbfe;
}

.sub-view-icon {
  font-size: 16px;
  line-height: 1;
}

.sub-view-label {
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 0.02em;
}

/* ========================================
   Matrix Split View (List + Matrix side by side)
   ======================================== */

.matrix-split-view {
  display: flex;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.matrix-split-sidebar {
  display: flex;
  flex-direction: column;
  min-width: 200px;
  max-width: 900px;
  background: var(--notion-bg-secondary);
  border-right: 1px solid var(--notion-border);
}

.matrix-split-sidebar-header {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  border-bottom: 1px solid var(--notion-border);
}

.matrix-split-sidebar-header h3 {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  color: var(--notion-text);
}

.matrix-split-tasks {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.matrix-split-tasks.has-quick-add {
  padding-bottom: 0;
}

.matrix-split-resizer {
  width: 6px;
  background: transparent;
  cursor: col-resize;
  transition: background 150ms ease;
  flex-shrink: 0;
  position: relative;
}

.matrix-split-resizer::before {
  content: '';
  position: absolute;
  left: 2px;
  top: 50%;
  transform: translateY(-50%);
  width: 2px;
  height: 40px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 1px;
  transition: height 150ms ease, background 150ms ease;
}

.matrix-split-resizer:hover::before,
.matrix-split-resizer.is-active::before {
  height: 80px;
  background: rgba(59, 130, 246, 0.6);
}

.matrix-split-resizer.is-active {
  background: rgba(59, 130, 246, 0.1);
}

.matrix-split-main {
  flex: 1;
  min-width: 400px;
  overflow: auto;
  padding: 16px;
}

/* ========================================
   Kanban Board Styles
   ======================================== */

.kanban-section {
  padding: 16px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.kanban-board {
  display: flex;
  flex-direction: column;
  height: 100%;
  gap: 12px;
}

/* When toolbar is hidden, columns take full height */
.kanban-board.no-toolbar {
  gap: 0;
}

.kanban-board.no-toolbar .kanban-columns {
  padding-top: 0;
}

.kanban-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 10px 16px;
  background: var(--notion-bg-secondary);
  border-radius: var(--radius-md);
  flex-shrink: 0;
  flex-wrap: wrap;
}

.kanban-toolbar-left {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

/* Kanban search */
.kanban-search {
  position: relative;
  display: flex;
  align-items: center;
}

.kanban-search input {
  width: 160px;
  padding: 6px 12px;
  padding-right: 28px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: var(--radius-sm);
  color: var(--notion-text);
  font-size: 12px;
  transition: all 150ms ease;
}

.kanban-search input:focus {
  outline: none;
  border-color: var(--notion-blue);
  background: rgba(255, 255, 255, 0.08);
  width: 200px;
}

.kanban-search input::placeholder {
  color: var(--notion-text-muted);
}

.kanban-search button {
  position: absolute;
  right: 4px;
  background: transparent;
  border: none;
  color: var(--notion-text-muted);
  font-size: 10px;
  cursor: pointer;
  padding: 4px;
}

.kanban-search button:hover {
  color: var(--notion-text);
}

/* Kanban group selector */
.kanban-group-selector {
  display: flex;
  align-items: center;
  gap: 8px;
}

.kanban-group-selector label {
  font-size: 11px;
  color: var(--notion-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.kanban-group-selector select,
.kanban-filter select {
  padding: 6px 10px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: var(--radius-sm);
  color: var(--notion-text);
  font-size: 12px;
  cursor: pointer;
}

.kanban-group-selector select:focus,
.kanban-filter select:focus {
  outline: none;
  border-color: var(--notion-blue);
}

/* Completed toggle */
/* Legacy toggle styles removed - using .toggle-switch instead */

.kanban-toolbar-right {
  display: flex;
  align-items: center;
  gap: 16px;
}

.kanban-stats {
  display: flex;
  gap: 16px;
  font-size: 12px;
  color: var(--notion-text-muted);
}

.kanban-stat strong {
  color: var(--notion-text);
  font-weight: 600;
  margin-right: 2px;
}

.kanban-stat.progress strong {
  color: #3b82f6;
}

.kanban-stat.done strong {
  color: #22c55e;
}

.kanban-close-btn {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.15);
  color: var(--notion-text-muted);
  width: 28px;
  height: 28px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 150ms ease;
}

.kanban-close-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--notion-text);
}

.kanban-columns {
  display: flex;
  gap: 12px;
  flex: 1;
  overflow-x: auto;
  padding-bottom: 8px;
}

/* Vertical layout mode (rows stacked) */
.kanban-columns.is-vertical {
  flex-direction: column;
  overflow-x: hidden;
  overflow-y: auto;
  gap: 8px;
}

.kanban-columns.is-vertical .kanban-column {
  flex-direction: row;
  width: 100% !important;
  min-width: 100% !important;
  max-width: 100% !important;
  height: auto;
  min-height: 80px;
}

.kanban-columns.is-vertical .kanban-column-header {
  flex-direction: column;
  width: 140px;
  min-width: 140px;
  flex-shrink: 0;
  border-bottom: none;
  border-right: 1px solid var(--notion-border);
  padding: 12px;
  text-align: center;
}

.kanban-columns.is-vertical .kanban-column-drag-handle {
  transform: rotate(90deg);
}

.kanban-columns.is-vertical .kanban-column-body {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  gap: 8px;
  padding: 8px 12px;
  overflow-x: auto;
  overflow-y: hidden;
  align-content: flex-start;
}

.kanban-columns.is-vertical .kanban-card {
  flex-shrink: 0;
  width: 220px;
  min-width: 180px;
  max-width: 280px;
}

.kanban-columns.is-vertical .kanban-column-empty {
  width: auto;
  min-width: 180px;
}

.kanban-columns.is-vertical .kanban-column-resizer {
  display: none;
}

/* Layout toggle buttons */
.kanban-layout-toggle {
  display: flex;
  background: var(--notion-bg);
  border: 1px solid var(--notion-border);
  border-radius: 6px;
  overflow: hidden;
}

.layout-toggle-btn {
  padding: 6px 10px;
  background: transparent;
  border: none;
  color: var(--notion-text-muted);
  font-size: 14px;
  cursor: pointer;
  transition: all 100ms ease;
}

.layout-toggle-btn:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

.layout-toggle-btn.is-active {
  background: rgba(99, 102, 241, 0.15);
  color: #a5b4fc;
}

.layout-toggle-btn:first-child {
  border-right: 1px solid var(--notion-border);
}

.kanban-column {
  position: relative;
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  background: var(--notion-bg-secondary);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-md);
  overflow: hidden;
  transition: border-color 150ms ease, box-shadow 150ms ease, width 0ms;
}

.kanban-column.is-drop-target {
  border-color: var(--column-color, #3b82f6);
  box-shadow: 0 0 0 2px var(--column-color, rgba(59, 130, 246, 0.3));
}

.kanban-column.is-collapsed {
  width: 60px !important;
  min-width: 60px !important;
  max-width: 60px !important;
}

.kanban-column.is-collapsed .kanban-column-header {
  flex-direction: column;
  padding: 14px 8px;
  text-align: center;
}

.kanban-column.is-collapsed .kanban-column-title {
  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);
  font-size: 11px;
}

.kanban-column.is-collapsed .kanban-column-count {
  margin-top: 8px;
}

.kanban-column.is-collapsed .kanban-column-collapse {
  margin-top: 8px;
}

.kanban-column.is-completed-column {
  opacity: 0.7;
}

.kanban-column-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 16px;
  background: var(--notion-bg);
  border-bottom: 1px solid var(--notion-border);
  cursor: pointer;
  user-select: none;
  transition: background 100ms ease;
}

.kanban-column-header:hover {
  background: var(--notion-bg-hover);
}

.kanban-column-indicator {
  width: 4px;
  height: 18px;
  background: var(--column-color, #6b7280);
  border-radius: 2px;
  flex-shrink: 0;
}

.kanban-column-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--notion-text);
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.kanban-column-count {
  font-size: 12px;
  font-weight: 500;
  color: var(--notion-text-muted);
  background: rgba(255, 255, 255, 0.08);
  padding: 2px 8px;
  border-radius: 999px;
  min-width: 24px;
  text-align: center;
}

.kanban-column-collapse {
  background: transparent;
  border: none;
  color: var(--notion-text-muted);
  font-size: 10px;
  cursor: pointer;
  padding: 4px;
  transition: color 100ms ease;
}

.kanban-column-collapse:hover {
  color: var(--notion-text);
}

/* Column drag handle */
.kanban-column-drag-handle {
  font-size: 10px;
  color: var(--notion-text-muted);
  opacity: 0.4;
  cursor: grab;
  margin-right: -4px;
  transition: opacity 100ms ease;
}

.kanban-column-header:hover .kanban-column-drag-handle {
  opacity: 0.8;
}

.kanban-column-drag-handle:active {
  cursor: grabbing;
}

/* Column dragging states */
.kanban-column.is-column-dragging {
  opacity: 0.5;
  transform: scale(0.98);
}

.kanban-column.is-column-drop-target {
  outline: 2px solid rgba(99, 102, 241, 0.6);
  outline-offset: -2px;
}

.kanban-column.is-column-drop-target .kanban-column-header {
  background: rgba(99, 102, 241, 0.1);
}

.kanban-columns.is-column-dragging .kanban-column:not(.is-column-dragging) {
  transition: transform 200ms ease;
}

.kanban-column.is-collapsed .kanban-column-header {
  flex-direction: column;
  padding: 16px 8px;
  gap: 12px;
}

.kanban-column.is-collapsed .kanban-column-title {
  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);
  white-space: nowrap;
  overflow: visible;
}

.kanban-column.is-collapsed .kanban-column-count {
  transform: rotate(0deg);
}

.kanban-column.is-collapsed .kanban-column-collapse {
  transform: rotate(-90deg);
}

.kanban-column-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px;
  overflow-y: auto;
  min-height: 120px;
}

.kanban-column-empty {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  color: var(--notion-text-muted);
  font-style: italic;
  min-height: 80px;
  border: 2px dashed rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-sm);
}

/* Column resize handle */
.kanban-column-resizer {
  position: absolute;
  top: 0;
  right: -6px;
  width: 12px;
  height: 100%;
  cursor: col-resize;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
}

.kanban-column-resizer::after {
  content: '';
  width: 4px;
  height: 40px;
  background: transparent;
  border-radius: 2px;
  transition: background 150ms ease;
}

.kanban-column-resizer:hover::after,
.kanban-column.is-resizing .kanban-column-resizer::after {
  background: var(--notion-blue);
}

.kanban-columns.is-resizing {
  user-select: none;
}

.kanban-column.is-resizing {
  z-index: 20;
}

/* Professional Toggle Switch */
.toggle-switch {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background 150ms ease;
}

.toggle-switch:hover {
  background: rgba(255, 255, 255, 0.06);
}

.toggle-switch-track {
  position: relative;
  width: 36px;
  height: 20px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 10px;
  transition: background 200ms ease;
}

.toggle-switch.is-active .toggle-switch-track {
  background: var(--notion-green, #22c55e);
}

.toggle-switch-thumb {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 16px;
  height: 16px;
  background: white;
  border-radius: 50%;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.toggle-switch.is-active .toggle-switch-thumb {
  transform: translateX(16px);
}

.toggle-switch-label {
  font-size: 12px;
  font-weight: 500;
  color: var(--notion-text-muted);
  transition: color 150ms ease;
}

.toggle-switch.is-active .toggle-switch-label {
  color: var(--notion-green, #22c55e);
}

.kanban-card {
  padding: 10px 12px;
  background: var(--notion-bg);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 150ms ease;
}

.kanban-card:hover {
  background: var(--notion-bg-hover);
  border-color: rgba(255, 255, 255, 0.2);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.kanban-card.is-dragging {
  opacity: 0.5;
  transform: scale(0.98);
}

.kanban-card.is-complete {
  opacity: 0.5;
}

.kanban-card.is-complete .kanban-card-title {
  text-decoration: line-through;
}

.kanban-card.has-hard-deadline {
  border-left: 3px solid #ef4444;
}

.kanban-card.is-selected {
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.4);
}

.kanban-card.is-focused {
  outline: 2px solid var(--notion-blue);
  outline-offset: -2px;
}

.kanban-selection-count {
  font-size: 12px;
  color: var(--notion-blue);
  font-weight: 500;
}

.kanban-card-header {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.kanban-card-priority-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-top: 4px;
}

.kanban-card-priority-dot.priority-do-now {
  background: #ef4444;
}

.kanban-card-priority-dot.priority-schedule {
  background: #3b82f6;
}

.kanban-card-priority-dot.priority-delegate {
  background: #f59e0b;
}

.kanban-card-priority-dot.priority-eliminate {
  background: #6b7280;
}

.kanban-card-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--notion-text);
  line-height: 1.4;
  flex: 1;
}

.kanban-card-footer {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  margin-top: 6px;
  padding-left: 16px;
}

.kanban-card-date {
  color: var(--notion-text-muted);
}

.kanban-card-date.is-overdue {
  color: #ef4444;
}

.kanban-card-status {
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.06);
  border-left: 2px solid var(--status-color, #6b7280);
  font-size: 10px;
  color: var(--notion-text-muted);
}

/* Column icon */
.kanban-column-icon {
  font-size: 14px;
  flex-shrink: 0;
}

.kanban-empty {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  padding: 40px;
  color: var(--notion-text-muted);
}

.kanban-empty-icon {
  font-size: 48px;
}

.kanban-empty h3 {
  margin: 0;
  color: var(--notion-text);
  font-size: 18px;
}

.kanban-empty p {
  margin: 0;
  text-align: center;
  max-width: 400px;
}

/* ========================================
   Project Kanban Card Overrides
   ======================================== */
.project-kanban-board .kanban-card {
  padding: 12px;
}

.project-kanban-board .kanban-card-header {
  align-items: flex-start;
}

.project-kanban-board .project-emoji {
  font-size: 18px;
  flex-shrink: 0;
  line-height: 1.2;
}

/* Allow title to wrap */
.project-kanban-board .project-title-wrap {
  white-space: normal;
  word-wrap: break-word;
  overflow-wrap: break-word;
  line-height: 1.3;
}

/* Project Card Progress */
.project-card-progress {
  margin-top: 10px;
}

.project-card-progress .progress-bar {
  height: 6px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  overflow: hidden;
}

.project-card-progress .progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #6366f1, #8b5cf6);
  border-radius: 3px;
  transition: width 300ms ease;
}

.project-card-progress .progress-info {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 6px;
  font-size: 11px;
}

.project-card-progress .progress-text {
  color: var(--notion-text-secondary);
}

.project-card-progress .progress-percent {
  color: #a5b4fc;
  font-weight: 600;
}

/* Project Card Footer */
.project-kanban-board .kanban-card-footer {
  padding-left: 0;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 6px;
}

.project-kanban-board .card-badges {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.project-kanban-board .badge {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 4px;
  background: rgba(255, 255, 255, 0.08);
  color: var(--notion-text-secondary);
}

.project-kanban-board .badge.overdue {
  background: rgba(239, 68, 68, 0.15);
  color: #fca5a5;
}

.project-kanban-board .badge.urgent {
  background: rgba(251, 191, 36, 0.15);
  color: #fcd34d;
}

.project-kanban-board .badge.remaining {
  background: rgba(99, 102, 241, 0.15);
  color: #a5b4fc;
}

/* Project Deadline */
.project-kanban-board .project-deadline {
  font-size: 11px;
  padding: 3px 8px;
  border-radius: 4px;
  background: rgba(99, 102, 241, 0.1);
  color: #a5b4fc;
  flex-shrink: 0;
}

.project-kanban-board .project-deadline.is-urgent {
  background: rgba(251, 191, 36, 0.15);
  color: #fcd34d;
}

.project-kanban-board .project-deadline.is-overdue {
  background: rgba(239, 68, 68, 0.15);
  color: #fca5a5;
}

/* Overdue project card styling */
.project-kanban-board .kanban-card.is-overdue {
  border-color: rgba(239, 68, 68, 0.3);
}

.project-kanban-board .kanban-card.is-overdue:hover {
  border-color: rgba(239, 68, 68, 0.5);
}

/* ========================================
   Kanban Task Detail Panel
   ======================================== */

.kanban-detail-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(4px);
}

.kanban-detail-panel {
  width: 400px;
  max-width: 90vw;
  max-height: 80vh;
  background: var(--notion-bg);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-lg);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.kanban-detail-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  background: var(--notion-bg-secondary);
  border-bottom: 1px solid var(--notion-border);
}

.kanban-detail-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--notion-text);
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.kanban-detail-header button {
  background: transparent;
  border: none;
  color: var(--notion-text-muted);
  font-size: 18px;
  cursor: pointer;
  padding: 4px 8px;
  transition: color 150ms ease;
}

.kanban-detail-header button:hover {
  color: var(--notion-text);
}

.kanban-detail-body {
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  overflow-y: auto;
}

.kanban-detail-field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.kanban-detail-field label {
  font-size: 11px;
  font-weight: 600;
  color: var(--notion-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  display: flex;
  align-items: center;
  gap: 8px;
}

.kanban-detail-field .overdue-badge {
  font-size: 10px;
  background: rgba(239, 68, 68, 0.2);
  color: #ef4444;
  padding: 2px 6px;
  border-radius: 3px;
  text-transform: none;
  font-weight: 500;
}

.kanban-detail-field select,
.kanban-detail-field input[type="date"] {
  padding: 10px 12px;
  background: var(--notion-bg-secondary);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-sm);
  color: var(--notion-text);
  font-size: 14px;
}

.kanban-detail-field select:focus,
.kanban-detail-field input:focus {
  outline: none;
  border-color: var(--notion-blue);
}

.kanban-detail-priority-toggles {
  display: flex;
  gap: 8px;
}

.priority-toggle {
  flex: 1;
  padding: 10px 12px;
  background: var(--notion-bg-secondary);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-sm);
  color: var(--notion-text-muted);
  font-size: 13px;
  cursor: pointer;
  transition: all 150ms ease;
}

.priority-toggle:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

.priority-toggle.is-active {
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.4);
  color: #bfdbfe;
}

.kanban-detail-open-btn {
  padding: 12px 16px;
  background: var(--notion-blue);
  border: none;
  border-radius: var(--radius-sm);
  color: white;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background 150ms ease;
}

.kanban-detail-open-btn:hover {
  background: #2563eb;
}

/* ========================================
   Projects Sidebar Toggle Button
   ======================================== */

.projects-sidebar-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: var(--radius-md);
  color: var(--notion-text-muted);
  font-size: 12px;
  cursor: pointer;
  transition: all 150ms ease;
}

.projects-sidebar-toggle:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--notion-text);
}

.projects-sidebar-toggle.is-open {
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.3);
  color: #bfdbfe;
}

.projects-sidebar-toggle .toggle-icon {
  font-size: 14px;
}

.projects-sidebar-toggle .toggle-arrow {
  font-size: 10px;
  opacity: 0.6;
}

/* ========================================
   Tasks with Sidebar Layout
   ======================================== */

.tasks-with-sidebar {
  display: flex;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.projects-filter-sidebar {
  display: flex;
  flex-direction: column;
  min-width: 160px;
  max-width: 400px;
  background: var(--notion-bg-secondary);
  border-right: 1px solid var(--notion-border);
  flex-shrink: 0;
}

.projects-sidebar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  border-bottom: 1px solid var(--notion-border);
}

.projects-sidebar-header h3 {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  color: var(--notion-text);
}

.projects-sidebar-content {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}

.projects-filter-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.projects-filter-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 100ms ease;
}

.projects-filter-item:hover {
  background: var(--notion-bg-hover);
}

.projects-filter-item.active {
  background: rgba(59, 130, 246, 0.15);
  border-left: 3px solid var(--notion-blue);
}

.projects-filter-item .project-icon {
  font-size: 14px;
  flex-shrink: 0;
}

.projects-filter-item .project-title {
  flex: 1;
  font-size: 13px;
  color: var(--notion-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.projects-filter-item .project-status {
  font-size: 10px;
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 999px;
  color: var(--notion-text-muted);
}

.projects-filter-item .project-count {
  font-size: 11px;
  color: var(--notion-text-muted);
  background: rgba(255, 255, 255, 0.06);
  padding: 2px 8px;
  border-radius: 999px;
  min-width: 20px;
  text-align: center;
}

.projects-sidebar-footer {
  padding: 12px;
  border-top: 1px solid var(--notion-border);
}

.kanban-shortcut-btn {
  width: 100%;
  padding: 10px 16px;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2));
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: var(--radius-md);
  color: #bfdbfe;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 150ms ease;
}

.kanban-shortcut-btn:hover {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(139, 92, 246, 0.3));
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
}

.projects-sidebar-resizer {
  width: 6px;
  background: transparent;
  cursor: col-resize;
  transition: background 150ms ease;
  flex-shrink: 0;
  position: relative;
}

.projects-sidebar-resizer::before {
  content: '';
  position: absolute;
  left: 2px;
  top: 50%;
  transform: translateY(-50%);
  width: 2px;
  height: 40px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 1px;
  transition: height 150ms ease, background 150ms ease;
}

.projects-sidebar-resizer:hover::before,
.projects-sidebar-resizer.is-active::before {
  height: 80px;
  background: rgba(59, 130, 246, 0.6);
}

/* ========================================
   Kanban Full Page Mode
   ======================================== */

.kanban-section.kanban-fullpage {
  padding: 0;
}

.kanban-fullpage .kanban-board {
  height: 100%;
}

.kanban-board.has-project .kanban-toolbar {
  border-radius: 0;
}

/* ========================================
   Kanban Project Timeline Header
   ======================================== */

.kanban-project-timeline {
  background: linear-gradient(135deg, var(--notion-bg-secondary), rgba(59, 130, 246, 0.05));
  border-bottom: 1px solid var(--notion-border);
  padding: 20px 24px;
}

.kanban-timeline-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 24px;
  margin-bottom: 16px;
}

.kanban-timeline-info {
  flex: 1;
}

.kanban-project-title {
  margin: 0 0 8px;
  font-size: 20px;
  font-weight: 600;
  color: var(--notion-text);
}

.kanban-timeline-meta {
  display: flex;
  align-items: center;
  gap: 16px;
  font-size: 13px;
  color: var(--notion-text-muted);
}

.kanban-timeline-dates {
  display: flex;
  align-items: center;
  gap: 8px;
}

.kanban-timeline-days {
  padding: 4px 12px;
  border-radius: 999px;
  font-weight: 500;
}

.kanban-timeline-days.active {
  background: rgba(59, 130, 246, 0.15);
  color: #93c5fd;
}

.kanban-timeline-days.overdue {
  background: rgba(239, 68, 68, 0.15);
  color: #fca5a5;
}

.kanban-timeline-days.upcoming {
  background: rgba(34, 197, 94, 0.15);
  color: #86efac;
}

.kanban-timeline-progress {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 6px;
  min-width: 180px;
}

.kanban-timeline-progress-bar {
  width: 100%;
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  overflow: hidden;
}

.kanban-timeline-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6, #22c55e);
  border-radius: 4px;
  transition: width 300ms ease;
}

.kanban-timeline-progress-text {
  font-size: 12px;
  color: var(--notion-text-muted);
}

.kanban-close-btn {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-sm);
  color: var(--notion-text-muted);
  padding: 8px 12px;
  font-size: 14px;
  cursor: pointer;
  transition: all 150ms ease;
}

.kanban-close-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--notion-text);
}

/* Timeline Bar with Draggable Handles */
.kanban-timeline-bar-container {
  position: relative;
  height: 32px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-md);
  overflow: visible;
}

.kanban-timeline-bar {
  position: absolute;
  top: 4px;
  left: 10%;
  right: 10%;
  height: 24px;
  background: rgba(59, 130, 246, 0.3);
  border: 1px solid rgba(59, 130, 246, 0.5);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.kanban-timeline-bar.overdue {
  background: rgba(239, 68, 68, 0.3);
  border-color: rgba(239, 68, 68, 0.5);
}

.kanban-timeline-bar-fill {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  background: rgba(34, 197, 94, 0.4);
  border-radius: 3px 0 0 3px;
}

.kanban-timeline-today-marker {
  position: absolute;
  top: -4px;
  bottom: -4px;
  width: 2px;
  background: #f59e0b;
  border-radius: 1px;
  z-index: 2;
}

.kanban-timeline-today-marker::before {
  content: '';
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 8px;
  color: #f59e0b;
}

.kanban-timeline-handle {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  background: var(--notion-bg);
  border-radius: 4px;
  cursor: ew-resize;
  font-size: 11px;
  color: var(--notion-text-muted);
  z-index: 3;
  transition: all 150ms ease;
  user-select: none;
}

.kanban-timeline-handle:hover,
.kanban-timeline-handle.is-dragging {
  background: var(--notion-blue);
  color: white;
}

.kanban-timeline-handle .handle-icon {
  font-weight: bold;
}

.kanban-all-tasks-label {
  font-size: 13px;
  font-weight: 500;
  color: var(--notion-text);
}

/* ========================================
   Kanban Task Detail Panel
   ======================================== */

.kanban-task-detail-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 150ms ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.kanban-task-detail {
  width: 100%;
  max-width: 480px;
  background: var(--notion-bg);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-lg);
  box-shadow: 0 24px 48px rgba(0, 0, 0, 0.4);
  animation: slideUp 200ms ease;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.kanban-task-detail-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 16px;
  padding: 20px 24px;
  border-bottom: 1px solid var(--notion-border);
}

.kanban-task-detail-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--notion-text);
  line-height: 1.4;
}

.kanban-task-detail-close {
  background: transparent;
  border: none;
  color: var(--notion-text-muted);
  font-size: 18px;
  cursor: pointer;
  padding: 4px;
  transition: color 100ms ease;
}

.kanban-task-detail-close:hover {
  color: var(--notion-text);
}

.kanban-task-detail-body {
  padding: 20px 24px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.kanban-task-detail-field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.kanban-task-detail-field label {
  font-size: 12px;
  font-weight: 500;
  color: var(--notion-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.kanban-task-detail-field select,
.kanban-task-detail-field input[type="date"] {
  padding: 10px 14px;
  background: var(--notion-bg-secondary);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-sm);
  color: var(--notion-text);
  font-size: 14px;
  cursor: pointer;
}

.kanban-task-detail-field select:hover,
.kanban-task-detail-field input[type="date"]:hover {
  border-color: rgba(255, 255, 255, 0.2);
}

.kanban-task-detail-date-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.kanban-task-detail-date-row input {
  flex: 1;
}

.kanban-clear-date {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.15);
  color: var(--notion-text-muted);
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: 12px;
  transition: all 100ms ease;
}

.kanban-clear-date:hover {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.3);
  color: #fca5a5;
}

.kanban-task-detail-overdue {
  font-size: 12px;
  color: #fca5a5;
}

.kanban-task-detail-priority {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.priority-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 6px 12px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 500;
}

.priority-badge.urgent-important {
  background: rgba(239, 68, 68, 0.15);
  color: #fca5a5;
}

.priority-badge.important {
  background: rgba(59, 130, 246, 0.15);
  color: #93c5fd;
}

.priority-badge.urgent {
  background: rgba(234, 179, 8, 0.15);
  color: #fcd34d;
}

.priority-badge.low {
  background: rgba(148, 163, 184, 0.15);
  color: #cbd5e1;
}

.priority-badge.hard-deadline {
  background: rgba(239, 68, 68, 0.15);
  color: #fca5a5;
}

.kanban-task-detail-actions {
  padding-top: 8px;
  border-top: 1px solid var(--notion-border);
}

.kanban-task-detail-action {
  width: 100%;
  padding: 12px 16px;
  background: var(--notion-bg-secondary);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-sm);
  color: var(--notion-text);
  font-size: 13px;
  cursor: pointer;
  transition: all 150ms ease;
}

.kanban-task-detail-action:hover {
  background: var(--notion-bg-hover);
  border-color: rgba(255, 255, 255, 0.2);
}

/* Selected card state */
.kanban-card.is-selected {
  border-color: var(--notion-blue);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
}

/* ========================================
   Multi-Panel Dashboard Layout
   ======================================== */

.tasks-dashboard {
  display: grid;
  grid-template-columns: auto auto 1fr;
  grid-template-rows: 1fr auto;
  grid-template-areas:
    "sidebar resizer panels"
    "quickadd quickadd quickadd";
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

/* When no sidebar is open */
.tasks-dashboard:not(:has(.projects-filter-sidebar)) {
  grid-template-columns: 1fr;
  grid-template-areas:
    "panels"
    "quickadd";
}

.tasks-dashboard > .projects-filter-sidebar {
  grid-area: sidebar;
}

.tasks-dashboard > .projects-sidebar-resizer {
  grid-area: resizer;
}

.tasks-dashboard > .dashboard-panels-container {
  grid-area: panels;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
  overflow: hidden;
}

.tasks-dashboard > .dashboard-quick-add-bar {
  grid-area: quickadd;
}

/* Dashboard Quick Add Bar */
.dashboard-quick-add-bar {
  flex-shrink: 0;
  background: var(--notion-bg);
  border-top: 1px solid var(--notion-border);
  padding: 0;
  transition: all 200ms ease;
}

.dashboard-quick-add-bar.is-collapsed {
  padding: 0;
}

/* Notion-style quick add toggle (dashboard) */
.quick-add-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  width: auto;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--notion-text-muted);
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  text-align: left;
  transition: all var(--transition-fast);
  margin-right: auto;
}

.quick-add-toggle:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

.quick-add-toggle-icon {
  font-size: 16px;
  font-weight: 400;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border-radius: var(--radius-xs);
  color: var(--notion-text-faint);
  transition: all var(--transition-fast);
}

.quick-add-toggle:hover .quick-add-toggle-icon {
  background: var(--tag-blue-bg);
  color: var(--notion-blue);
}

.dashboard-quick-add-bar.is-collapsed .quick-add-toggle {
  padding: 12px 16px;
}

.quick-add-content {
  padding: 0 16px 16px;
}

.quick-add-content .quick-add-wrapper::before {
  display: none;
}

.quick-add-content .quick-add {
  box-shadow: none;
  border-top: none;
  background: var(--notion-bg-secondary);
  border-radius: var(--radius-md);
  padding: 12px;
}

/* Quick Add Header with Tabs */
.quick-add-header {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Notion-style tabs */
.quick-add-tabs {
  display: flex;
  gap: 2px;
  background: transparent;
  border-radius: var(--radius-sm);
  padding: 2px;
}

.quick-add-tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--notion-text-muted);
  font-size: 13px;
  font-weight: 500;
  transition: all var(--transition-fast);
  cursor: pointer;
  transition: all 150ms ease;
}

.quick-add-tab:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

.quick-add-tab.is-active {
  background: var(--notion-bg-active);
  color: var(--notion-text);
}

.quick-add-tab .tab-icon {
  font-size: 14px;
}

.quick-add-tab .tab-label {
  white-space: nowrap;
}

/* Quick Capture Content (Writing Widget in Quick Add) */
.quick-capture-content {
  padding: 0 16px 16px;
}

.quick-capture-content .writing-widget {
  box-shadow: none;
  border: none;
  background: var(--notion-bg-secondary);
  border-radius: var(--radius-md);
  padding: 12px;
}

.quick-capture-content .writing-widget h2 {
  display: none;
}

.quick-capture-content .log-form {
  padding: 0;
}

/* Drag to Place Handle */
.capture-drag-handle {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--notion-bg-secondary);
  border: 1px dashed var(--notion-border);
  border-radius: var(--radius-md);
  cursor: grab;
  color: var(--notion-text-muted);
  font-size: 13px;
  transition: all 150ms ease;
  user-select: none;
}

.capture-drag-handle:hover {
  background: var(--notion-bg-active);
  border-color: var(--accent-blue);
  color: var(--notion-text);
}

.capture-drag-handle:active,
.capture-drag-handle.is-dragging {
  cursor: grabbing;
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
  transform: scale(1.02);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.capture-drag-handle .drag-icon {
  font-size: 16px;
  letter-spacing: -2px;
  opacity: 0.7;
}

.capture-drag-handle .drag-label {
  font-weight: 500;
}

/* Drop zone highlight for new tasks */
.drop-zone-active {
  outline: 2px dashed var(--accent-blue) !important;
  outline-offset: -2px;
  background: rgba(59, 130, 246, 0.1) !important;
}

.dashboard-panels-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  overflow: hidden;
  position: relative;
}

/* Filter panels in dashboard */
.dashboard-panels-container > .sidebar-organizer-pane {
  border-radius: var(--radius-md);
  margin: 0 8px 8px 8px;
  border: 1px solid var(--notion-border);
}

.dashboard-panels {
  flex: 1;
  display: flex;
  gap: 0;
  background: var(--notion-border);
  overflow: hidden;
  position: relative;
}

.dashboard-panel {
  display: flex;
  flex-direction: column;
  background: var(--notion-bg);
  min-width: 200px;
  overflow: hidden;
}

/* Single panel takes full width */
.dashboard-panels.panels-1 .dashboard-panel {
  min-width: 0;
}

/* Panel header */
.dashboard-panel-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 16px;
  background: linear-gradient(90deg, var(--panel-color, #3b82f6), transparent);
  background-size: 4px 100%;
  background-repeat: no-repeat;
  background-color: var(--notion-bg-secondary);
  border-bottom: 1px solid var(--notion-border);
  flex-shrink: 0;
}

.dashboard-panel-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--notion-text);
  display: flex;
  align-items: center;
  gap: 6px;
}


.dashboard-panel-filter {
  font-size: 11px;
  color: var(--notion-text-muted);
  background: rgba(255, 255, 255, 0.06);
  padding: 3px 8px;
  border-radius: 999px;
}

.dashboard-panel-body {
  flex: 1;
  overflow: auto;
  display: flex;
  flex-direction: column;
}

/* Panel-specific adjustments */
.panel-list .dashboard-panel-body {
  padding: 0;
}

.panel-matrix .dashboard-panel-body {
  padding: 12px;
}

.panel-kanban .dashboard-panel-body {
  padding: 12px;
}

.panel-kanban .kanban-board {
  height: 100%;
}

.panel-kanban .kanban-project-timeline {
  display: none; /* Hide timeline in dashboard mode */
}

/* ========================================
   Simple Calendar Panel
   ======================================== */

.panel-calendar-controls {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px 8px 0;
}

.panel-calendar-nav-inline {
  display: flex;
  align-items: center;
  gap: 6px;
}

.panel-calendar-nav-inline button {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.12);
  color: var(--notion-text-muted);
  padding: 5px 10px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: 12px;
  transition: all 150ms ease;
}

.panel-calendar-nav-inline button:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--notion-text);
  border-color: rgba(255, 255, 255, 0.2);
}

.panel-calendar-nav {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: auto;
}

.panel-calendar-nav button {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.15);
  color: var(--notion-text-muted);
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: 11px;
  transition: all 150ms ease;
}

.panel-calendar-nav button:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--notion-text);
}

.panel-calendar-month {
  font-size: 12px;
  font-weight: 600;
  color: var(--notion-text);
  min-width: 100px;
  text-align: center;
}

.panel-calendar-today {
  background: rgba(59, 130, 246, 0.15) !important;
  border-color: rgba(59, 130, 246, 0.3) !important;
  color: #bfdbfe !important;
}

/* Panel Calendar View Toggle */
.panel-calendar-view-toggle {
  display: flex;
  align-items: center;
  gap: 2px;
  background: rgba(255, 255, 255, 0.04);
  padding: 3px;
  border-radius: 8px;
  border: 1px solid var(--notion-border);
  width: fit-content;
}

.panel-calendar-view-toggle button {
  padding: 5px 12px;
  border: none;
  background: transparent;
  color: var(--notion-text-muted);
  border-radius: 6px;
  cursor: pointer;
  font-size: 11px;
  font-weight: 500;
  transition: all 150ms ease;
  white-space: nowrap;
}

.panel-calendar-view-toggle button:hover:not(.active) {
  color: var(--notion-text);
  background: rgba(255, 255, 255, 0.06);
}

.panel-calendar-view-toggle button.active {
  background: var(--notion-blue);
  color: white;
  box-shadow: 0 2px 6px rgba(35, 131, 226, 0.3);
}

.panel-calendar-custom-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  padding-left: 6px;
  margin-left: 2px;
  border-left: 1px solid rgba(255, 255, 255, 0.1);
}

.panel-calendar-custom-toggle button.active {
  background: linear-gradient(135deg, #8b5cf6, #6366f1);
  box-shadow: 0 2px 6px rgba(139, 92, 246, 0.35);
}

.panel-calendar-days-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 60px;
  height: 4px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 2px;
  outline: none;
  cursor: pointer;
}

.panel-calendar-days-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 12px;
  height: 12px;
  background: #8b5cf6;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(139, 92, 246, 0.4);
  transition: transform 150ms ease;
}

.panel-calendar-days-slider::-webkit-slider-thumb:hover {
  transform: scale(1.15);
}

.panel-calendar-days-slider::-moz-range-thumb {
  width: 12px;
  height: 12px;
  background: #8b5cf6;
  border-radius: 50%;
  cursor: pointer;
  border: none;
  box-shadow: 0 2px 4px rgba(139, 92, 246, 0.4);
}

.panel-calendar-body {
  padding: 8px !important;
}

.simple-calendar-grid {
  display: flex;
  flex-direction: column;
  height: 100%;
  gap: 4px;
}

/* Week and Custom view header adjusts columns */
.simple-calendar-grid.view-week .simple-calendar-header,
.simple-calendar-grid.view-custom .simple-calendar-header {
  grid-template-columns: repeat(var(--panel-days, 7), 1fr);
}

.simple-calendar-grid.view-custom .simple-calendar-header {
  grid-template-columns: repeat(var(--panel-days, 3), 1fr);
}

/* Row view for week/custom */
.simple-calendar-row-view {
  flex: 1;
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
  min-height: 0;
}

.simple-calendar-grid.view-custom .simple-calendar-row-view {
  grid-template-columns: repeat(var(--panel-days, 3), 1fr);
}

.simple-calendar-row-view .simple-calendar-day {
  min-height: 100%;
}

.simple-calendar-header {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
}

.simple-calendar-day-name {
  text-align: center;
  font-size: 10px;
  font-weight: 600;
  color: var(--notion-text-muted);
  padding: 4px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.simple-calendar-weeks {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-height: 0;
}

.simple-calendar-week {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
  flex: 1;
  min-height: 0;
}

.simple-calendar-day {
  background: var(--notion-bg-secondary);
  border-radius: var(--radius-sm);
  padding: 4px;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: visible;
  transition: background 150ms ease;
  position: relative;
}

.simple-calendar-day:hover {
  background: var(--notion-bg-hover);
}

.simple-calendar-day.other-month {
  opacity: 0.4;
}

.simple-calendar-day.is-past:not(.is-today) {
  opacity: 0.6;
}

.simple-calendar-day.is-today {
  background: rgba(59, 130, 246, 0.15);
  border: 1px solid rgba(59, 130, 246, 0.4);
}

.simple-calendar-day-number {
  font-size: 11px;
  font-weight: 600;
  color: var(--notion-text);
  margin-bottom: 2px;
}

.simple-calendar-day.is-today .simple-calendar-day-number {
  color: #bfdbfe;
}

.simple-calendar-day-tasks {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
  overflow: visible;
  position: relative;
}

.simple-calendar-task {
  font-size: 10px;
  padding: 3px 4px;
  background: rgba(255, 255, 255, 0.06);
  border-radius: 3px;
  color: var(--notion-text);
  cursor: pointer;
  transition: all 150ms ease;
  display: flex;
  align-items: center;
  gap: 4px;
  position: relative;
}

.simple-calendar-task:hover {
  background: rgba(255, 255, 255, 0.15);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  z-index: 1000;
}

.simple-calendar-day:has(.simple-calendar-task:hover) {
  z-index: 100;
}

.simple-calendar-task.is-clicked {
  background: rgba(59, 130, 246, 0.3);
  transform: scale(0.98);
}

/* Rich tooltip on hover */
.simple-calendar-task::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: calc(100% + 8px);
  left: 0;
  min-width: 180px;
  max-width: 250px;
  padding: 8px 10px;
  background: var(--notion-bg);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-sm);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  font-size: 11px;
  line-height: 1.5;
  white-space: pre-line;
  color: var(--notion-text);
  opacity: 0;
  visibility: hidden;
  transform: translateY(4px);
  transition: all 150ms ease;
  pointer-events: none;
  z-index: 10000;
}

.simple-calendar-task:hover::after {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

/* Tooltip arrow */
.simple-calendar-task::before {
  content: '';
  position: absolute;
  bottom: calc(100% + 4px);
  left: 12px;
  border: 4px solid transparent;
  border-top-color: var(--notion-border);
  opacity: 0;
  visibility: hidden;
  transition: all 150ms ease;
  z-index: 10001;
}

.simple-calendar-task:hover::before {
  opacity: 1;
  visibility: visible;
}

.simple-calendar-task.is-complete {
  opacity: 0.5;
}

.simple-calendar-task.is-complete .simple-calendar-task-title {
  text-decoration: line-through;
}

.simple-calendar-task.has-hard-deadline {
  border-left: 2px solid #ef4444;
  padding-left: 3px;
}

/* Priority dot */
.simple-calendar-task-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}

.simple-calendar-task-dot.priority-do-now {
  background: #ef4444;
  box-shadow: 0 0 4px rgba(239, 68, 68, 0.5);
}

.simple-calendar-task-dot.priority-schedule {
  background: #3b82f6;
}

.simple-calendar-task-dot.priority-delegate {
  background: #f59e0b;
}

.simple-calendar-task-dot.priority-eliminate {
  background: #6b7280;
}

/* Hard deadline indicator */
.simple-calendar-task-hard {
  font-size: 9px;
  font-weight: 700;
  color: #ef4444;
  flex-shrink: 0;
}

/* Task title */
.simple-calendar-task-title {
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.simple-calendar-more {
  font-size: 9px;
  color: var(--notion-text-muted);
  padding: 2px 4px;
  cursor: pointer;
}

.simple-calendar-more:hover {
  color: var(--notion-text);
}

.panel-matrix .eisenhower-matrix {
  height: 100%;
}

/* Matrix has its own quick filters for quadrants */
.panel-matrix .matrix-header {
  padding: 6px 8px;
}

/* Kanban has its own grouping and search controls */
.panel-kanban .kanban-toolbar {
  padding: 6px 8px;
}

/* ========================================
   Panel Toggle Controls
   ======================================== */

.panel-toggles {
  display: flex;
  align-items: flex-start;
  gap: 6px;
}

.panel-toggle-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  transition: transform 150ms ease, opacity 150ms ease;
}

.panel-toggle-item.is-dragging {
  opacity: 0.5;
  transform: scale(0.95);
}

.panel-toggle-item.is-drop-target {
  transform: translateX(4px);
}

.panel-toggle-item[draggable="true"] {
  cursor: grab;
}

.panel-toggle-item[draggable="true"]:active {
  cursor: grabbing;
}

.panel-toggle-item.is-active .panel-toggle-btn {
  background: rgba(var(--panel-color-rgb, 59, 130, 246), 0.15);
  border-color: var(--panel-color);
  color: var(--notion-text);
}

.panel-toggle-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  background: rgba(255, 255, 255, 0.04);
  border: 2px solid transparent;
  border-radius: var(--radius-md);
  color: var(--notion-text-muted);
  font-size: 12px;
  cursor: pointer;
  transition: all 150ms ease;
  position: relative;
}

.panel-toggle-btn:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--notion-text);
}

.panel-toggle-btn.active {
  border-color: var(--panel-color, #3b82f6);
  color: var(--notion-text);
}

.panel-toggle-indicator {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: var(--panel-color, #3b82f6);
  border-radius: var(--radius-md) 0 0 var(--radius-md);
  opacity: 0;
  transition: opacity 150ms ease;
}

.panel-toggle-btn.active .panel-toggle-indicator {
  opacity: 1;
}

.panel-toggle-icon {
  font-size: 16px;
  width: 20px;
  text-align: center;
}

.panel-toggle-label {
  font-weight: 600;
  letter-spacing: 0.02em;
}

.panel-toggle-number {
  font-size: 10px;
  font-weight: 700;
  background: var(--panel-color, #3b82f6);
  color: white;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 4px;
}

/* Reorder controls - below the button */
.panel-reorder-controls {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-top: 4px;
  opacity: 0;
  transform: translateY(-4px);
  transition: all 150ms ease;
  pointer-events: none;
}

.panel-toggle-item:hover .panel-reorder-controls,
.panel-toggle-item.is-active .panel-reorder-controls {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.panel-reorder-btn {
  background: transparent;
  border: none;
  color: var(--notion-text-muted);
  font-size: 11px;
  cursor: pointer;
  padding: 2px 6px;
  border-radius: 3px;
  transition: all 100ms ease;
  opacity: 0.5;
}

.panel-reorder-btn:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.1);
  color: var(--notion-text);
  opacity: 1;
}

.panel-reorder-btn:disabled {
  opacity: 0.15;
  cursor: not-allowed;
}

.panel-reorder-drag-hint {
  font-size: 9px;
  color: var(--notion-text-muted);
  opacity: 0.4;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-weight: 500;
}

/* Legacy support */
.panel-reorder-btns {
  display: none;
}

/* ========================================
   Projects Inline Toggle (next to Tasks)
   ======================================== */

.projects-inline-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-md);
  color: var(--notion-text-muted);
  font-size: 13px;
  cursor: pointer;
  transition: all 150ms ease;
  margin-left: 8px;
}

.projects-inline-toggle .toggle-icon {
  font-size: 14px;
}

.projects-inline-toggle .toggle-label {
  font-weight: 500;
}

.projects-inline-toggle:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--notion-text);
  border-color: rgba(255, 255, 255, 0.2);
}

.projects-inline-toggle.is-open {
  background: rgba(99, 102, 241, 0.15);
  border-color: rgba(99, 102, 241, 0.3);
  color: #a5b4fc;
}

.projects-inline-toggle.has-filter {
  border-color: rgba(251, 146, 60, 0.4);
  background: rgba(251, 146, 60, 0.1);
}

.projects-inline-toggle.has-filter:hover {
  border-color: rgba(251, 146, 60, 0.6);
  background: rgba(251, 146, 60, 0.15);
}

.projects-inline-toggle .filter-indicator {
  color: #fb923c;
  font-size: 16px;
  line-height: 1;
  margin-left: 2px;
  animation: filterPulse 2s ease-in-out infinite;
}

@keyframes filterPulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

/* ========================================
   Panel Resizer
   ======================================== */

.panel-resizer {
  width: 6px;
  min-width: 6px;
  background: var(--notion-bg-secondary);
  cursor: col-resize;
  position: relative;
  flex-shrink: 0;
  transition: background 150ms ease;
  z-index: 10;
}

.panel-resizer::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 3px;
  height: 50px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 2px;
  transition: all 150ms ease;
}

.panel-resizer:hover {
  background: rgba(59, 130, 246, 0.15);
}

.panel-resizer:hover::before,
.panel-resizer.is-active::before {
  height: 100px;
  background: var(--notion-blue);
}

.panel-resizer.is-active {
  background: rgba(59, 130, 246, 0.25);
}

/* Wider hit area for easier grabbing */
.panel-resizer::after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  left: -4px;
  right: -4px;
}

/* ========================================
   New Eisenhower Matrix Styles
   ======================================== */

.matrix-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  gap: 8px;
}

.matrix-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  background: var(--notion-bg-secondary);
  border-radius: var(--radius-sm);
  flex-shrink: 0;
}

.matrix-header-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.matrix-toggle-completed {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--notion-text-muted);
  cursor: pointer;
}

.matrix-toggle-completed input {
  cursor: pointer;
}

.matrix-header-right {
  display: flex;
  align-items: center;
}

.matrix-quick-filters {
  display: flex;
  gap: 4px;
}

.matrix-quick-filter {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 2px solid var(--filter-color);
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 150ms ease;
}

.matrix-quick-filter:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: scale(1.1);
}

.matrix-quick-filter.is-active {
  background: var(--filter-color);
}

.matrix-quick-filter.is-active .matrix-quick-filter-count {
  color: white;
}

.matrix-quick-filter-count {
  font-size: 11px;
  font-weight: 700;
  color: var(--filter-color);
}

/* Axes */
.matrix-axes {
  position: relative;
  display: none; /* Hidden by default, show on larger screens */
}

/* Grid container */
.matrix-grid-container {
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

/* Axis labels showing Urgent/Not Urgent */
.matrix-axis-labels {
  display: flex;
  justify-content: center;
  gap: 24px;
  padding: 8px 40px;
  margin-bottom: 8px;
}

.matrix-axis-x-labels {
  display: flex;
  gap: 48px;
}

.matrix-axis-y-labels {
  display: none;
}

.matrix-axis-label {
  font-size: 12px;
  font-weight: 600;
  padding: 6px 16px;
  border-radius: var(--radius-md);
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.08);
  white-space: nowrap;
}

.matrix-axis-label.urgent {
  color: #ef4444;
  border-color: rgba(239, 68, 68, 0.3);
  background: rgba(239, 68, 68, 0.08);
}

.matrix-axis-label.not-urgent {
  color: #3b82f6;
  border-color: rgba(59, 130, 246, 0.3);
  background: rgba(59, 130, 246, 0.08);
}

.matrix-axis-label.important {
  color: #22c55e;
}

.matrix-axis-label.not-important {
  color: #6b7280;
}

.matrix-grid-wrapper {
  display: grid;
  grid-template-areas:
    ". top ."
    "left grid right"
    ". bottom .";
  grid-template-columns: 28px 1fr 28px;
  grid-template-rows: 32px 1fr 32px;
  gap: 4px;
  flex: 1;
  min-height: 0;
}

.matrix-grid-container {
  grid-area: grid;
  display: flex;
  flex-direction: column;
  height: 100%;
  gap: 4px;
}

/* Column labels (URGENT | NOT URGENT) */
.matrix-col-labels {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4px;
  margin-left: 80px; /* Offset for row labels */
}

.matrix-col-label {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--notion-bg-secondary);
  border-radius: var(--radius-sm);
  font-size: 11px;
  font-weight: 600;
  color: var(--notion-text-muted);
}

.matrix-col-label.urgent {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

.matrix-col-label.not-urgent {
  background: rgba(59, 130, 246, 0.1);
  color: #3b82f6;
}

.matrix-axis-icon {
  font-size: 12px;
}

.matrix-axis-text {
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.matrix-axis-count {
  background: rgba(255, 255, 255, 0.1);
  padding: 1px 6px;
  border-radius: 8px;
  font-size: 10px;
  font-weight: 700;
}

/* Row wrapper (labels + grid) */
.matrix-row-wrapper {
  display: flex;
  flex: 1;
  min-height: 0;
  gap: 4px;
}

/* Row labels (IMPORTANT | NOT IMPORTANT) */
.matrix-row-labels {
  display: flex;
  flex-direction: column;
  gap: 4px;
  width: 80px;
}

.matrix-row-label {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 8px 4px;
  background: var(--notion-bg-secondary);
  border-radius: var(--radius-sm);
  font-size: 10px;
  font-weight: 600;
  color: var(--notion-text-muted);
  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);
}

.matrix-row-label.important {
  background: rgba(245, 158, 11, 0.1);
  color: #f59e0b;
}

.matrix-row-label.not-important {
  background: rgba(107, 114, 128, 0.1);
  color: #9ca3af;
}

.matrix-row-label .matrix-axis-icon {
  transform: rotate(90deg);
}

.matrix-row-label .matrix-axis-text {
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.matrix-row-label .matrix-axis-count {
  transform: rotate(90deg);
}

.matrix-grid-2x2 {
  flex: 1;
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  gap: 4px;
  height: 100%;
}

/* Collapse arrows */
.matrix-collapse-arrow {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: var(--radius-sm);
  color: var(--notion-text-secondary);
  cursor: pointer;
  font-size: 10px;
  transition: all 150ms ease;
  padding: 2px 6px;
}

.matrix-collapse-arrow:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--notion-text-primary);
}

.matrix-collapse-arrow.is-collapsed {
  background: rgba(168, 85, 247, 0.1);
  border-color: rgba(168, 85, 247, 0.3);
}

.matrix-collapse-arrow .arrow-icon {
  font-size: 8px;
  opacity: 0.7;
}

.matrix-collapse-arrow .arrow-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.matrix-collapse-arrow.top {
  grid-area: top;
  flex-direction: row;
}

.matrix-collapse-arrow.bottom {
  grid-area: bottom;
  flex-direction: row;
}

.matrix-collapse-arrow.left {
  grid-area: left;
  flex-direction: column;
  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);
  padding: 8px 4px;
}

.matrix-collapse-arrow.left .arrow-label,
.matrix-collapse-arrow.right .arrow-label {
  display: none;
}

.matrix-collapse-arrow.right {
  grid-area: right;
  flex-direction: column;
  writing-mode: vertical-rl;
  text-orientation: mixed;
  padding: 8px 4px;
}

/* Collapsed row/column indicators */
.matrix-collapsed-row {
  display: flex;
  gap: 4px;
  height: 40px;
  grid-column: 1 / -1;
}

.matrix-collapsed-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  background: var(--quadrant-bg);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-left: 3px solid var(--quadrant-color);
  border-radius: var(--radius-sm);
  padding: 8px 12px;
  cursor: pointer;
  transition: all 150ms ease;
}

.matrix-collapsed-indicator.row {
  flex: 1;
}

.matrix-collapsed-indicator.col {
  width: 40px;
  flex-direction: column;
}

.matrix-collapsed-indicator:hover {
  background: rgba(255, 255, 255, 0.05);
}

.matrix-collapsed-indicator .collapsed-label {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.05em;
  color: var(--quadrant-color);
}

.matrix-collapsed-indicator .collapsed-count {
  font-size: 14px;
  font-weight: 600;
  color: var(--quadrant-color);
}

/* Collapsed state grid adjustments */
.matrix-grid-container.row-top-collapsed .matrix-grid-2x2 {
  grid-template-rows: auto 1fr;
}

.matrix-grid-container.row-bottom-collapsed .matrix-grid-2x2 {
  grid-template-rows: 1fr auto;
}

.matrix-grid-container.col-left-collapsed .matrix-grid-2x2 {
  grid-template-columns: auto 1fr;
}

.matrix-grid-container.col-right-collapsed .matrix-grid-2x2 {
  grid-template-columns: 1fr auto;
}

/* When Do First (top-left) is expanded */
.matrix-container.has-filter .matrix-quadrant.do-now.is-expanded ~ .matrix-quadrant,
.matrix-container.has-filter .matrix-grid-2x2:has(.do-now.is-expanded) {
  /* Keep default grid */
}

.matrix-container.has-filter .matrix-grid-2x2:has(.do-now.is-expanded) {
  grid-template-columns: 3fr 1fr;
  grid-template-rows: 3fr 1fr;
}

/* When Schedule (top-right) is expanded */
.matrix-container.has-filter .matrix-grid-2x2:has(.schedule.is-expanded) {
  grid-template-columns: 1fr 3fr;
  grid-template-rows: 3fr 1fr;
}

/* When Delegate (bottom-left) is expanded */
.matrix-container.has-filter .matrix-grid-2x2:has(.delegate.is-expanded) {
  grid-template-columns: 3fr 1fr;
  grid-template-rows: 1fr 3fr;
}

/* When Eliminate (bottom-right) is expanded */
.matrix-container.has-filter .matrix-grid-2x2:has(.eliminate.is-expanded) {
  grid-template-columns: 1fr 3fr;
  grid-template-rows: 1fr 3fr;
}

/* Quadrants */
.matrix-quadrant {
  display: flex;
  flex-direction: column;
  background: var(--quadrant-bg);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: var(--radius-sm);
  overflow: hidden;
  transition: all 200ms ease;
}

.matrix-quadrant.top-left { grid-area: 1 / 1 / 2 / 2; }
.matrix-quadrant.top-right { grid-area: 1 / 2 / 2 / 3; }
.matrix-quadrant.bottom-left { grid-area: 2 / 1 / 3 / 2; }
.matrix-quadrant.bottom-right { grid-area: 2 / 2 / 3 / 3; }

.matrix-quadrant.is-drop-target {
  border-color: var(--quadrant-color);
  box-shadow: inset 0 0 0 2px var(--quadrant-color);
}

/* Collapsed quadrant */
.matrix-quadrant.is-collapsed {
  cursor: pointer;
}

.matrix-quadrant.is-collapsed:hover {
  background: rgba(255, 255, 255, 0.08);
}

.matrix-quadrant-collapsed {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 4px;
}

.matrix-quadrant-collapsed-title {
  font-size: 9px;
  font-weight: 700;
  color: var(--quadrant-color);
  letter-spacing: 0.1em;
}

.matrix-quadrant-collapsed-count {
  font-size: 14px;
  font-weight: 700;
  color: var(--notion-text);
}

/* Expanded quadrant - stays in its position, just takes more space via grid */
.matrix-quadrant.is-expanded {
  /* No grid-area override - stays in natural position */
  z-index: 1;
}

/* Quadrant header */
.matrix-quadrant-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: linear-gradient(90deg, var(--quadrant-color), transparent);
  background-size: 4px 100%;
  background-repeat: no-repeat;
  cursor: pointer;
  transition: background 150ms ease;
  flex-shrink: 0;
}

.matrix-quadrant-header:hover {
  background: linear-gradient(90deg, var(--quadrant-color), rgba(255, 255, 255, 0.05));
  background-size: 4px 100%, 100% 100%;
  background-repeat: no-repeat;
}

.matrix-quadrant-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--notion-text);
  flex: 1;
}

.matrix-quadrant-count {
  font-size: 11px;
  font-weight: 700;
  color: var(--quadrant-color);
  background: rgba(255, 255, 255, 0.1);
  padding: 2px 8px;
  border-radius: 999px;
}

.matrix-quadrant-close {
  background: transparent;
  border: none;
  color: var(--notion-text-muted);
  cursor: pointer;
  padding: 4px;
  font-size: 12px;
  transition: color 100ms ease;
}

.matrix-quadrant-close:hover {
  color: var(--notion-text);
}

/* Tasks container */
.matrix-quadrant-tasks {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.matrix-quadrant-empty {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  color: var(--notion-text-muted);
  font-style: italic;
  border: 2px dashed rgba(255, 255, 255, 0.08);
  border-radius: var(--radius-sm);
  margin: 4px;
  min-height: 60px;
}

/* Task card */
.matrix-task {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 8px 10px;
  background: var(--notion-bg);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 150ms ease;
}

.matrix-task:hover {
  background: var(--notion-bg-hover);
  border-color: rgba(255, 255, 255, 0.15);
  transform: translateX(2px);
}

.matrix-task.is-dragging {
  opacity: 0.5;
}

.matrix-task.is-complete {
  opacity: 0.5;
}

.matrix-task.is-complete .matrix-task-title {
  text-decoration: line-through;
}

.matrix-task.has-hard-deadline {
  border-left: 3px solid #ef4444;
}

.matrix-task.is-selected {
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.4);
}

.matrix-task.is-focused {
  outline: 2px solid var(--notion-blue);
  outline-offset: -2px;
}

.matrix-selection-count {
  font-size: 11px;
  color: var(--notion-blue);
  font-weight: 500;
}

/* Task toggles */
.matrix-task-toggles {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex-shrink: 0;
}

.matrix-toggle {
  width: 22px;
  height: 22px;
  border-radius: 4px;
  border: 1px solid rgba(255, 255, 255, 0.15);
  background: transparent;
  cursor: pointer;
  font-size: 11px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 150ms ease;
  opacity: 0.5;
}

.matrix-toggle:hover {
  opacity: 1;
  border-color: rgba(255, 255, 255, 0.3);
}

.matrix-toggle.urgent.is-active {
  background: rgba(239, 68, 68, 0.2);
  border-color: #ef4444;
  opacity: 1;
}

.matrix-toggle.important.is-active {
  background: rgba(59, 130, 246, 0.2);
  border-color: #3b82f6;
  opacity: 1;
}

/* Task content */
.matrix-task-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.matrix-task-title {
  font-size: 12px;
  color: var(--notion-text);
  line-height: 1.4;
  word-break: break-word;
}

.matrix-task-meta {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 10px;
  color: var(--notion-text-muted);
}

.matrix-task-date.is-overdue {
  color: #ef4444;
}

/* ===================================
   RECURRENCE PICKER STYLES
   =================================== */

.task-recurrence-container {
  position: relative;
  display: inline-flex;
}

.recurrence-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  font-size: 11px;
  font-weight: 500;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--notion-text-muted);
  cursor: pointer;
  transition: all 150ms ease;
  white-space: nowrap;
}

.recurrence-chip:hover {
  background: var(--notion-bg-hover);
  border-color: rgba(255, 255, 255, 0.25);
  color: var(--notion-text);
}

.recurrence-chip.has-recurrence {
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.4);
  color: #93c5fd;
}

.recurrence-chip.has-recurrence:hover {
  background: rgba(59, 130, 246, 0.25);
  border-color: rgba(59, 130, 246, 0.5);
}

.recurrence-icon {
  font-size: 12px;
  line-height: 1;
}

.recurrence-label {
  max-width: 80px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.recurrence-picker-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
}

.recurrence-picker {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 4px;
  padding: 12px;
  background: var(--notion-bg-secondary);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: var(--radius-md);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
  z-index: 1000;
  min-width: 220px;
}

.recurrence-picker-header {
  font-size: 11px;
  font-weight: 600;
  color: var(--notion-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 10px;
}

.recurrence-weekdays {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-bottom: 12px;
}

.weekday-btn {
  flex: 0 0 auto;
  padding: 6px 10px;
  font-size: 11px;
  font-weight: 500;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--notion-text-muted);
  cursor: pointer;
  transition: all 150ms ease;
}

.weekday-btn:hover {
  background: var(--notion-bg-hover);
  border-color: rgba(255, 255, 255, 0.25);
  color: var(--notion-text);
}

.weekday-btn.is-selected {
  background: rgba(59, 130, 246, 0.2);
  border-color: #3b82f6;
  color: #93c5fd;
}

.recurrence-presets {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding-top: 10px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
}

.recurrence-presets button {
  padding: 4px 10px;
  font-size: 10px;
  font-weight: 500;
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--notion-text-muted);
  cursor: pointer;
  transition: all 150ms ease;
}

.recurrence-presets button:hover {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

.recurrence-presets button.clear-btn {
  color: #f87171;
  border-color: rgba(248, 113, 113, 0.3);
}

.recurrence-presets button.clear-btn:hover {
  background: rgba(248, 113, 113, 0.15);
}

/* ===================================
   SUBTASK STYLES - Notion-like Design
   =================================== */

/* Subtask indicators - left borders removed, pie chart is sufficient */
.task-row.is-subtask {
  margin-left: 20px;
}

/* Notion-style Subtask Pie Chart Indicator */
.subtask-rollup-pill {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 2px 6px;
  font-size: 11px;
  font-weight: 500;
  color: var(--notion-text-muted);
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 150ms ease;
}

.subtask-rollup-pill:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--notion-text-secondary);
}

.subtask-rollup-pill.is-expanded {
  background: rgba(255, 255, 255, 0.04);
}

.subtask-rollup-pill.all-done {
  color: #86efac;
}

.subtask-rollup-pill.all-done:hover {
  background: rgba(34, 197, 94, 0.08);
}

/* SVG Progress ring for subtask indicator */
.subtask-progress-ring {
  flex-shrink: 0;
  transition: transform 150ms ease;
}

.subtask-rollup-pill:hover .subtask-progress-ring {
  transform: scale(1.2);
}

.subtask-rollup-count {
  font-variant-numeric: tabular-nums;
  opacity: 0.85;
}

/* Overdue subtasks - red warning */
.subtask-rollup-pill.has-overdue {
  color: #ef4444;
}

.subtask-rollup-pill.has-overdue:hover {
  background: rgba(239, 68, 68, 0.08);
}

.subtask-rollup-pill.has-overdue .subtask-rollup-count {
  color: #f87171;
  opacity: 1;
}

/* Legacy pie chart styles (kept for backwards compatibility) */
.subtask-progress-pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 3px 10px 3px 6px;
  font-size: 11px;
  font-weight: 600;
  border-radius: var(--radius-sm);
  background: rgba(59, 130, 246, 0.12);
  color: #93c5fd;
  cursor: pointer;
  transition: all 150ms ease;
}

.subtask-progress-pill:hover {
  background: rgba(59, 130, 246, 0.2);
}

.subtask-progress-pill.all-done {
  background: rgba(34, 197, 94, 0.12);
  color: #86efac;
}

.subtask-pie-chart {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: conic-gradient(
    #60a5fa var(--progress, 0%),
    rgba(255, 255, 255, 0.15) var(--progress, 0%)
  );
  position: relative;
  flex-shrink: 0;
}

.subtask-pie-chart .pie-fill {
  display: none;
}

.subtask-progress-pill.all-done .subtask-pie-chart {
  background: conic-gradient(
    #86efac 100%,
    rgba(255, 255, 255, 0.15) 100%
  );
}

.subtask-count {
  font-variant-numeric: tabular-nums;
}

.subtask-chevron {
  font-size: 9px;
  opacity: 0.7;
}

/* ============================================
   Subtask List Container - Notion-like
   ============================================ */

.subtask-list-container {
  margin-top: 6px;
  padding: 0;
  background: transparent;
  border-radius: 0;
}

.subtask-list-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 0;
  margin-bottom: 2px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.subtask-list-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--notion-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.add-subtask-inline-btn {
  font-size: 11px;
  font-weight: 500;
  color: var(--notion-text-muted);
  background: transparent;
  border: none;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 150ms ease;
}

.add-subtask-inline-btn:hover {
  background: rgba(59, 130, 246, 0.15);
  color: #93c5fd;
}

.subtask-list-body {
  display: flex;
  flex-direction: column;
  gap: 0;
}

/* ============================================
   Subtask Row - Main Task Mirror Style
   ============================================ */

.subtask-row {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px 12px;
  margin-left: 8px;
  margin-right: 8px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
  transition: background 150ms ease, outline 150ms ease;
  transform: scale(0.95);
  transform-origin: top left;
  cursor: pointer;
}

.subtask-row:hover {
  background: rgba(255, 255, 255, 0.02);
}

.subtask-row:last-child {
  border-bottom: none;
}

.subtask-row.is-complete {
  opacity: 0.5;
}

.subtask-row.is-complete .subtask-title {
  text-decoration: line-through;
  color: var(--notion-text-muted);
}

/* Subtask selection - subtle Notion-like blue highlight */
.subtask-row.is-selected {
  background: rgba(35, 131, 226, 0.08);
  border-radius: 4px;
  outline: 1px solid rgba(35, 131, 226, 0.2);
  outline-offset: -1px;
}

.subtask-row.is-selected:hover {
  background: rgba(35, 131, 226, 0.12);
}

.subtask-row.is-selected.is-complete {
  opacity: 0.65;
}

/* Subtask Row Main Line (checkbox + title + deadline) */
.subtask-row-main {
  display: flex;
  align-items: center;
  gap: 8px;
  min-height: 28px;
}

/* Notion-style Checkbox - Circle like Notion */
.subtask-checkbox {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 1.5px solid rgba(255, 255, 255, 0.35);
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 150ms ease;
  flex-shrink: 0;
  padding: 0;
}

.subtask-checkbox:hover {
  border-color: var(--notion-blue);
  background: rgba(59, 130, 246, 0.1);
}

.subtask-checkbox.is-checked {
  background: var(--notion-blue);
  border-color: var(--notion-blue);
}

.subtask-checkbox .check-icon {
  font-size: 10px;
  color: white;
  font-weight: 600;
}

.subtask-checkbox-placeholder {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 1.5px dashed rgba(255, 255, 255, 0.2);
  flex-shrink: 0;
}

/* Subtask Title */
.subtask-title {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--notion-text);
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.subtask-row-right {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
}

/* Subtask Deadline Chip */
.subtask-deadline-chip {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  border: none;
  cursor: pointer;
  transition: all 150ms ease;
}

.subtask-deadline-chip.is-soft {
  background: rgba(59, 130, 246, 0.15);
  color: #93c5fd;
}

.subtask-deadline-chip.is-hard {
  background: rgba(239, 68, 68, 0.15);
  color: #fca5a5;
}

.subtask-deadline-chip:hover {
  filter: brightness(1.1);
}

/* Subtask Properties Row */
.subtask-row-properties {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding-left: 24px;
  padding-right: 8px;
  flex-wrap: nowrap;
  overflow: hidden;
  container-type: inline-size;
  container-name: subtask-props;
}

.subtask-properties-left {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: nowrap;
  flex: 1;
  min-width: 0;
}

.subtask-properties-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: nowrap;
  flex-shrink: 0;
}

/* Container query: hide Urgent/Important labels when narrow */
@container subtask-props (max-width: 450px) {
  .subtask-properties-right .subtask-flag span {
    display: none;
  }
  
  .subtask-properties-right .subtask-flag {
    padding: 4px;
    min-width: 20px;
    justify-content: center;
  }
  
  .subtask-properties-right .subtask-notes-btn {
    font-size: 10px;
    padding: 2px 4px;
  }
}

/* Very narrow: hide notes button too */
@container subtask-props (max-width: 350px) {
  .subtask-properties-right .subtask-notes-btn {
    display: none;
  }
  
  .subtask-properties-left .subtask-matrix-select {
    font-size: 10px;
    padding: 2px 6px;
  }
}

.subtask-date-field {
  font-size: 11px !important;
  padding: 2px 6px !important;
  min-width: 70px;
}

/* Subtask Status Select - scaled down version */
.subtask-status-select .status-select-trigger {
  min-height: 20px;
  padding: 2px 8px;
  font-size: 11px;
}

.subtask-status-select .status-select-circle {
  font-size: 9px;
}

.subtask-status-select .status-select-label {
  font-size: 11px;
}

/* Subtask Matrix Select - scaled down version */
.subtask-matrix-select {
  appearance: none;
  font-size: 11px;
  font-weight: 500;
  padding: 2px 8px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  color: white;
  min-height: 20px;
  transition: all var(--transition-fast);
}

.subtask-matrix-select:hover {
  filter: brightness(1.15);
}

.subtask-matrix-select.matrix-do-now {
  background: var(--matrix-do-now);
}

.subtask-matrix-select.matrix-deep-work {
  background: var(--matrix-deep-work);
}

.subtask-matrix-select.matrix-delegate {
  background: var(--matrix-delegate);
}

.subtask-matrix-select.matrix-trash {
  background: var(--matrix-trash);
}

.subtask-notes-btn {
  font-size: 11px;
  color: var(--notion-text-muted);
  background: transparent;
  border: none;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 150ms ease;
}

.subtask-notes-btn:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--notion-text);
}

/* Subtask Flags */
.subtask-flag {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: var(--notion-text-muted);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 150ms ease;
}

.subtask-flag input {
  appearance: none;
  width: 12px;
  height: 12px;
  border: 1.5px solid rgba(255, 255, 255, 0.3);
  border-radius: 3px;
  background: transparent;
  cursor: pointer;
  position: relative;
  flex-shrink: 0;
}

.subtask-flag input:checked {
  background: var(--notion-blue);
  border-color: var(--notion-blue);
}

.subtask-flag input:checked::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 8px;
  color: white;
  font-weight: 600;
}

.subtask-flag:hover {
  background: rgba(255, 255, 255, 0.06);
}

.subtask-flag.is-active {
  background: rgba(251, 191, 36, 0.15);
  color: #fcd34d;
}

.subtask-flag.is-active input {
  border-color: #fcd34d;
  background: #fcd34d;
}

/* Subtask Actions Row */
.subtask-row-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  padding-left: 24px;
  flex-wrap: nowrap;
  overflow: hidden;
}

.subtask-action-btn {
  font-size: 11px;
  color: var(--notion-text-muted);
  background: transparent;
  border: none;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 150ms ease;
}

.subtask-action-btn:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--notion-text);
}

.subtask-trash-btn:hover {
  background: rgba(239, 68, 68, 0.15);
  color: #fca5a5;
}

.subtask-remaining {
  font-size: 10px;
  color: var(--notion-text-muted);
  padding: 2px 6px;
  background: rgba(59, 130, 246, 0.1);
  border-radius: var(--radius-sm);
}

.subtask-open-link {
  font-size: 11px;
  color: #93c5fd;
  text-decoration: none;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  transition: all 150ms ease;
}

.subtask-open-link:hover {
  background: rgba(59, 130, 246, 0.15);
}

/* Subtask Expanded Panels */
.subtask-expanded-panel {
  margin-top: 6px;
  margin-left: 24px;
  padding: 10px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: var(--radius-sm);
  position: relative;
}

.subtask-notes-textarea {
  width: 100%;
  min-height: 60px;
  font-size: 12px;
  padding: 8px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-sm);
  color: var(--notion-text);
  resize: vertical;
}

.subtask-notes-textarea:focus {
  outline: none;
  border-color: var(--notion-blue);
}

.subtask-estimate-fields {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.subtask-estimate-fields label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--notion-text-muted);
}

.subtask-estimate-fields input {
  width: 80px;
  padding: 4px 8px;
  font-size: 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-sm);
  color: var(--notion-text);
}

.subtask-estimate-fields input:focus {
  outline: none;
  border-color: var(--notion-blue);
}

.subtask-panel-close {
  position: absolute;
  top: 6px;
  right: 6px;
  padding: 2px 6px;
  font-size: 12px;
  background: transparent;
  border: none;
  color: var(--notion-text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
}

.subtask-panel-close:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--notion-text);
}

/* Add Subtask Form */
.add-subtask-form.subtask-row {
  background: rgba(34, 197, 94, 0.03);
  border-bottom: 1px solid rgba(34, 197, 94, 0.15);
}

.subtask-title-input {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  padding: 4px 8px;
  background: transparent;
  border: none;
  color: var(--notion-text);
  outline: none;
}

.subtask-title-input::placeholder {
  color: var(--notion-text-muted);
}

.subtask-form-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}

.subtask-add-btn {
  font-size: 11px;
  font-weight: 600;
  padding: 4px 10px;
  background: rgba(34, 197, 94, 0.2);
  color: #86efac;
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 150ms ease;
}

.subtask-add-btn:hover:not(:disabled) {
  background: rgba(34, 197, 94, 0.3);
}

.subtask-add-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.subtask-cancel-btn {
  font-size: 12px;
  padding: 4px 8px;
  background: transparent;
  border: none;
  color: var(--notion-text-muted);
  cursor: pointer;
  transition: color 150ms ease;
}

.subtask-cancel-btn:hover {
  color: #f87171;
}

.subtask-loading {
  padding: 12px;
  text-align: center;
  font-size: 11px;
  color: var(--notion-text-muted);
}

/* Legacy subtask-item styles (kept for backwards compatibility) */
.subtask-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: var(--radius-sm);
  border-left: 2px solid rgba(59, 130, 246, 0.4);
}

.subtask-item.is-complete {
  opacity: 0.6;
}

.subtask-item.is-complete .subtask-title {
  text-decoration: line-through;
}

/* ============================================
   Full-Featured Subtask Rows
   ============================================ */

.subtask-item.subtask-full {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 10px 12px;
  background: rgba(255, 255, 255, 0.02);
  border-left: 3px solid rgba(59, 130, 246, 0.5);
}

.subtask-item.subtask-full.is-complete {
  border-left-color: rgba(34, 197, 94, 0.4);
}

/* Subtask Header Row */
.subtask-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.subtask-header-left {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
  min-width: 0;
}

.subtask-full .subtask-title {
  white-space: normal;
  overflow: visible;
  text-overflow: unset;
  font-size: 13px;
  font-weight: 500;
}

.subtask-header-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.subtask-deadline {
  font-size: 10px;
  padding: 2px 8px;
}

/* Subtask Properties Row */
.subtask-properties {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  padding-left: 28px;
}

.subtask-properties-left {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.subtask-properties-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.subtask-date-input {
  font-size: 11px;
}

.subtask-matrix-select {
  font-size: 11px;
  padding: 2px 8px;
  min-height: 22px;
}

.subtask-flag {
  font-size: 11px;
  padding: 2px 4px;
}

.subtask-flag .flag-label {
  font-size: 10px;
}

/* Subtask Secondary Row */
.subtask-secondary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding-left: 28px;
}

.subtask-secondary-left,
.subtask-secondary-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.subtask-secondary .task-notes-toggle {
  font-size: 11px;
}

.subtask-time-pill {
  font-size: 10px;
  padding: 2px 6px;
}

/* Subtask Expanded Panels */
.subtask-tracking-panel,
.subtask-notes-panel,
.subtask-estimate-panel {
  margin-top: 6px;
  margin-left: 28px;
  padding: 10px 12px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: var(--radius-sm);
  position: relative;
}

.subtask-notes-panel .task-notes-input {
  width: 100%;
  min-height: 60px;
  font-size: 12px;
}

.subtask-estimate-panel .estimate-editor-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.subtask-estimate-panel .estimate-label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--notion-text-muted);
}

.subtask-estimate-panel .estimate-input {
  width: 80px;
  padding: 4px 8px;
  font-size: 12px;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-sm);
  background: rgba(255, 255, 255, 0.05);
  color: var(--notion-text);
}

.subtask-estimate-panel .estimate-input:focus {
  outline: none;
  border-color: var(--notion-blue);
}

.tracking-summary {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.tracking-row {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
}

.tracking-label {
  color: var(--notion-text-muted);
}

/* Subtask add form styling */
.add-subtask-form.subtask-full {
  border-left-color: rgba(34, 197, 94, 0.5);
  background: rgba(34, 197, 94, 0.05);
}

.subtask-title-input {
  flex: 1;
  border: none;
  background: transparent;
  color: var(--notion-text);
  font-size: 13px;
  font-weight: 500;
  outline: none;
  padding: 4px 0;
}

.subtask-title-input::placeholder {
  color: var(--notion-text-muted);
}

.add-subtask-form .add-subtask-submit {
  padding: 4px 12px;
  font-size: 11px;
  font-weight: 600;
  background: rgba(34, 197, 94, 0.2);
  color: #86efac;
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 150ms ease;
}

.add-subtask-form .add-subtask-submit:hover:not(:disabled) {
  background: rgba(34, 197, 94, 0.3);
}

.add-subtask-form .add-subtask-submit:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.add-subtask-form .add-subtask-cancel {
  padding: 4px 8px;
  font-size: 12px;
  background: transparent;
  color: var(--notion-text-muted);
  border: none;
  cursor: pointer;
  transition: color 150ms ease;
}

.add-subtask-form .add-subtask-cancel:hover {
  color: var(--notion-text);
}

/* Foam mode adjustments for subtasks */
@container task-props (max-width: 550px) {
  .subtask-properties {
    flex-direction: column;
    gap: 8px;
    padding-left: 28px;
  }
  
  .subtask-properties-left,
  .subtask-properties-right {
    width: 100%;
  }
  
  .subtask-secondary {
    flex-direction: column;
    gap: 8px;
    padding-left: 28px;
  }
  
  .subtask-secondary-left,
  .subtask-secondary-right {
    width: 100%;
  }
  
  .subtask-flag .flag-label {
    display: none;
  }
}

.subtask-date {
  font-size: 10px;
  color: var(--notion-text-muted);
  flex-shrink: 0;
}

.subtask-loading {
  padding: 12px;
  text-align: center;
  font-size: 12px;
  color: var(--notion-text-muted);
}

.subtask-count {
  font-weight: 600;
}

.subtask-chevron {
  font-size: 10px;
  opacity: 0.7;
}

/* ===================================
   SNOOZE STYLES
   =================================== */

.snooze-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  font-size: 11px;
  font-weight: 500;
  border: 1px solid rgba(251, 191, 36, 0.3);
  border-radius: var(--radius-sm);
  background: rgba(251, 191, 36, 0.1);
  color: #fcd34d;
  cursor: pointer;
  transition: all 150ms ease;
}

.snooze-chip:hover {
  background: rgba(251, 191, 36, 0.2);
  border-color: rgba(251, 191, 36, 0.5);
}

.snooze-chip.is-snoozed {
  background: rgba(251, 191, 36, 0.15);
  border-color: rgba(251, 191, 36, 0.4);
}

.snooze-picker {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 4px;
  padding: 8px;
  background: var(--notion-bg-secondary);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: var(--radius-md);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
  z-index: 1000;
  min-width: 160px;
}

.snooze-option {
  display: block;
  width: 100%;
  padding: 6px 10px;
  font-size: 12px;
  text-align: left;
  border: none;
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--notion-text);
  cursor: pointer;
  transition: background 150ms ease;
}

.snooze-option:hover {
  background: var(--notion-bg-hover);
}

/* ===================================
   TIME TRACKING GOAL STYLES
   =================================== */

/* Circular Progress Ring */
.tracking-goal-circle-container {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 16px;
  padding: 12px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 8px;
}

.tracking-goal-circle {
  position: relative;
  width: 52px;
  height: 52px;
  flex-shrink: 0;
}

.tracking-goal-svg {
  width: 100%;
  height: 100%;
  transform: rotate(0deg);
}

.tracking-goal-text {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.tracking-goal-percent {
  font-size: 12px;
  font-weight: 700;
  color: #22c55e;
  line-height: 1;
}

.tracking-goal-circle.exceeded .tracking-goal-percent {
  color: #fbbf24;
}

.tracking-goal-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.tracking-goal-title {
  font-size: 11px;
  font-weight: 600;
  color: var(--notion-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.tracking-goal-detail {
  font-size: 12px;
  color: var(--notion-text-secondary);
}

/* Legacy bar styles (kept for backwards compat) */
.tracking-goal-bar {
  width: 100%;
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
  margin-top: 8px;
}

.tracking-goal-progress {
  height: 100%;
  background: linear-gradient(90deg, #22c55e, #86efac);
  border-radius: 2px;
  transition: width 300ms ease;
}

.tracking-goal-progress.exceeded {
  background: linear-gradient(90deg, #f59e0b, #fcd34d);
}

.tracking-goal-label {
  display: flex;
  justify-content: space-between;
  font-size: 10px;
  color: var(--notion-text-muted);
  margin-top: 4px;
}

/* ===================================
   CHATBOT PANEL STYLES
   =================================== */

.chatbot-panel {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--notion-bg);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.chatbot-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: var(--notion-bg-secondary);
  border-bottom: 1px solid var(--notion-border);
}

.chatbot-header h3 {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  color: var(--notion-text);
}

.chatbot-header-actions {
  display: flex;
  gap: 8px;
}

.chatbot-header-actions button {
  background: transparent;
  border: none;
  padding: 4px 8px;
  font-size: 14px;
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: background 150ms ease;
}

.chatbot-header-actions button:hover {
  background: var(--notion-bg-hover);
}

.chatbot-header-actions .expand-btn {
  font-size: 16px;
}

/* Expanded/Fullscreen Chatbot Panel */
.fullscreen-chatbot-overlay.is-expanded {
  top: 0;
  right: 0;
  width: 100%;
  height: 100vh;
  max-height: 100vh;
  border-radius: 0;
  animation: chatbotExpandIn 200ms ease-out;
}

.fullscreen-chatbot-overlay.is-expanded .chatbot-panel {
  max-height: 100vh;
  border-radius: 0;
}

@keyframes chatbotExpandIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.chatbot-messages {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.chatbot-welcome {
  text-align: center;
  padding: 24px;
  color: var(--notion-text-muted);
}

.chatbot-welcome p {
  margin: 0 0 12px;
}

.chatbot-welcome .hint {
  font-size: 12px;
  margin-bottom: 8px;
}

.chatbot-welcome ul {
  list-style: none;
  padding: 0;
  margin: 0;
  text-align: left;
  display: inline-block;
}

.chatbot-welcome li {
  font-size: 12px;
  padding: 4px 0;
  color: var(--notion-text-muted);
}

.chatbot-welcome li::before {
  content: '"';
  color: var(--notion-blue);
}

.chatbot-welcome li::after {
  content: '"';
  color: var(--notion-blue);
}

.chat-message {
  max-width: 85%;
  padding: 10px 14px;
  border-radius: var(--radius-lg);
  font-size: 13px;
  line-height: 1.5;
}

.chat-message.user {
  align-self: flex-end;
  background: var(--notion-blue);
  color: white;
  border-bottom-right-radius: 4px;
}

.chat-message.assistant {
  align-self: flex-start;
  background: var(--notion-bg-secondary);
  color: var(--notion-text);
  border-bottom-left-radius: 4px;
}

.chat-message.system {
  align-self: center;
  background: rgba(255, 255, 255, 0.05);
  color: var(--notion-text-muted);
  font-size: 12px;
  padding: 6px 12px;
}

.chat-message .message-content {
  white-space: pre-wrap;
  word-break: break-word;
}

.chat-message .message-time {
  font-size: 10px;
  opacity: 0.6;
  margin-top: 4px;
  text-align: right;
}

.chat-message.loading {
  padding: 16px 20px;
}

.typing-indicator {
  display: flex;
  gap: 4px;
}

.typing-indicator span {
  width: 8px;
  height: 8px;
  background: var(--notion-text-muted);
  border-radius: 50%;
  animation: typing-bounce 1.4s infinite ease-in-out both;
}

.typing-indicator span:nth-child(1) {
  animation-delay: -0.32s;
}

.typing-indicator span:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes typing-bounce {
  0%, 80%, 100% {
    transform: scale(0);
  }
  40% {
    transform: scale(1);
  }
}

.chatbot-action-preview {
  background: var(--notion-bg-secondary);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-md);
  padding: 16px;
  margin-top: 8px;
}

.chatbot-action-preview h4 {
  margin: 0 0 12px;
  font-size: 13px;
  font-weight: 600;
  color: var(--notion-text);
}

.action-list {
  list-style: none;
  padding: 0;
  margin: 0 0 16px;
}

.action-item {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 8px 0;
  border-bottom: 1px solid var(--notion-border);
  font-size: 12px;
}

.action-item:last-child {
  border-bottom: none;
}

.action-icon {
  flex-shrink: 0;
}

.action-description {
  color: var(--notion-text);
}

.action-buttons {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.action-buttons button {
  padding: 8px 16px;
  font-size: 12px;
  font-weight: 500;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 150ms ease;
}

.btn-confirm {
  background: var(--notion-blue);
  color: white;
  border: none;
}

.btn-confirm:hover:not(:disabled) {
  background: #1a6fc4;
}

.btn-confirm:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-cancel {
  background: transparent;
  color: var(--notion-text-muted);
  border: 1px solid var(--notion-border);
}

.btn-cancel:hover:not(:disabled) {
  background: var(--notion-bg-hover);
  color: var(--notion-text);
}

.execution-results {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
  background: var(--notion-bg-secondary);
  border-radius: var(--radius-sm);
  font-size: 12px;
}

.result-item {
  padding: 4px 8px;
  border-radius: var(--radius-sm);
}

.result-item.success {
  color: #22c55e;
}

.result-item.error {
  color: var(--notion-red);
}

.chatbot-error {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  margin: 0 12px;
  background: rgba(224, 62, 62, 0.1);
  border: 1px solid rgba(224, 62, 62, 0.3);
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--notion-red);
}

.chatbot-error .error-icon {
  flex-shrink: 0;
}

.chatbot-error .error-text {
  flex: 1;
}

.chatbot-error button {
  background: transparent;
  border: none;
  color: var(--notion-red);
  cursor: pointer;
  padding: 2px;
  opacity: 0.7;
}

.chatbot-error button:hover {
  opacity: 1;
}

.chatbot-input-area {
  padding: 12px 16px;
  background: var(--notion-bg-secondary);
  border-top: 1px solid var(--notion-border);
}

.input-wrapper {
  position: relative;
  display: flex;
  align-items: flex-end;
  gap: 8px;
  background: var(--notion-bg);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-md);
  padding: 8px 12px;
  transition: border-color 150ms ease;
}

.input-wrapper:focus-within {
  border-color: var(--notion-blue);
}

.input-wrapper textarea {
  flex: 1;
  border: none;
  background: transparent;
  color: var(--notion-text);
  font-family: var(--notion-font);
  font-size: 13px;
  line-height: 1.5;
  resize: none;
  min-height: 24px;
  max-height: 120px;
  outline: none;
}

.input-wrapper textarea::placeholder {
  color: var(--notion-text-muted);
}

/* Live transcription indicator */
.interim-indicator {
  position: absolute;
  top: 4px;
  right: 8px;
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  background: rgba(239, 68, 68, 0.15);
  border-radius: 4px;
  font-size: 10px;
  color: #ef4444;
  pointer-events: none;
}

.interim-dot {
  width: 6px;
  height: 6px;
  background: #ef4444;
  border-radius: 50%;
  animation: pulse 1s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(0.8); }
}

.interim-label {
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.input-actions {
  display: flex;
  gap: 4px;
}

.input-actions button {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 16px;
  cursor: pointer;
  transition: all 150ms ease;
}

.input-actions button:hover:not(:disabled) {
  background: var(--notion-bg-hover);
}

.input-actions button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.mic-btn.listening {
  background: rgba(239, 68, 68, 0.2);
  animation: pulse-mic 1.5s infinite;
}

@keyframes pulse-mic {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

.send-btn {
  color: var(--notion-blue);
}

.send-btn:disabled {
  color: var(--notion-text-muted);
}

/* Settings overlay */
.chatbot-settings-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

.chatbot-settings-panel {
  width: 90%;
  max-width: 400px;
  background: var(--notion-bg);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-lg);
  padding: 24px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}

.chatbot-settings-panel h3 {
  margin: 0 0 8px;
  font-size: 16px;
  font-weight: 600;
}

.chatbot-settings-panel .settings-description {
  font-size: 12px;
  color: var(--notion-text-muted);
  margin: 0 0 20px;
}

.chatbot-settings-panel .settings-field {
  margin-bottom: 16px;
}

.chatbot-settings-panel .settings-field label {
  display: block;
  font-size: 12px;
  font-weight: 500;
  color: var(--notion-text-muted);
  margin-bottom: 6px;
}

.chatbot-settings-panel .settings-field input,
.chatbot-settings-panel .settings-field select {
  width: 100%;
  padding: 8px 12px;
  background: var(--notion-bg-secondary);
  border: 1px solid var(--notion-border);
  border-radius: var(--radius-sm);
  color: var(--notion-text);
  font-size: 13px;
  font-family: var(--notion-font);
  outline: none;
  transition: border-color 150ms ease;
}

.chatbot-settings-panel .settings-field input:focus,
.chatbot-settings-panel .settings-field select:focus {
  border-color: var(--notion-blue);
}

.chatbot-settings-panel .settings-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 24px;
}

.chatbot-settings-panel .btn-primary {
  padding: 8px 20px;
  background: var(--notion-blue);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background 150ms ease;
}

.chatbot-settings-panel .btn-primary:hover {
  background: #1a6fc4;
}

/* Chatbot sidebar integration */
.widget-with-chatbot {
  display: flex;
  height: 100%;
}

.widget-main-content {
  flex: 1;
  min-width: 0;
  overflow: hidden;
}

.chatbot-sidebar {
  width: 320px;
  border-left: 1px solid var(--notion-border);
  display: flex;
  flex-direction: column;
}

.chatbot-toggle-btn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 48px;
  height: 48px;
  background: var(--notion-blue);
  color: white;
  border: none;
  border-radius: 50%;
  font-size: 24px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  transition: all 150ms ease;
  z-index: 50;
}

.chatbot-toggle-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
}

/* Chatbot sidebar overlay for main widget */
.chatbot-sidebar-overlay {
  position: fixed;
  top: 0;
  right: 0;
  width: 360px;
  height: 100vh;
  background: var(--notion-bg);
  border-left: 1px solid var(--notion-border);
  box-shadow: -4px 0 24px rgba(0, 0, 0, 0.3);
  z-index: 200;
  animation: slide-in-right 200ms ease-out;
}

@keyframes slide-in-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.gear-button.active {
  background: var(--notion-blue);
  color: white;
}

/* Whisper status indicator */
.whisper-status {
  padding: 6px 12px;
  font-size: 11px;
  color: var(--notion-blue);
  background: rgba(35, 131, 226, 0.1);
  border-bottom: 1px solid var(--notion-border);
  display: flex;
  align-items: center;
  gap: 6px;
}

.mic-btn.transcribing {
  background: rgba(35, 131, 226, 0.2);
  animation: pulse-transcribe 1s infinite;
}

@keyframes pulse-transcribe {
  0%, 100% {
    opacity: 0.6;
  }
  50% {
    opacity: 1;
  }
}

/* Settings hint text */
.settings-hint {
  font-size: 11px;
  color: var(--notion-text-muted);
  margin-top: 4px;
  line-height: 1.4;
}

.settings-hint-box {
  margin-top: 8px;
  padding: 10px;
  background: var(--notion-bg-secondary);
  border-radius: var(--radius-sm);
  border: 1px solid var(--notion-border);
}

.settings-hint-box .settings-hint {
  margin: 0;
}

.settings-hint-box .settings-hint strong {
  color: var(--notion-text);
}

.settings-hint-detail {
  margin-top: 8px !important;
  opacity: 0.8;
}

.settings-hint-warning {
  margin-top: 8px !important;
  color: #f59e0b !important;
}

/* Model Download Progress */
.model-download-status {
  margin-top: 12px;
  padding: 8px 10px;
  background: rgba(59, 130, 246, 0.1);
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: #60a5fa;
}

.model-progress-bar {
  margin-top: 6px;
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
}

.model-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6, #60a5fa);
  border-radius: 2px;
  transition: width 200ms ease;
}

/* ========================================
   First-Time Setup Modal
   ======================================== */

.setup-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  backdrop-filter: blur(8px);
  animation: fadeIn 300ms ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.setup-modal {
  width: 420px;
  max-width: 90vw;
  background: linear-gradient(145deg, #1e1e1e 0%, #161616 100%);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 32px;
  box-shadow: 
    0 24px 80px rgba(0, 0, 0, 0.6),
    0 0 0 1px rgba(255, 255, 255, 0.05) inset;
  animation: modalSlideUp 300ms ease-out;
}

@keyframes modalSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.97);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.setup-modal-header {
  text-align: center;
  margin-bottom: 28px;
}

.setup-modal-header h1 {
  font-size: 22px;
  font-weight: 600;
  color: var(--notion-text);
  margin: 0 0 8px 0;
  letter-spacing: -0.02em;
}

.setup-modal-header p {
  font-size: 14px;
  color: var(--notion-text-muted);
  margin: 0;
}

.setup-modal-options {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.setup-option {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 18px 20px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
  cursor: pointer;
  transition: all 150ms ease;
  text-align: left;
  width: 100%;
}

.setup-option:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.15);
  transform: translateY(-1px);
}

.setup-option:active:not(:disabled) {
  transform: translateY(0);
}

.setup-option:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.setup-option-notion:hover:not(:disabled) {
  border-color: rgba(35, 131, 226, 0.4);
  background: rgba(35, 131, 226, 0.08);
}

.setup-option-local:hover:not(:disabled) {
  border-color: rgba(34, 197, 94, 0.4);
  background: rgba(34, 197, 94, 0.08);
}

.setup-option-icon {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  color: var(--notion-text-muted);
  flex-shrink: 0;
}

.setup-option-notion .setup-option-icon {
  color: var(--notion-blue);
  background: rgba(35, 131, 226, 0.1);
}

.setup-option-local .setup-option-icon {
  color: var(--matrix-green);
  background: rgba(34, 197, 94, 0.1);
}

.setup-option-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.setup-option-text strong {
  font-size: 15px;
  font-weight: 600;
  color: var(--notion-text);
}

.setup-option-text span {
  font-size: 13px;
  color: var(--notion-text-muted);
}

.setup-importing {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-top: 20px;
  padding: 12px;
  background: rgba(35, 131, 226, 0.1);
  border-radius: 8px;
  color: var(--notion-blue);
  font-size: 13px;
}

.setup-spinner {
  width: 16px;
  height: 16px;
  border: 2px solid rgba(35, 131, 226, 0.2);
  border-top-color: var(--notion-blue);
  border-radius: 50%;
  animation: spin 800ms linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
/* ========================================
   First-Time Setup Modal
   ======================================== */

.setup-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  backdrop-filter: blur(8px);
  animation: fadeIn 300ms ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.setup-modal {
  width: 420px;
  max-width: 90vw;
  background: linear-gradient(145deg, #1e1e1e 0%, #161616 100%);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 32px;
  box-shadow: 
    0 24px 80px rgba(0, 0, 0, 0.6),
    0 0 0 1px rgba(255, 255, 255, 0.05) inset;
  animation: modalSlideUp 300ms ease-out;
}

@keyframes modalSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.97);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.setup-modal-header {
  text-align: center;
  margin-bottom: 28px;
}

.setup-modal-header h1 {
  font-size: 22px;
  font-weight: 600;
  color: var(--notion-text);
  margin: 0 0 8px 0;
  letter-spacing: -0.02em;
}

.setup-modal-header p {
  font-size: 14px;
  color: var(--notion-text-muted);
  margin: 0;
}

.setup-modal-options {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.setup-option {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 18px 20px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
  cursor: pointer;
  transition: all 150ms ease;
  text-align: left;
  width: 100%;
}

.setup-option:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.15);
  transform: translateY(-1px);
}

.setup-option:active:not(:disabled) {
  transform: translateY(0);
}

.setup-option:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.setup-option-notion:hover:not(:disabled) {
  border-color: rgba(35, 131, 226, 0.4);
  background: rgba(35, 131, 226, 0.08);
}

.setup-option-local:hover:not(:disabled) {
  border-color: rgba(34, 197, 94, 0.4);
  background: rgba(34, 197, 94, 0.08);
}

.setup-option-icon {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  color: var(--notion-text-muted);
  flex-shrink: 0;
}

.setup-option-notion .setup-option-icon {
  color: var(--notion-blue);
  background: rgba(35, 131, 226, 0.1);
}

.setup-option-local .setup-option-icon {
  color: var(--matrix-green);
  background: rgba(34, 197, 94, 0.1);
}

.setup-option-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.setup-option-text strong {
  font-size: 15px;
  font-weight: 600;
  color: var(--notion-text);
}

.setup-option-text span {
  font-size: 13px;
  color: var(--notion-text-muted);
}

.setup-importing {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-top: 20px;
  padding: 12px;
  background: rgba(35, 131, 226, 0.1);
  border-radius: 8px;
  color: var(--notion-blue);
  font-size: 13px;
}

.setup-spinner {
  width: 16px;
  height: 16px;
  border: 2px solid rgba(35, 131, 226, 0.2);
  border-top-color: var(--notion-blue);
  border-radius: 50%;
  animation: spin 800ms linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}